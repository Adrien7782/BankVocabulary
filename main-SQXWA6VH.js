var JM=Object.defineProperty,XM=Object.defineProperties;var eN=Object.getOwnPropertyDescriptors;var DI=Object.getOwnPropertySymbols;var tN=Object.prototype.hasOwnProperty,nN=Object.prototype.propertyIsEnumerable;var TI=(n,e,t)=>e in n?JM(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,L=(n,e)=>{for(var t in e||={})tN.call(e,t)&&TI(n,t,e[t]);if(DI)for(var t of DI(e))nN.call(e,t)&&TI(n,t,e[t]);return n},ne=(n,e)=>XM(n,eN(e));var St=null,sl=!1,Vp=1,rN=null,Ft=Symbol("SIGNAL");function J(n){let e=St;return St=n,e}function cl(){return St}var Ko={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Fa(n){if(sl)throw new Error("");if(St===null)return;St.consumerOnSignalRead(n);let e=St.producersTail;if(e!==void 0&&e.producer===n)return;let t,r=St.recomputing;if(r&&(t=e!==void 0?e.nextProducer:St.producers,t!==void 0&&t.producer===n)){St.producersTail=t,t.lastReadVersion=n.version;return}let i=n.consumersTail;if(i!==void 0&&i.consumer===St&&(!r||oN(i,St)))return;let o=Yo(St),s={producer:n,consumer:St,nextProducer:t,prevConsumer:i,lastReadVersion:n.version,nextConsumer:void 0};St.producersTail=s,e!==void 0?e.nextProducer=s:St.producers=s,o&&RI(n,s)}function SI(){Vp++}function Up(n){if(!(Yo(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===Vp)){if(!n.producerMustRecompute(n)&&!Va(n)){Lp(n);return}n.producerRecomputeValue(n),Lp(n)}}function jp(n){if(n.consumers===void 0)return;let e=sl;sl=!0;try{for(let t=n.consumers;t!==void 0;t=t.nextConsumer){let r=t.consumer;r.dirty||iN(r)}}finally{sl=e}}function Bp(){return St?.consumerAllowSignalWrites!==!1}function iN(n){n.dirty=!0,jp(n),n.consumerMarkedDirty?.(n)}function Lp(n){n.dirty=!1,n.lastCleanEpoch=Vp}function Qo(n){return n&&AI(n),J(n)}function AI(n){n.producersTail=void 0,n.recomputing=!0}function La(n,e){J(e),n&&xI(n)}function xI(n){n.recomputing=!1;let e=n.producersTail,t=e!==void 0?e.nextProducer:n.producers;if(t!==void 0){if(Yo(n))do t=Hp(t);while(t!==void 0);e!==void 0?e.nextProducer=void 0:n.producers=void 0}}function Va(n){for(let e=n.producers;e!==void 0;e=e.nextProducer){let t=e.producer,r=e.lastReadVersion;if(r!==t.version||(Up(t),r!==t.version))return!0}return!1}function ji(n){if(Yo(n)){let e=n.producers;for(;e!==void 0;)e=Hp(e)}n.producers=void 0,n.producersTail=void 0,n.consumers=void 0,n.consumersTail=void 0}function RI(n,e){let t=n.consumersTail,r=Yo(n);if(t!==void 0?(e.nextConsumer=t.nextConsumer,t.nextConsumer=e):(e.nextConsumer=void 0,n.consumers=e),e.prevConsumer=t,n.consumersTail=e,!r)for(let i=n.producers;i!==void 0;i=i.nextProducer)RI(i.producer,i)}function Hp(n){let e=n.producer,t=n.nextProducer,r=n.nextConsumer,i=n.prevConsumer;if(n.nextConsumer=void 0,n.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:e.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(e.consumers=r,!Yo(e)){let o=e.producers;for(;o!==void 0;)o=Hp(o)}return t}function Yo(n){return n.consumerIsAlwaysLive||n.consumers!==void 0}function $p(n){rN?.(n)}function oN(n,e){let t=e.producersTail;if(t!==void 0){let r=e.producers;do{if(r===n)return!0;if(r===t)break;r=r.nextProducer}while(r!==void 0)}return!1}function zp(n,e){return Object.is(n,e)}function ul(n,e){let t=Object.create(sN);t.computation=n,e!==void 0&&(t.equal=e);let r=()=>{if(Up(t),Fa(t),t.value===al)throw t.error;return t.value};return r[Ft]=t,$p(t),r}var kp=Symbol("UNSET"),Fp=Symbol("COMPUTING"),al=Symbol("ERRORED"),sN=ne(L({},Ko),{value:kp,dirty:!0,error:null,equal:zp,kind:"computed",producerMustRecompute(n){return n.value===kp||n.value===Fp},producerRecomputeValue(n){if(n.value===Fp)throw new Error("");let e=n.value;n.value=Fp;let t=Qo(n),r,i=!1;try{r=n.computation(),J(null),i=e!==kp&&e!==al&&r!==al&&n.equal(e,r)}catch(o){r=al,n.error=o}finally{La(n,t)}if(i){n.value=e;return}n.value=r,n.version++}});function aN(){throw new Error}var MI=aN;function NI(n){MI(n)}function qp(n){MI=n}var cN=null;function Gp(n,e){let t=Object.create(ll);t.value=n,e!==void 0&&(t.equal=e);let r=()=>PI(t);return r[Ft]=t,$p(t),[r,s=>Ua(t,s),s=>OI(t,s)]}function PI(n){return Fa(n),n.value}function Ua(n,e){Bp()||NI(n),n.equal(n.value,e)||(n.value=e,uN(n))}function OI(n,e){Bp()||NI(n),Ua(n,e(n.value))}var ll=ne(L({},Ko),{equal:zp,value:void 0,kind:"signal"});function uN(n){n.version++,SI(),jp(n),cN?.(n)}function Wp(n){let e=J(null);try{return n()}finally{J(e)}}var Kp=ne(L({},Ko),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!0,dirty:!0,kind:"effect"});function Qp(n){if(n.dirty=!1,n.version>0&&!Va(n))return;n.version++;let e=Qo(n);try{n.cleanup(),n.fn()}finally{La(n,e)}}function se(n){return typeof n=="function"}function Zo(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var dl=Zo(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function ja(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var yt=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(se(r))try{r()}catch(o){e=o instanceof dl?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{kI(o)}catch(s){e=e??[],s instanceof dl?e=[...e,...s.errors]:e.push(s)}}if(e)throw new dl(e)}}add(e){var t;if(e&&e!==this)if(this.closed)kI(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&ja(t,e)}remove(e){let{_finalizers:t}=this;t&&ja(t,e),e instanceof n&&e._removeParent(this)}};yt.EMPTY=(()=>{let n=new yt;return n.closed=!0,n})();var Yp=yt.EMPTY;function fl(n){return n instanceof yt||n&&"closed"in n&&se(n.remove)&&se(n.add)&&se(n.unsubscribe)}function kI(n){se(n)?n():n.unsubscribe()}var En={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Jo={setTimeout(n,e,...t){let{delegate:r}=Jo;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Jo;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function hl(n){Jo.setTimeout(()=>{let{onUnhandledError:e}=En;if(e)e(n);else throw n})}function Ba(){}var FI=Zp("C",void 0,void 0);function LI(n){return Zp("E",void 0,n)}function VI(n){return Zp("N",n,void 0)}function Zp(n,e,t){return{kind:n,value:e,error:t}}var Bi=null;function Xo(n){if(En.useDeprecatedSynchronousErrorHandling){let e=!Bi;if(e&&(Bi={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=Bi;if(Bi=null,t)throw r}}else n()}function UI(n){En.useDeprecatedSynchronousErrorHandling&&Bi&&(Bi.errorThrown=!0,Bi.error=n)}var Hi=class extends yt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,fl(e)&&e.add(this)):this.destination=fN}static create(e,t,r){return new es(e,t,r)}next(e){this.isStopped?Xp(VI(e),this):this._next(e)}error(e){this.isStopped?Xp(LI(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Xp(FI,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},lN=Function.prototype.bind;function Jp(n,e){return lN.call(n,e)}var eg=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){pl(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){pl(r)}else pl(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){pl(t)}}},es=class extends Hi{constructor(e,t,r){super();let i;if(se(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&En.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Jp(e.next,o),error:e.error&&Jp(e.error,o),complete:e.complete&&Jp(e.complete,o)}):i=e}this.destination=new eg(i)}};function pl(n){En.useDeprecatedSynchronousErrorHandling?UI(n):hl(n)}function dN(n){throw n}function Xp(n,e){let{onStoppedNotification:t}=En;t&&Jo.setTimeout(()=>t(n,e))}var fN={closed:!0,next:Ba,error:dN,complete:Ba};var ts=typeof Symbol=="function"&&Symbol.observable||"@@observable";function wn(n){return n}function tg(...n){return ng(n)}function ng(n){return n.length===0?wn:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var ye=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=pN(t)?t:new es(t,r,i);return Xo(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=jI(r),new r((i,o)=>{let s=new es({next:a=>{try{t(a)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[ts](){return this}pipe(...t){return ng(t)(this)}toPromise(t){return t=jI(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function jI(n){var e;return(e=n??En.Promise)!==null&&e!==void 0?e:Promise}function hN(n){return n&&se(n.next)&&se(n.error)&&se(n.complete)}function pN(n){return n&&n instanceof Hi||hN(n)&&fl(n)}function gN(n){return se(n?.lift)}function Ce(n){return e=>{if(gN(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function be(n,e,t,r,i){return new rg(n,e,t,r,i)}var rg=class extends Hi{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};var BI=Zo(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var at=(()=>{class n extends ye{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new gl(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new BI}next(t){Xo(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){Xo(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Xo(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Yp:(this.currentObservers=null,o.push(t),new yt(()=>{this.currentObservers=null,ja(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new ye;return t.source=this,t}}return n.create=(e,t)=>new gl(e,t),n})(),gl=class extends at{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:Yp}};var vt=class extends at{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var _t=new ye(n=>n.complete());function HI(n){return n&&se(n.schedule)}function $I(n){return n[n.length-1]}function ml(n){return se($I(n))?n.pop():void 0}function Kr(n){return HI($I(n))?n.pop():void 0}function ig(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function qI(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(f){try{l(r.next(f))}catch(p){s(p)}}function u(f){try{l(r.throw(f))}catch(p){s(p)}}function l(f){f.done?o(f.value):i(f.value).then(a,u)}l((r=r.apply(n,e||[])).next())})}function zI(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function $i(n){return this instanceof $i?(this.v=n,this):new $i(n)}function GI(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(y){return function(T){return Promise.resolve(T).then(y,p)}}function a(y,T){r[y]&&(i[y]=function(P){return new Promise(function(N,j){o.push([y,P,N,j])>1||u(y,P)})},T&&(i[y]=T(i[y])))}function u(y,T){try{l(r[y](T))}catch(P){g(o[0][3],P)}}function l(y){y.value instanceof $i?Promise.resolve(y.value.v).then(f,p):g(o[0][2],y)}function f(y){u("next",y)}function p(y){u("throw",y)}function g(y,T){y(T),o.shift(),o.length&&u(o[0][0],o[0][1])}}function WI(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof zI=="function"?zI(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(s){return new Promise(function(a,u){s=n[o](s),i(a,u,s.done,s.value)})}}function i(o,s,a,u){Promise.resolve(u).then(function(l){o({value:l,done:a})},s)}}var yl=n=>n&&typeof n.length=="number"&&typeof n!="function";function vl(n){return se(n?.then)}function _l(n){return se(n[ts])}function El(n){return Symbol.asyncIterator&&se(n?.[Symbol.asyncIterator])}function wl(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function mN(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Il=mN();function Cl(n){return se(n?.[Il])}function bl(n){return GI(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield $i(t.read());if(i)return yield $i(void 0);yield yield $i(r)}}finally{t.releaseLock()}})}function Dl(n){return se(n?.getReader)}function Ye(n){if(n instanceof ye)return n;if(n!=null){if(_l(n))return yN(n);if(yl(n))return vN(n);if(vl(n))return _N(n);if(El(n))return KI(n);if(Cl(n))return EN(n);if(Dl(n))return wN(n)}throw wl(n)}function yN(n){return new ye(e=>{let t=n[ts]();if(se(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function vN(n){return new ye(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function _N(n){return new ye(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,hl)})}function EN(n){return new ye(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function KI(n){return new ye(e=>{IN(n,e).catch(t=>e.error(t))})}function wN(n){return KI(bl(n))}function IN(n,e){var t,r,i,o;return qI(this,void 0,void 0,function*(){try{for(t=WI(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function Ht(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function Tl(n,e=0){return Ce((t,r)=>{t.subscribe(be(r,i=>Ht(r,n,()=>r.next(i),e),()=>Ht(r,n,()=>r.complete(),e),i=>Ht(r,n,()=>r.error(i),e)))})}function Sl(n,e=0){return Ce((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function QI(n,e){return Ye(n).pipe(Sl(e),Tl(e))}function YI(n,e){return Ye(n).pipe(Sl(e),Tl(e))}function ZI(n,e){return new ye(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function JI(n,e){return new ye(t=>{let r;return Ht(t,e,()=>{r=n[Il](),Ht(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>se(r?.return)&&r.return()})}function Al(n,e){if(!n)throw new Error("Iterable cannot be null");return new ye(t=>{Ht(t,e,()=>{let r=n[Symbol.asyncIterator]();Ht(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function XI(n,e){return Al(bl(n),e)}function eC(n,e){if(n!=null){if(_l(n))return QI(n,e);if(yl(n))return ZI(n,e);if(vl(n))return YI(n,e);if(El(n))return Al(n,e);if(Cl(n))return JI(n,e);if(Dl(n))return XI(n,e)}throw wl(n)}function Ze(n,e){return e?eC(n,e):Ye(n)}function ge(...n){let e=Kr(n);return Ze(n,e)}function og(n,e){let t=se(n)?n:()=>n,r=i=>i.error(t());return new ye(e?i=>e.schedule(r,0,i):r)}function xl(n){return!!n&&(n instanceof ye||se(n.lift)&&se(n.subscribe))}var zi=Zo(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function Ve(n,e){return Ce((t,r)=>{let i=0;t.subscribe(be(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:CN}=Array;function bN(n,e){return CN(e)?n(...e):n(e)}function Rl(n){return Ve(e=>bN(n,e))}var{isArray:DN}=Array,{getPrototypeOf:TN,prototype:SN,keys:AN}=Object;function Ml(n){if(n.length===1){let e=n[0];if(DN(e))return{args:e,keys:null};if(xN(e)){let t=AN(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function xN(n){return n&&typeof n=="object"&&TN(n)===SN}function Nl(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function sg(...n){let e=Kr(n),t=ml(n),{args:r,keys:i}=Ml(n);if(r.length===0)return Ze([],e);let o=new ye(RN(r,e,i?s=>Nl(i,s):wn));return t?o.pipe(Rl(t)):o}function RN(n,e,t=wn){return r=>{tC(e,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let u=0;u<i;u++)tC(e,()=>{let l=Ze(n[u],e),f=!1;l.subscribe(be(r,p=>{o[u]=p,f||(f=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function tC(n,e,t){n?Ht(t,n,e):e()}function nC(n,e,t,r,i,o,s,a){let u=[],l=0,f=0,p=!1,g=()=>{p&&!u.length&&!l&&e.complete()},y=P=>l<r?T(P):u.push(P),T=P=>{o&&e.next(P),l++;let N=!1;Ye(t(P,f++)).subscribe(be(e,j=>{i?.(j),o?y(j):e.next(j)},()=>{N=!0},void 0,()=>{if(N)try{for(l--;u.length&&l<r;){let j=u.shift();s?Ht(e,s,()=>T(j)):T(j)}g()}catch(j){e.error(j)}}))};return n.subscribe(be(e,y,()=>{p=!0,g()})),()=>{a?.()}}function Lt(n,e,t=1/0){return se(e)?Lt((r,i)=>Ve((o,s)=>e(r,o,i,s))(Ye(n(r,i))),t):(typeof e=="number"&&(t=e),Ce((r,i)=>nC(r,i,n,t)))}function rC(n=1/0){return Lt(wn,n)}function iC(){return rC(1)}function ns(...n){return iC()(Ze(n,Kr(n)))}function Ha(n){return new ye(e=>{Ye(n()).subscribe(e)})}function ag(...n){let e=ml(n),{args:t,keys:r}=Ml(n),i=new ye(o=>{let{length:s}=t;if(!s){o.complete();return}let a=new Array(s),u=s,l=s;for(let f=0;f<s;f++){let p=!1;Ye(t[f]).subscribe(be(o,g=>{p||(p=!0,l--),a[f]=g},()=>u--,void 0,()=>{(!u||!p)&&(l||o.next(r?Nl(r,a):a),o.complete())}))}});return e?i.pipe(Rl(e)):i}function lr(n,e){return Ce((t,r)=>{let i=0;t.subscribe(be(r,o=>n.call(e,o,i++)&&r.next(o)))})}function $a(n){return Ce((e,t)=>{let r=null,i=!1,o;r=e.subscribe(be(t,void 0,void 0,s=>{o=Ye(n(s,$a(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function Pl(n,e){return se(e)?Lt(n,e,1):Lt(n,1)}function oC(n){return Ce((e,t)=>{let r=!1;e.subscribe(be(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function dr(n){return n<=0?()=>_t:Ce((e,t)=>{let r=0;e.subscribe(be(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function sC(n=MN){return Ce((e,t)=>{let r=!1;e.subscribe(be(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function MN(){return new zi}function cg(n){return Ce((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function fr(n,e){let t=arguments.length>=2;return r=>r.pipe(n?lr((i,o)=>n(i,o,r)):wn,dr(1),t?oC(e):sC(()=>new zi))}function Ol(n){return n<=0?()=>_t:Ce((e,t)=>{let r=[];e.subscribe(be(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function ug(...n){let e=Kr(n);return Ce((t,r)=>{(e?ns(n,t,e):ns(n,t)).subscribe(r)})}function hr(n,e){return Ce((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(be(r,u=>{i?.unsubscribe();let l=0,f=o++;Ye(n(u,f)).subscribe(i=be(r,p=>r.next(e?e(u,p,f,l++):p),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function za(n){return Ce((e,t)=>{Ye(n).subscribe(be(t,()=>t.complete(),Ba)),!t.closed&&e.subscribe(t)})}function Fn(n,e,t){let r=se(n)||e||t?{next:n,error:e,complete:t}:n;return r?Ce((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(be(o,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),o.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),o.complete()},u=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,u),o.error(u)},()=>{var u,l;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):wn}var lg;function kl(){return lg}function Ln(n){let e=lg;return lg=n,e}var aC=Symbol("NotFound");function rs(n){return n===aC||n?.name==="\u0275NotFound"}var Cg="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",$=class extends Error{code;constructor(e,t){super(os(e,t)),this.code=e}};function NN(n){return`NG0${Math.abs(n)}`}function os(n,e){return`${NN(n)}${e?": "+e:""}`}var Yi=globalThis;function De(n){for(let e in n)if(n[e]===De)return e;throw Error("")}function fC(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function gr(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(gr).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let r=t.indexOf(`
`);return r>=0?t.slice(0,r):t}function bg(n,e){return n?e?`${n} ${e}`:n:e||""}var PN=De({__forward_ref__:De});function sn(n){return n.__forward_ref__=sn,n.toString=function(){return gr(this())},n}function Et(n){return Dg(n)?n():n}function Dg(n){return typeof n=="function"&&n.hasOwnProperty(PN)&&n.__forward_ref__===sn}function ee(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function yr(n){return{providers:n.providers||[],imports:n.imports||[]}}function Za(n){return ON(n,Hl)}function Tg(n){return Za(n)!==null}function ON(n,e){return n.hasOwnProperty(e)&&n[e]||null}function kN(n){let e=n?.[Hl]??null;return e||null}function fg(n){return n&&n.hasOwnProperty(Ll)?n[Ll]:null}var Hl=De({\u0275prov:De}),Ll=De({\u0275inj:De}),G=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=ee({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Sg(n){return n&&!!n.\u0275providers}var Ag=De({\u0275cmp:De}),xg=De({\u0275dir:De}),Rg=De({\u0275pipe:De}),Mg=De({\u0275mod:De}),Ga=De({\u0275fac:De}),Zi=De({__NG_ELEMENT_ID__:De}),cC=De({__NG_ENV_ID__:De});function Ng(n){return $l(n,"@NgModule"),n[Mg]||null}function Jr(n){return $l(n,"@Component"),n[Ag]||null}function Pg(n){return $l(n,"@Directive"),n[xg]||null}function hC(n){return $l(n,"@Pipe"),n[Rg]||null}function $l(n,e){if(n==null)throw new $(-919,!1)}function Ja(n){return typeof n=="string"?n:n==null?"":String(n)}var pC=De({ngErrorCode:De}),FN=De({ngErrorMessage:De}),LN=De({ngTokenPath:De});function Og(n,e){return gC("",-200,e)}function zl(n,e){throw new $(-201,!1)}function gC(n,e,t){let r=new $(e,n);return r[pC]=e,r[FN]=n,t&&(r[LN]=t),r}function VN(n){return n[pC]}var hg;function mC(){return hg}function Vt(n){let e=hg;return hg=n,e}function kg(n,e,t){let r=Za(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&8)return null;if(e!==void 0)return e;zl(n,"")}var UN={},qi=UN,jN="__NG_DI_FLAG__",pg=class{injector;constructor(e){this.injector=e}retrieve(e,t){let r=Gi(t)||0;try{return this.injector.get(e,r&8?null:qi,r)}catch(i){if(rs(i))return i;throw i}}};function BN(n,e=0){let t=kl();if(t===void 0)throw new $(-203,!1);if(t===null)return kg(n,void 0,e);{let r=HN(e),i=t.retrieve(n,r);if(rs(i)){if(r.optional)return null;throw i}return i}}function ue(n,e=0){return(mC()||BN)(Et(n),e)}function V(n,e){return ue(n,Gi(e))}function Gi(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function HN(n){return{optional:!!(n&8),host:!!(n&1),self:!!(n&2),skipSelf:!!(n&4)}}function gg(n){let e=[];for(let t=0;t<n.length;t++){let r=Et(n[t]);if(Array.isArray(r)){if(r.length===0)throw new $(900,!1);let i,o=0;for(let s=0;s<r.length;s++){let a=r[s],u=$N(a);typeof u=="number"?u===-1?i=a.token:o|=u:i=a}e.push(ue(i,o))}else e.push(ue(r))}return e}function $N(n){return n[jN]}function Qr(n,e){let t=n.hasOwnProperty(Ga);return t?n[Ga]:null}function yC(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],o=e[r];if(t&&(i=t(i),o=t(o)),o!==i)return!1}return!0}function vC(n){return n.flat(Number.POSITIVE_INFINITY)}function ql(n,e){n.forEach(t=>Array.isArray(t)?ql(t,e):e(t))}function Fg(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Xa(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function _C(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function EC(n,e,t){let r=ss(n,e);return r>=0?n[r|1]=t:(r=~r,_C(n,r,e,t)),r}function Gl(n,e){let t=ss(n,e);if(t>=0)return n[t|1]}function ss(n,e){return zN(n,e,1)}function zN(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}var Xr={},qt=[],Ji=new G(""),Lg=new G("",-1),Vg=new G(""),Wa=class{get(e,t=qi){if(t===qi){let i=gC("",-201);throw i.name="\u0275NotFound",i}return t}};function as(n){return{\u0275providers:n}}function wC(n){return as([{provide:Ji,multi:!0,useValue:n}])}function IC(...n){return{\u0275providers:Ug(!0,n),\u0275fromNgModule:!0}}function Ug(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return ql(e,s=>{let a=s;Vl(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&CC(i,o),t}function CC(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];jg(i,o=>{e(o,r)})}}function Vl(n,e,t,r){if(n=Et(n),!n)return!1;let i=null,o=fg(n),s=!o&&Jr(n);if(!o&&!s){let u=n.ngModule;if(o=fg(u),o)i=u;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of u)Vl(l,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;ql(o.imports,f=>{Vl(f,e,t,r)&&(l||=[],l.push(f))}),l!==void 0&&CC(l,e)}if(!a){let l=Qr(i)||(()=>new i);e({provide:i,useFactory:l,deps:qt},i),e({provide:Vg,useValue:i,multi:!0},i),e({provide:Ji,useValue:()=>ue(i),multi:!0},i)}let u=o.providers;if(u!=null&&!a){let l=n;jg(u,f=>{e(f,l)})}}else return!1;return i!==n&&n.providers!==void 0}function jg(n,e){for(let t of n)Sg(t)&&(t=t.\u0275providers),Array.isArray(t)?jg(t,e):e(t)}var qN=De({provide:String,useValue:De});function bC(n){return n!==null&&typeof n=="object"&&qN in n}function GN(n){return!!(n&&n.useExisting)}function WN(n){return!!(n&&n.useFactory)}function Wi(n){return typeof n=="function"}function DC(n){return!!n.useClass}var ec=new G(""),Fl={},uC={},dg;function tc(){return dg===void 0&&(dg=new Wa),dg}var ct=class{},Ki=class extends ct{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,yg(e,s=>this.processProvider(s)),this.records.set(Lg,is(void 0,this)),i.has("environment")&&this.records.set(ct,is(void 0,this));let o=this.records.get(ec);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(Vg,qt,{self:!0}))}retrieve(e,t){let r=Gi(t)||0;try{return this.get(e,qi,r)}catch(i){if(rs(i))return i;throw i}}destroy(){qa(this),this._destroyed=!0;let e=J(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),J(e)}}onDestroy(e){return qa(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){qa(this);let t=Ln(this),r=Vt(void 0),i;try{return e()}finally{Ln(t),Vt(r)}}get(e,t=qi,r){if(qa(this),e.hasOwnProperty(cC))return e[cC](this);let i=Gi(r),o,s=Ln(this),a=Vt(void 0);try{if(!(i&4)){let l=this.records.get(e);if(l===void 0){let f=JN(e)&&Za(e);f&&this.injectableDefInScope(f)?l=is(mg(e),Fl):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l,i)}let u=i&2?tc():this.parent;return t=i&8&&t===qi?null:t,u.get(e,t)}catch(u){let l=VN(u);throw l===-200||l===-201?new $(l,null):u}finally{Vt(a),Ln(s)}}resolveInjectorInitializers(){let e=J(null),t=Ln(this),r=Vt(void 0),i;try{let o=this.get(Ji,qt,{self:!0});for(let s of o)s()}finally{Ln(t),Vt(r),J(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(gr(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=Et(e);let t=Wi(e)?e:Et(e&&e.provide),r=QN(e);if(!Wi(e)&&e.multi===!0){let i=this.records.get(t);i||(i=is(void 0,Fl,!0),i.factory=()=>gg(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t,r){let i=J(null);try{if(t.value===uC)throw Og(gr(e));return t.value===Fl&&(t.value=uC,t.value=t.factory(void 0,r)),typeof t.value=="object"&&t.value&&ZN(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{J(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=Et(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function mg(n){let e=Za(n),t=e!==null?e.factory:Qr(n);if(t!==null)return t;if(n instanceof G)throw new $(204,!1);if(n instanceof Function)return KN(n);throw new $(204,!1)}function KN(n){if(n.length>0)throw new $(204,!1);let t=kN(n);return t!==null?()=>t.factory(n):()=>new n}function QN(n){if(bC(n))return is(void 0,n.useValue);{let e=Bg(n);return is(e,Fl)}}function Bg(n,e,t){let r;if(Wi(n)){let i=Et(n);return Qr(i)||mg(i)}else if(bC(n))r=()=>Et(n.useValue);else if(WN(n))r=()=>n.useFactory(...gg(n.deps||[]));else if(GN(n))r=(i,o)=>ue(Et(n.useExisting),o!==void 0&&o&8?8:void 0);else{let i=Et(n&&(n.useClass||n.provide));if(YN(n))r=()=>new i(...gg(n.deps));else return Qr(i)||mg(i)}return r}function qa(n){if(n.destroyed)throw new $(205,!1)}function is(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function YN(n){return!!n.deps}function ZN(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function JN(n){return typeof n=="function"||typeof n=="object"&&n.ngMetadataName==="InjectionToken"}function yg(n,e){for(let t of n)Array.isArray(t)?yg(t,e):t&&Sg(t)?yg(t.\u0275providers,e):e(t)}function At(n,e){let t;n instanceof Ki?(qa(n),t=n):t=new pg(n);let r,i=Ln(t),o=Vt(void 0);try{return e()}finally{Ln(i),Vt(o)}}function TC(){return mC()!==void 0||kl()!=null}var In=0,Z=1,ie=2,ut=3,an=4,cn=5,cs=6,us=7,We=8,vr=9,_r=10,Ue=11,ls=12,Hg=13,Xi=14,Wt=15,ei=16,eo=17,Vn=18,Er=19,$g=20,pr=21,Wl=22,Yr=23,Kt=24,Kl=25,to=26,Ke=27,SC=1,zg=6,ti=7,nc=8,no=9,ze=10;function Un(n){return Array.isArray(n)&&typeof n[SC]=="object"}function Cn(n){return Array.isArray(n)&&n[SC]===!0}function qg(n){return(n.flags&4)!==0}function ni(n){return n.componentOffset>-1}function ds(n){return(n.flags&1)===1}function jn(n){return!!n.template}function fs(n){return(n[ie]&512)!==0}function ro(n){return(n[ie]&256)===256}var AC="svg",xC="math";function un(n){for(;Array.isArray(n);)n=n[In];return n}function Gg(n,e){return un(e[n])}function bn(n,e){return un(e[n.index])}function rc(n,e){return n.data[e]}function Wg(n,e){return n[e]}function Kg(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function ln(n,e){let t=e[n];return Un(t)?t:t[In]}function RC(n){return(n[ie]&4)===4}function Ql(n){return(n[ie]&128)===128}function MC(n){return Cn(n[ut])}function Bn(n,e){return e==null?null:n[e]}function Qg(n){n[eo]=0}function Yg(n){n[ie]&1024||(n[ie]|=1024,Ql(n)&&hs(n))}function NC(n,e){for(;n>0;)e=e[Xi],n--;return e}function ic(n){return!!(n[ie]&9216||n[Kt]?.dirty)}function Yl(n){n[_r].changeDetectionScheduler?.notify(8),n[ie]&64&&(n[ie]|=1024),ic(n)&&hs(n)}function hs(n){n[_r].changeDetectionScheduler?.notify(0);let e=Zr(n);for(;e!==null&&!(e[ie]&8192||(e[ie]|=8192,!Ql(e)));)e=Zr(e)}function Zg(n,e){if(ro(n))throw new $(911,!1);n[pr]===null&&(n[pr]=[]),n[pr].push(e)}function PC(n,e){if(n[pr]===null)return;let t=n[pr].indexOf(e);t!==-1&&n[pr].splice(t,1)}function Zr(n){let e=n[ut];return Cn(e)?e[ut]:e}function Jg(n){return n[us]??=[]}function Xg(n){return n.cleanup??=[]}function OC(n,e,t,r){let i=Jg(e);i.push(t),n.firstCreatePass&&Xg(n).push(r,i.length-1)}var le={lFrame:ZC(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var vg=!1;function kC(){return le.lFrame.elementDepthCount}function FC(){le.lFrame.elementDepthCount++}function LC(){le.lFrame.elementDepthCount--}function Zl(){return le.bindingsEnabled}function VC(){return le.skipHydrationRootTNode!==null}function UC(n){return le.skipHydrationRootTNode===n}function jC(){le.skipHydrationRootTNode=null}function de(){return le.lFrame.lView}function Xe(){return le.lFrame.tView}function z(n){return le.lFrame.contextLView=n,n[We]}function q(n){return le.lFrame.contextLView=null,n}function Ut(){let n=em();for(;n!==null&&n.type===64;)n=n.parent;return n}function em(){return le.lFrame.currentTNode}function BC(){let n=le.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function ps(n,e){let t=le.lFrame;t.currentTNode=n,t.isParent=e}function tm(){return le.lFrame.isParent}function HC(){le.lFrame.isParent=!1}function $C(){return le.lFrame.contextLView}function nm(){return vg}function Ka(n){let e=vg;return vg=n,e}function rm(){let n=le.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function zC(){return le.lFrame.bindingIndex}function qC(n){return le.lFrame.bindingIndex=n}function io(){return le.lFrame.bindingIndex++}function im(n){let e=le.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function GC(){return le.lFrame.inI18n}function WC(n,e){let t=le.lFrame;t.bindingIndex=t.bindingRootIndex=n,Jl(e)}function KC(){return le.lFrame.currentDirectiveIndex}function Jl(n){le.lFrame.currentDirectiveIndex=n}function QC(n){let e=le.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function om(){return le.lFrame.currentQueryIndex}function Xl(n){le.lFrame.currentQueryIndex=n}function XN(n){let e=n[Z];return e.type===2?e.declTNode:e.type===1?n[cn]:null}function sm(n,e,t){if(t&4){let i=e,o=n;for(;i=i.parent,i===null&&!(t&1);)if(i=XN(o),i===null||(o=o[Xi],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=le.lFrame=YC();return r.currentTNode=e,r.lView=n,!0}function ed(n){let e=YC(),t=n[Z];le.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function YC(){let n=le.lFrame,e=n===null?null:n.child;return e===null?ZC(n):e}function ZC(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function JC(){let n=le.lFrame;return le.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var am=JC;function td(){let n=JC();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function XC(n){return(le.lFrame.contextLView=NC(n,le.lFrame.contextLView))[We]}function wr(){return le.lFrame.selectedIndex}function ri(n){le.lFrame.selectedIndex=n}function nd(){let n=le.lFrame;return rc(n.tView,n.selectedIndex)}function eb(){return le.lFrame.currentNamespace}var tb=!0;function rd(){return tb}function oc(n){tb=n}function _g(n,e=null,t=null,r){let i=cm(n,e,t,r);return i.resolveInjectorInitializers(),i}function cm(n,e=null,t=null,r,i=new Set){let o=[t||qt,IC(n)];return r=r||(typeof n=="object"?void 0:gr(n)),new Ki(o,e||tc(),r||null,i)}var on=class n{static THROW_IF_NOT_FOUND=qi;static NULL=new Wa;static create(e,t){if(Array.isArray(e))return _g({name:""},t,e,"");{let r=e.name??"";return _g({name:r},e.parent,e.providers,r)}}static \u0275prov=ee({token:n,providedIn:"any",factory:()=>ue(Lg)});static __NG_ELEMENT_ID__=-1},lt=new G(""),Hn=(()=>{class n{static __NG_ELEMENT_ID__=eP;static __NG_ENV_ID__=t=>t}return n})(),Ul=class extends Hn{_lView;constructor(e){super(),this._lView=e}get destroyed(){return ro(this._lView)}onDestroy(e){let t=this._lView;return Zg(t,e),()=>PC(t,e)}};function eP(){return new Ul(de())}var nb=!1,rb=new G(""),ii=(()=>{class n{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new vt(!1);debugTaskTracker=V(rb,{optional:!0});get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new ye(t=>{t.next(!1),t.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),this.debugTaskTracker?.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.debugTaskTracker?.remove(t),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=ee({token:n,providedIn:"root",factory:()=>new n})}return n})(),Eg=class extends at{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,TC()&&(this.destroyRef=V(Hn,{optional:!0})??void 0,this.pendingTasks=V(ii,{optional:!0})??void 0)}emit(e){let t=J(null);try{super.next(e)}finally{J(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof yt&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},Je=Eg;function jl(...n){}function um(n){let e,t;function r(){n=jl;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function ib(n){return queueMicrotask(()=>n()),()=>{n=jl}}var lm="isAngularZone",Qa=lm+"_ID",tP=0,Gt=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new Je(!1);onMicrotaskEmpty=new Je(!1);onStable=new Je(!1);onError=new Je(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=nb}=e;if(typeof Zone>"u")throw new $(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,iP(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(lm)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new $(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new $(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,nP,jl,jl);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},nP={};function dm(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function rP(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){um(()=>{n.callbackScheduled=!1,wg(n),n.isCheckStableRunning=!0,dm(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),wg(n)}function iP(n){let e=()=>{rP(n)},t=tP++;n._inner=n._inner.fork({name:"angular",properties:{[lm]:!0,[Qa]:t,[Qa+t]:!0},onInvokeTask:(r,i,o,s,a,u)=>{if(oP(u))return r.invokeTask(o,s,a,u);try{return lC(n),r.invokeTask(o,s,a,u)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),dC(n)}},onInvoke:(r,i,o,s,a,u,l)=>{try{return lC(n),r.invoke(o,s,a,u,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!sP(u)&&e(),dC(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,wg(n),dm(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function wg(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function lC(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function dC(n){n._nesting--,dm(n)}var Ya=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new Je;onMicrotaskEmpty=new Je;onStable=new Je;onError=new Je;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function oP(n){return ob(n,"__ignore_ng_zone__")}function sP(n){return ob(n,"__scheduler_tick__")}function ob(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var mr=class{_console=console;handleError(e){this._console.error("ERROR",e)}},Dn=new G("",{factory:()=>{let n=V(Gt),e=V(ct),t;return r=>{n.runOutsideAngular(()=>{e.destroyed&&!t?setTimeout(()=>{throw r}):(t??=e.get(mr),t.handleError(r))})}}}),sb={provide:Ji,useValue:()=>{let n=V(mr,{optional:!0})},multi:!0},aP=new G("",{factory:()=>{let n=V(lt).defaultView;if(!n)return;let e=V(Dn),t=o=>{e(o.reason),o.preventDefault()},r=o=>{o.error?e(o.error):e(new Error(o.message,{cause:o})),o.preventDefault()},i=()=>{n.addEventListener("unhandledrejection",t),n.addEventListener("error",r)};typeof Zone<"u"?Zone.root.run(i):i(),V(Hn).onDestroy(()=>{n.removeEventListener("error",r),n.removeEventListener("unhandledrejection",t)})}});function fm(){return as([wC(()=>{V(aP)})])}function te(n,e){let[t,r,i]=Gp(n,e?.equal),o=t,s=o[Ft];return o.set=r,o.update=i,o.asReadonly=ab.bind(o),o}function ab(){let n=this[Ft];if(n.readonlyFn===void 0){let e=()=>this();e[Ft]=n,n.readonlyFn=e}return n.readonlyFn}var id=(()=>{class n{view;node;constructor(t,r){this.view=t,this.node=r}static __NG_ELEMENT_ID__=cP}return n})();function cP(){return new id(de(),Ut())}var Qi=class{},sc=new G("",{factory:()=>!0});var hm=new G("");var od=(()=>{class n{static \u0275prov=ee({token:n,providedIn:"root",factory:()=>new Ig})}return n})(),Ig=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let t=e.zone,r=this.queues.get(t);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[t,r]of this.queues)t===null?e||=this.flushQueue(r):e||=t.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let t=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,t=!0,r.run());return t}},Bl=class{[Ft];constructor(e){this[Ft]=e}destroy(){this[Ft].destroy()}};function oi(n,e){let t=e?.injector??V(on),r=e?.manualCleanup!==!0?t.get(Hn):null,i,o=t.get(id,null,{optional:!0}),s=t.get(Qi);return o!==null?(i=dP(o.view,s,n),r instanceof Ul&&r._lView===o.view&&(r=null)):i=fP(n,t.get(od),s),i.injector=t,r!==null&&(i.onDestroyFns=[r.onDestroy(()=>i.destroy())]),new Bl(i)}var cb=ne(L({},Kp),{cleanupFns:void 0,zone:null,onDestroyFns:null,run(){let n=Ka(!1);try{Qp(this)}finally{Ka(n)}},cleanup(){if(!this.cleanupFns?.length)return;let n=J(null);try{for(;this.cleanupFns.length;)this.cleanupFns.pop()()}finally{this.cleanupFns=[],J(n)}}}),uP=ne(L({},cb),{consumerMarkedDirty(){this.scheduler.schedule(this),this.notifier.notify(12)},destroy(){if(ji(this),this.onDestroyFns!==null)for(let n of this.onDestroyFns)n();this.cleanup(),this.scheduler.remove(this)}}),lP=ne(L({},cb),{consumerMarkedDirty(){this.view[ie]|=8192,hs(this.view),this.notifier.notify(13)},destroy(){if(ji(this),this.onDestroyFns!==null)for(let n of this.onDestroyFns)n();this.cleanup(),this.view[Yr]?.delete(this)}});function dP(n,e,t){let r=Object.create(lP);return r.view=n,r.zone=typeof Zone<"u"?Zone.current:null,r.notifier=e,r.fn=ub(r,t),n[Yr]??=new Set,n[Yr].add(r),r.consumerMarkedDirty(r),r}function fP(n,e,t){let r=Object.create(uP);return r.fn=ub(r,n),r.scheduler=e,r.notifier=t,r.zone=typeof Zone<"u"?Zone.current:null,r.scheduler.add(r),r.notifier.notify(12),r}function ub(n,e){return()=>{e(t=>(n.cleanupFns??=[]).push(t))}}function dt(n){return Wp(n)}function yc(n){return{toString:n}.toString()}function wP(n){return typeof n=="function"}function Ub(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}var dd=class{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}},fo=(()=>{let n=()=>jb;return n.ngInherit=!0,n})();function jb(n){return n.type.prototype.ngOnChanges&&(n.setInput=CP),IP}function IP(){let n=Hb(this),e=n?.current;if(e){let t=n.previous;if(t===Xr)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function CP(n,e,t,r,i){let o=this.declaredInputs[r],s=Hb(n)||bP(n,{previous:Xr,current:null}),a=s.current||(s.current={}),u=s.previous,l=u[o];a[o]=new dd(l&&l.currentValue,t,u===Xr),Ub(n,e,i,t)}var Bb="__ngSimpleChanges__";function Hb(n){return n[Bb]||null}function bP(n,e){return n[Bb]=e}var lb=[];var Me=function(n,e=null,t){for(let r=0;r<lb.length;r++){let i=lb[r];i(n,e,t)}},Ee=(function(n){return n[n.TemplateCreateStart=0]="TemplateCreateStart",n[n.TemplateCreateEnd=1]="TemplateCreateEnd",n[n.TemplateUpdateStart=2]="TemplateUpdateStart",n[n.TemplateUpdateEnd=3]="TemplateUpdateEnd",n[n.LifecycleHookStart=4]="LifecycleHookStart",n[n.LifecycleHookEnd=5]="LifecycleHookEnd",n[n.OutputStart=6]="OutputStart",n[n.OutputEnd=7]="OutputEnd",n[n.BootstrapApplicationStart=8]="BootstrapApplicationStart",n[n.BootstrapApplicationEnd=9]="BootstrapApplicationEnd",n[n.BootstrapComponentStart=10]="BootstrapComponentStart",n[n.BootstrapComponentEnd=11]="BootstrapComponentEnd",n[n.ChangeDetectionStart=12]="ChangeDetectionStart",n[n.ChangeDetectionEnd=13]="ChangeDetectionEnd",n[n.ChangeDetectionSyncStart=14]="ChangeDetectionSyncStart",n[n.ChangeDetectionSyncEnd=15]="ChangeDetectionSyncEnd",n[n.AfterRenderHooksStart=16]="AfterRenderHooksStart",n[n.AfterRenderHooksEnd=17]="AfterRenderHooksEnd",n[n.ComponentStart=18]="ComponentStart",n[n.ComponentEnd=19]="ComponentEnd",n[n.DeferBlockStateStart=20]="DeferBlockStateStart",n[n.DeferBlockStateEnd=21]="DeferBlockStateEnd",n[n.DynamicComponentStart=22]="DynamicComponentStart",n[n.DynamicComponentEnd=23]="DynamicComponentEnd",n[n.HostBindingsUpdateStart=24]="HostBindingsUpdateStart",n[n.HostBindingsUpdateEnd=25]="HostBindingsUpdateEnd",n})(Ee||{});function DP(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=jb(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function $b(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:f}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),u&&(n.viewHooks??=[]).push(-t,u),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),f!=null&&(n.destroyHooks??=[]).push(t,f)}}function ad(n,e,t){zb(n,e,3,t)}function cd(n,e,t,r){(n[ie]&3)===t&&zb(n,e,t,r)}function pm(n,e){let t=n[ie];(t&3)===e&&(t&=16383,t+=1,n[ie]=t)}function zb(n,e,t,r){let i=r!==void 0?n[eo]&65535:0,o=r??-1,s=e.length-1,a=0;for(let u=i;u<s;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(n[eo]+=65536),(a<o||o==-1)&&(TP(n,t,e,u),n[eo]=(n[eo]&4294901760)+u+2),u++}function db(n,e){Me(Ee.LifecycleHookStart,n,e);let t=J(null);try{e.call(n)}finally{J(t),Me(Ee.LifecycleHookEnd,n,e)}}function TP(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[ie]>>14<n[eo]>>16&&(n[ie]&3)===e&&(n[ie]+=16384,db(a,o)):db(a,o)}var ms=-1,so=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r,i){this.factory=e,this.name=i,this.canSeeViewProviders=t,this.injectImpl=r}};function SP(n){return(n.flags&8)!==0}function AP(n){return(n.flags&16)!==0}function xP(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];MP(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function RP(n){return n===3||n===4||n===6}function MP(n){return n.charCodeAt(0)===64}function lc(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?fb(n,t,i,null,e[++r]):fb(n,t,i,null,null))}}return n}function fb(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){i!==null&&(n[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),i!==null&&n.splice(o++,0,i)}function qb(n){return n!==ms}function fd(n){return n&32767}function NP(n){return n>>16}function hd(n,e){let t=NP(n),r=e;for(;t>0;)r=r[Xi],t--;return r}var Tm=!0;function pd(n){let e=Tm;return Tm=n,e}var PP=256,Gb=PP-1,Wb=5,OP=0,$n={};function kP(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(Zi)&&(r=t[Zi]),r==null&&(r=t[Zi]=OP++);let i=r&Gb,o=1<<i;e.data[n+(i>>Wb)]|=o}function gd(n,e){let t=Kb(n,e);if(t!==-1)return t;let r=e[Z];r.firstCreatePass&&(n.injectorIndex=e.length,gm(r.data,n),gm(e,null),gm(r.blueprint,null));let i=ey(n,e),o=n.injectorIndex;if(qb(i)){let s=fd(i),a=hd(i,e),u=a[Z].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|u[s+l]}return e[o+8]=i,o}function gm(n,e){n.push(0,0,0,0,0,0,0,0,e)}function Kb(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function ey(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=Xb(i),r===null)return ms;if(t++,i=i[Xi],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return ms}function Sm(n,e,t){kP(n,e,t)}function Qb(n,e,t){if(t&8||n!==void 0)return n;zl(e,"NodeInjector")}function Yb(n,e,t,r){if(t&8&&r===void 0&&(r=null),(t&3)===0){let i=n[vr],o=Vt(void 0);try{return i?i.get(e,r,t&8):kg(e,r,t&8)}finally{Vt(o)}}return Qb(r,e,t)}function Zb(n,e,t,r=0,i){if(n!==null){if(e[ie]&2048&&!(r&2)){let s=UP(n,e,t,r,$n);if(s!==$n)return s}let o=Jb(n,e,t,r,$n);if(o!==$n)return o}return Yb(e,t,r,i)}function Jb(n,e,t,r,i){let o=LP(t);if(typeof o=="function"){if(!sm(e,n,r))return r&1?Qb(i,t,r):Yb(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&8))zl(t);else return s}finally{am()}}else if(typeof o=="number"){let s=null,a=Kb(n,e),u=ms,l=r&1?e[Wt][cn]:null;for((a===-1||r&4)&&(u=a===-1?ey(n,e):e[a+8],u===ms||!pb(r,!1)?a=-1:(s=e[Z],a=fd(u),e=hd(u,e)));a!==-1;){let f=e[Z];if(hb(o,a,f.data)){let p=FP(a,e,t,s,r,l);if(p!==$n)return p}u=e[a+8],u!==ms&&pb(r,e[Z].data[a+8]===l)&&hb(o,a,e)?(s=f,a=fd(u),e=hd(u,e)):a=-1}}return i}function FP(n,e,t,r,i,o){let s=e[Z],a=s.data[n+8],u=r==null?ni(a)&&Tm:r!=s&&(a.type&3)!==0,l=i&1&&o===a,f=ud(a,s,t,u,l);return f!==null?dc(e,s,f,a,i):$n}function ud(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,u=n.directiveStart,l=n.directiveEnd,f=o>>20,p=r?a:a+f,g=i?a+f:l;for(let y=p;y<g;y++){let T=s[y];if(y<u&&t===T||y>=u&&T.type===t)return y}if(i){let y=s[u];if(y&&jn(y)&&y.type===t)return u}return null}function dc(n,e,t,r,i){let o=n[t],s=e.data;if(o instanceof so){let a=o;if(a.resolving)throw Og("");let u=pd(a.canSeeViewProviders);a.resolving=!0;let l=s[t].type||s[t],f,p=a.injectImpl?Vt(a.injectImpl):null,g=sm(n,r,0);try{o=n[t]=a.factory(void 0,i,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&DP(t,s[t],e)}finally{p!==null&&Vt(p),pd(u),a.resolving=!1,am()}}return o}function LP(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(Zi)?n[Zi]:void 0;return typeof e=="number"?e>=0?e&Gb:VP:e}function hb(n,e,t){let r=1<<n;return!!(t[e+(n>>Wb)]&r)}function pb(n,e){return!(n&2)&&!(n&1&&e)}var oo=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return Zb(this._tNode,this._lView,e,Gi(r),t)}};function VP(){return new oo(Ut(),de())}function qn(n){return yc(()=>{let e=n.prototype.constructor,t=e[Ga]||Am(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[Ga]||Am(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Am(n){return Dg(n)?()=>{let e=Am(Et(n));return e&&e()}:Qr(n)}function UP(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[ie]&2048&&!fs(s);){let a=Jb(o,s,t,r|2,$n);if(a!==$n)return a;let u=o.parent;if(!u){let l=s[$g];if(l){let f=l.get(t,$n,r);if(f!==$n)return f}u=Xb(s),s=s[Xi]}o=u}return i}function Xb(n){let e=n[Z],t=e.type;return t===2?e.declTNode:t===1?n[cn]:null}function jP(){return Es(Ut(),de())}function Es(n,e){return new Gn(bn(n,e))}var Gn=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=jP}return n})();function BP(n){return n instanceof Gn?n.nativeElement:n}function HP(){return this._results[Symbol.iterator]()}var md=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new at}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let r=vC(e);(this._changesDetected=!yC(this._results,r,t))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=HP};function eD(n){return(n.flags&128)===128}var ty=(function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n})(ty||{}),tD=new Map,$P=0;function zP(){return $P++}function qP(n){tD.set(n[Er],n)}function xm(n){tD.delete(n[Er])}var gb="__ngContext__";function ys(n,e){Un(e)?(n[gb]=e[Er],qP(e)):n[gb]=e}function nD(n){return iD(n[ls])}function rD(n){return iD(n[an])}function iD(n){for(;n!==null&&!Cn(n);)n=n[an];return n}var GP;function ny(n){GP=n}var Sd=new G("",{factory:()=>WP}),WP="ng";var Ad=new G(""),vc=new G("",{providedIn:"platform",factory:()=>"unknown"});var xd=new G("",{factory:()=>V(lt).body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var oD="r";var sD="di";var aD=!1,cD=new G("",{factory:()=>aD});var KP=(n,e,t,r)=>{};function QP(n,e,t,r){KP(n,e,t,r)}function ry(n){return(n.flags&32)===32}var YP=()=>null;function uD(n,e,t=!1){return YP(n,e,t)}function lD(n,e){let t=n.contentQueries;if(t!==null){let r=J(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];Xl(o),a.contentQueries(2,e[s],s)}}}finally{J(r)}}}function Rm(n,e,t){Xl(0);let r=J(null);try{e(n,t)}finally{J(r)}}function iy(n,e,t){if(qg(e)){let r=J(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let u=t[s];a.contentQueries(1,u,s)}}}finally{J(r)}}}var Sn=(function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n[n.ExperimentalIsolatedShadowDom=4]="ExperimentalIsolatedShadowDom",n})(Sn||{});var Mm=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Cg})`}};function dD(n){return n instanceof Mm?n.changingThisBreaksApplicationSecurity:n}var ZP=/^>|^->|<!--|-->|--!>|<!-$/g,JP=/(<|>)/g,XP="\u200B$1\u200B";function eO(n){return n.replace(ZP,e=>e.replace(JP,XP))}function tO(n,e){return n.createText(e)}function nO(n,e,t){n.setValue(e,t)}function rO(n,e){return n.createComment(eO(e))}function fD(n,e,t){return n.createElement(e,t)}function yd(n,e,t,r,i){n.insertBefore(e,t,r,i)}function hD(n,e,t){n.appendChild(e,t)}function mb(n,e,t,r,i){r!==null?yd(n,e,t,r,i):hD(n,e,t)}function pD(n,e,t,r){n.removeChild(null,e,t,r)}function iO(n,e,t){n.setAttribute(e,"style",t)}function oO(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function gD(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&xP(n,e,r),i!==null&&oO(n,e,i),o!==null&&iO(n,e,o)}function mD(n){return n instanceof Function?n():n}function sO(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}var yD="ng-template";function aO(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&sO(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(oy(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function oy(n){return n.type===4&&n.value!==yD}function cO(n,e,t){let r=n.type===4&&!t?yD:n.value;return e===r}function uO(n,e,t){let r=4,i=n.attrs,o=i!==null?fO(i):0,s=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!s&&!Tn(r)&&!Tn(u))return!1;if(s&&Tn(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!cO(n,u,t)||u===""&&e.length===1){if(Tn(r))return!1;s=!0}}else if(r&8){if(i===null||!aO(n,i,u,t)){if(Tn(r))return!1;s=!0}}else{let l=e[++a],f=lO(u,i,oy(n),t);if(f===-1){if(Tn(r))return!1;s=!0;continue}if(l!==""){let p;if(f>o?p="":p=i[f+1].toLowerCase(),r&2&&l!==p){if(Tn(r))return!1;s=!0}}}}return Tn(r)||s}function Tn(n){return(n&1)===0}function lO(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return hO(e,n)}function dO(n,e,t=!1){for(let r=0;r<e.length;r++)if(uO(n,e[r],t))return!0;return!1}function fO(n){for(let e=0;e<n.length;e++){let t=n[e];if(RP(t))return e}return n.length}function hO(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function yb(n,e){return n?":not("+e.trim()+")":e}function pO(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!Tn(s)&&(e+=yb(o,i),i=""),r=s,o=o||!Tn(r);t++}return i!==""&&(e+=yb(o,i)),e}function gO(n){return n.map(pO).join(",")}function mO(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!Tn(i))break;i=o}r++}return t.length&&e.push(1,...t),e}var dn={};function sy(n,e,t,r,i,o,s,a,u,l,f){let p=Ke+r,g=p+i,y=yO(p,g),T=typeof l=="function"?l():l;return y[Z]={type:n,blueprint:y,template:t,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:g,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:T,incompleteFirstPass:!1,ssrId:f}}function yO(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:dn);return t}function vO(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=sy(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function ay(n,e,t,r,i,o,s,a,u,l,f){let p=e.blueprint.slice();return p[In]=i,p[ie]=r|4|128|8|64|1024,(l!==null||n&&n[ie]&2048)&&(p[ie]|=2048),Qg(p),p[ut]=p[Xi]=n,p[We]=t,p[_r]=s||n&&n[_r],p[Ue]=a||n&&n[Ue],p[vr]=u||n&&n[vr]||null,p[cn]=o,p[Er]=zP(),p[cs]=f,p[$g]=l,p[Wt]=e.type==2?n[Wt]:p,p}function _O(n,e,t){let r=bn(e,n),i=vO(t),o=n[_r].rendererFactory,s=cy(n,ay(n,i,null,vD(t),r,e,null,o.createRenderer(r,t),null,null,null));return n[e.index]=s}function vD(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function _D(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function cy(n,e){return n[ls]?n[Hg][an]=e:n[ls]=e,n[Hg]=e,e}function M(n=1){ED(Xe(),de(),wr()+n,!1)}function ED(n,e,t,r){if(!r)if((e[ie]&3)===3){let o=n.preOrderCheckHooks;o!==null&&ad(e,o,t)}else{let o=n.preOrderHooks;o!==null&&cd(e,o,0,t)}ri(t)}var Rd=(function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n})(Rd||{});function Nm(n,e,t,r){let i=J(null);try{let[o,s,a]=n.inputs[t],u=null;(s&Rd.SignalBased)!==0&&(u=e[o][Ft]),u!==null&&u.transformFn!==void 0?r=u.transformFn(r):a!==null&&(r=a.call(e,r)),n.setInput!==null?n.setInput(e,u,r,t,o):Ub(e,u,o,r)}finally{J(i)}}var zn=(function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n})(zn||{}),EO;function uy(n,e){return EO(n,e)}var ao=new Set,ly=(function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n})(ly||{}),_c=new G(""),vb=new Set;function ho(n){vb.has(n)||(vb.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var wD=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=ee({token:n,providedIn:"root",factory:()=>new n})}return n})();var ID=new G("",{factory:()=>({queue:new Set,isScheduled:!1,scheduler:null,injector:V(ct)})});function CD(n,e,t){let r=n.get(ID);if(Array.isArray(e))for(let i of e)r.queue.add(i),t?.detachedLeaveAnimationFns?.push(i);else r.queue.add(e),t?.detachedLeaveAnimationFns?.push(e);r.scheduler&&r.scheduler(n)}function wO(n,e){let t=n.get(ID);if(e.detachedLeaveAnimationFns){for(let r of e.detachedLeaveAnimationFns)t.queue.delete(r);e.detachedLeaveAnimationFns=void 0}}function IO(n,e){for(let[t,r]of e)CD(n,r.animateFns)}function _b(n,e,t,r){let i=n?.[to]?.enter;e!==null&&i&&i.has(t.index)&&IO(r,i)}function gs(n,e,t,r,i,o,s,a){if(i!=null){let u,l=!1;Cn(i)?u=i:Un(i)&&(l=!0,i=i[In]);let f=un(i);n===0&&r!==null?(_b(a,r,o,t),s==null?hD(e,r,f):yd(e,r,f,s||null,!0)):n===1&&r!==null?(_b(a,r,o,t),yd(e,r,f,s||null,!0)):n===2?Eb(a,o,t,p=>{pD(e,f,l,p)}):n===3&&Eb(a,o,t,()=>{e.destroyNode(f)}),u!=null&&kO(e,n,t,u,o,r,s)}}function CO(n,e){bD(n,e),e[In]=null,e[cn]=null}function bO(n,e,t,r,i,o){r[In]=i,r[cn]=e,Nd(n,r,t,1,i,o)}function bD(n,e){e[_r].changeDetectionScheduler?.notify(9),Nd(n,e,e[Ue],2,null,null)}function DO(n){let e=n[ls];if(!e)return mm(n[Z],n);for(;e;){let t=null;if(Un(e))t=e[ls];else{let r=e[ze];r&&(t=r)}if(!t){for(;e&&!e[an]&&e!==n;)Un(e)&&mm(e[Z],e),e=e[ut];e===null&&(e=n),Un(e)&&mm(e[Z],e),t=e&&e[an]}e=t}}function dy(n,e){let t=n[no],r=t.indexOf(e);t.splice(r,1)}function Md(n,e){if(ro(e))return;let t=e[Ue];t.destroyNode&&Nd(n,e,t,3,null,null),DO(e)}function mm(n,e){if(ro(e))return;let t=J(null);try{e[ie]&=-129,e[ie]|=256,e[Kt]&&ji(e[Kt]),AO(n,e),SO(n,e),e[Z].type===1&&e[Ue].destroy();let r=e[ei];if(r!==null&&Cn(e[ut])){r!==e[ut]&&dy(r,e);let i=e[Vn];i!==null&&i.detachView(n)}xm(e)}finally{J(t)}}function Eb(n,e,t,r){let i=n?.[to];if(i==null||i.leave==null||!i.leave.has(e.index))return r(!1);n&&ao.add(n[Er]),CD(t,()=>{if(i.leave&&i.leave.has(e.index)){let s=i.leave.get(e.index),a=[];if(s){for(let u=0;u<s.animateFns.length;u++){let l=s.animateFns[u],{promise:f}=l();a.push(f)}i.detachedLeaveAnimationFns=void 0}i.running=Promise.allSettled(a),TO(n,r)}else n&&ao.delete(n[Er]),r(!1)},i)}function TO(n,e){let t=n[to]?.running;if(t){t.then(()=>{n[to].running=void 0,ao.delete(n[Er]),e(!0)});return}e(!1)}function SO(n,e){let t=n.cleanup,r=e[us];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let a=t[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[t[s+1]];t[s].call(a)}r!==null&&(e[us]=null);let i=e[pr];if(i!==null){e[pr]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=e[Yr];if(o!==null){e[Yr]=null;for(let s of o)s.destroy()}}function AO(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof so)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],u=o[s+1];Me(Ee.LifecycleHookStart,a,u);try{u.call(a)}finally{Me(Ee.LifecycleHookEnd,a,u)}}else{Me(Ee.LifecycleHookStart,i,o);try{o.call(i)}finally{Me(Ee.LifecycleHookEnd,i,o)}}}}}function xO(n,e,t){return RO(n,e.parent,t)}function RO(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[In];if(ni(r)){let{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===Sn.None||i===Sn.Emulated)return null}return bn(r,t)}function MO(n,e,t){return PO(n,e,t)}function NO(n,e,t){return n.type&40?bn(n,t):null}var PO=NO,wb;function fy(n,e,t,r){let i=xO(n,r,e),o=e[Ue],s=r.parent||e[cn],a=MO(s,r,e);if(i!=null)if(Array.isArray(t))for(let u=0;u<t.length;u++)mb(o,i,t[u],a,!1);else mb(o,i,t,a,!1);wb!==void 0&&wb(o,r,e,t,i)}function cc(n,e){if(e!==null){let t=e.type;if(t&3)return bn(e,n);if(t&4)return Pm(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return cc(n,r);{let i=n[e.index];return Cn(i)?Pm(-1,i):un(i)}}else{if(t&128)return cc(n,e.next);if(t&32)return uy(e,n)()||un(n[e.index]);{let r=DD(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Zr(n[Wt]);return cc(i,r)}else return cc(n,e.next)}}}return null}function DD(n,e){if(e!==null){let r=n[Wt][cn],i=e.projection;return r.projection[i]}return null}function Pm(n,e){let t=ze+n+1;if(t<e.length){let r=e[t],i=r[Z].firstChild;if(i!==null)return cc(r,i)}return e[ti]}function hy(n,e,t,r,i,o,s){for(;t!=null;){let a=r[vr];if(t.type===128){t=t.next;continue}let u=r[t.index],l=t.type;if(s&&e===0&&(u&&ys(un(u),r),t.flags|=2),!ry(t))if(l&8)hy(n,e,t.child,r,i,o,!1),gs(e,n,a,i,u,t,o,r);else if(l&32){let f=uy(t,r),p;for(;p=f();)gs(e,n,a,i,p,t,o,r);gs(e,n,a,i,u,t,o,r)}else l&16?OO(n,e,r,t,i,o):gs(e,n,a,i,u,t,o,r);t=s?t.projectionNext:t.next}}function Nd(n,e,t,r,i,o){hy(t,r,n.firstChild,e,i,o,!1)}function OO(n,e,t,r,i,o){let s=t[Wt],u=s[cn].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let f=u[l];gs(e,n,t[vr],i,f,r,o,t)}else{let l=u,f=s[ut];eD(r)&&(l.flags|=128),hy(n,e,l,f,i,o,!0)}}function kO(n,e,t,r,i,o,s){let a=r[ti],u=un(r);a!==u&&gs(e,n,t,o,a,i,s);for(let l=ze;l<r.length;l++){let f=r[l];Nd(f[Z],f,n,e,o,a)}}function FO(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:zn.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=zn.Important),n.setStyle(t,r,i,o))}}function TD(n,e,t,r,i){let o=wr(),s=r&2;try{ri(-1),s&&e.length>Ke&&ED(n,e,Ke,!1);let a=s?Ee.TemplateUpdateStart:Ee.TemplateCreateStart;Me(a,i,t),t(r,i)}finally{ri(o);let a=s?Ee.TemplateUpdateEnd:Ee.TemplateCreateEnd;Me(a,i,t)}}function Pd(n,e,t){$O(n,e,t),(t.flags&64)===64&&zO(n,e,t)}function Od(n,e,t=bn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function LO(n,e,t,r){let o=r.get(cD,aD)||t===Sn.ShadowDom||t===Sn.ExperimentalIsolatedShadowDom,s=n.selectRootElement(e,o);return VO(s),s}function VO(n){UO(n)}var UO=()=>null;function jO(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function SD(n,e,t,r,i,o){let s=e[Z];if(gy(n,s,e,t,r)){ni(n)&&HO(e,n.index);return}n.type&3&&(t=jO(t)),BO(n,e,t,r,i,o)}function BO(n,e,t,r,i,o){if(n.type&3){let s=bn(n,e);r=o!=null?o(r,n.value||"",t):r,i.setProperty(s,t,r)}else n.type&12}function HO(n,e){let t=ln(e,n);t[ie]&16||(t[ie]|=64)}function $O(n,e,t){let r=t.directiveStart,i=t.directiveEnd;ni(t)&&_O(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||gd(t,e);let o=t.initialInputs;for(let s=r;s<i;s++){let a=n.data[s],u=dc(e,n,s,t);if(ys(u,e),o!==null&&KO(e,s-r,u,a,t,o),jn(a)){let l=ln(t.index,e);l[We]=dc(e,n,s,t)}}}function zO(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=KC();try{ri(o);for(let a=r;a<i;a++){let u=n.data[a],l=e[a];Jl(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&qO(u,l)}}finally{ri(-1),Jl(s)}}function qO(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function py(n,e){let t=n.directiveRegistry,r=null;if(t)for(let i=0;i<t.length;i++){let o=t[i];dO(e,o.selectors,!1)&&(r??=[],jn(o)?r.unshift(o):r.push(o))}return r}function GO(n,e,t,r,i,o){let s=bn(n,e);WO(e[Ue],s,o,n.value,t,r,i)}function WO(n,e,t,r,i,o,s){if(o==null)n.removeAttribute(e,i,t);else{let a=s==null?Ja(o):s(o,r||"",i);n.setAttribute(e,i,a,t)}}function KO(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;a+=2){let u=s[a],l=s[a+1];Nm(r,t,u,l)}}function AD(n,e,t,r,i){let o=Ke+t,s=e[Z],a=i(s,e,n,r,t);e[o]=a,ps(n,!0);let u=n.type===2;return u?(gD(e[Ue],a,n),(kC()===0||ds(n))&&ys(a,e),FC()):ys(a,e),rd()&&(!u||!ry(n))&&fy(s,e,a,n),n}function xD(n){let e=n;return tm()?HC():(e=e.parent,ps(e,!1)),e}function QO(n,e){let t=n[vr];if(!t)return;let r;try{r=t.get(Dn,null)}catch{r=null}r?.(e)}function gy(n,e,t,r,i){let o=n.inputs?.[r],s=n.hostDirectiveInputs?.[r],a=!1;if(s)for(let u=0;u<s.length;u+=2){let l=s[u],f=s[u+1],p=e.data[l];Nm(p,t[l],f,i),a=!0}if(o)for(let u of o){let l=t[u],f=e.data[u];Nm(f,l,r,i),a=!0}return a}function YO(n,e){let t=ln(e,n),r=t[Z];ZO(r,t);let i=t[In];i!==null&&t[cs]===null&&(t[cs]=uD(i,t[vr])),Me(Ee.ComponentStart);try{my(r,t,t[We])}finally{Me(Ee.ComponentEnd,t[We])}}function ZO(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function my(n,e,t){ed(e);try{let r=n.viewQuery;r!==null&&Rm(1,r,t);let i=n.template;i!==null&&TD(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[Vn]?.finishViewCreation(n),n.staticContentQueries&&lD(n,e),n.staticViewQueries&&Rm(2,n.viewQuery,t);let o=n.components;o!==null&&JO(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[ie]&=-5,td()}}function JO(n,e){for(let t=0;t<e.length;t++)YO(n,e[t])}function kd(n,e,t,r){let i=J(null);try{let o=e.tView,a=n[ie]&4096?4096:16,u=ay(n,o,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];u[ei]=l;let f=n[Vn];return f!==null&&(u[Vn]=f.createEmbeddedView(o)),my(o,u,t),u}finally{J(i)}}function fc(n,e){return!e||e.firstChild===null||eD(n)}function hc(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(un(o)),Cn(o)&&RD(o,r);let s=t.type;if(s&8)hc(n,e,t.child,r);else if(s&32){let a=uy(t,e),u;for(;u=a();)r.push(u)}else if(s&16){let a=DD(e,t);if(Array.isArray(a))r.push(...a);else{let u=Zr(e[Wt]);hc(u[Z],u,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function RD(n,e){for(let t=ze;t<n.length;t++){let r=n[t],i=r[Z].firstChild;i!==null&&hc(r[Z],r,i,e)}n[ti]!==n[In]&&e.push(n[ti])}function MD(n){if(n[Kl]!==null){for(let e of n[Kl])e.impl.addSequence(e);n[Kl].length=0}}var ND=[];function XO(n){return n[Kt]??ek(n)}function ek(n){let e=ND.pop()??Object.create(nk);return e.lView=n,e}function tk(n){n.lView[Kt]!==n&&(n.lView=null,ND.push(n))}var nk=ne(L({},Ko),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{hs(n.lView)},consumerOnSignalRead(){this.lView[Kt]=this}});function rk(n){let e=n[Kt]??Object.create(ik);return e.lView=n,e}var ik=ne(L({},Ko),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=Zr(n.lView);for(;e&&!PD(e[Z]);)e=Zr(e);e&&Yg(e)},consumerOnSignalRead(){this.lView[Kt]=this}});function PD(n){return n.type!==2}function OD(n){if(n[Yr]===null)return;let e=!0;for(;e;){let t=!1;for(let r of n[Yr])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(n[ie]&8192)}}var ok=100;function kD(n,e=0){let r=n[_r].rendererFactory,i=!1;i||r.begin?.();try{sk(n,e)}finally{i||r.end?.()}}function sk(n,e){let t=nm();try{Ka(!0),Om(n,e);let r=0;for(;ic(n);){if(r===ok)throw new $(103,!1);r++,Om(n,1)}}finally{Ka(t)}}function ak(n,e,t,r){if(ro(e))return;let i=e[ie],o=!1,s=!1;ed(e);let a=!0,u=null,l=null;o||(PD(n)?(l=XO(e),u=Qo(l)):cl()===null?(a=!1,l=rk(e),u=Qo(l)):e[Kt]&&(ji(e[Kt]),e[Kt]=null));try{Qg(e),qC(n.bindingStartIndex),t!==null&&TD(n,e,t,2,r);let f=(i&3)===3;if(!o)if(f){let y=n.preOrderCheckHooks;y!==null&&ad(e,y,null)}else{let y=n.preOrderHooks;y!==null&&cd(e,y,0,null),pm(e,0)}if(s||ck(e),OD(e),FD(e,0),n.contentQueries!==null&&lD(n,e),!o)if(f){let y=n.contentCheckHooks;y!==null&&ad(e,y)}else{let y=n.contentHooks;y!==null&&cd(e,y,1),pm(e,1)}lk(n,e);let p=n.components;p!==null&&VD(e,p,0);let g=n.viewQuery;if(g!==null&&Rm(2,g,r),!o)if(f){let y=n.viewCheckHooks;y!==null&&ad(e,y)}else{let y=n.viewHooks;y!==null&&cd(e,y,2),pm(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[Wl]){for(let y of e[Wl])y();e[Wl]=null}o||(MD(e),e[ie]&=-73)}catch(f){throw o||hs(e),f}finally{l!==null&&(La(l,u),a&&tk(l)),td()}}function FD(n,e){for(let t=nD(n);t!==null;t=rD(t))for(let r=ze;r<t.length;r++){let i=t[r];LD(i,e)}}function ck(n){for(let e=nD(n);e!==null;e=rD(e)){if(!(e[ie]&2))continue;let t=e[no];for(let r=0;r<t.length;r++){let i=t[r];Yg(i)}}}function uk(n,e,t){Me(Ee.ComponentStart);let r=ln(e,n);try{LD(r,t)}finally{Me(Ee.ComponentEnd,r[We])}}function LD(n,e){Ql(n)&&Om(n,e)}function Om(n,e){let r=n[Z],i=n[ie],o=n[Kt],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&Va(o)),s||=!1,o&&(o.dirty=!1),n[ie]&=-9217,s)ak(r,n,r.template,n[We]);else if(i&8192){let a=J(null);try{OD(n),FD(n,1);let u=r.components;u!==null&&VD(n,u,1),MD(n)}finally{J(a)}}}function VD(n,e,t){for(let r=0;r<e.length;r++)uk(n,e[r],t)}function lk(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)ri(~i);else{let o=i,s=t[++r],a=t[++r];WC(s,o);let u=e[o];Me(Ee.HostBindingsUpdateStart,u);try{a(2,u)}finally{Me(Ee.HostBindingsUpdateEnd,u)}}}}finally{ri(-1)}}function yy(n,e){let t=nm()?64:1088;for(n[_r].changeDetectionScheduler?.notify(e);n;){n[ie]|=t;let r=Zr(n);if(fs(n)&&!r)return n;n=r}return null}function UD(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function jD(n,e){let t=ze+e;if(t<n.length)return n[t]}function Fd(n,e,t,r=!0){let i=e[Z];if(dk(i,e,n,t),r){let s=Pm(t,n),a=e[Ue],u=a.parentNode(n[ti]);u!==null&&bO(i,n[cn],a,e,u,s)}let o=e[cs];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function BD(n,e){let t=pc(n,e);return t!==void 0&&Md(t[Z],t),t}function pc(n,e){if(n.length<=ze)return;let t=ze+e,r=n[t];if(r){let i=r[ei];i!==null&&i!==n&&dy(i,r),e>0&&(n[t-1][an]=r[an]);let o=Xa(n,ze+e);CO(r[Z],r);let s=o[Vn];s!==null&&s.detachView(o[Z]),r[ut]=null,r[an]=null,r[ie]&=-129}return r}function dk(n,e,t,r){let i=ze+r,o=t.length;r>0&&(t[i-1][an]=e),r<o-ze?(e[an]=t[i],Fg(t,ze+r,e)):(t.push(e),e[an]=null),e[ut]=t;let s=e[ei];s!==null&&t!==s&&HD(s,e);let a=e[Vn];a!==null&&a.insertView(n),Yl(e),e[ie]|=128}function HD(n,e){let t=n[no],r=e[ut];if(Un(r))n[ie]|=2;else{let i=r[ut][Wt];e[Wt]!==i&&(n[ie]|=2)}t===null?n[no]=[e]:t.push(e)}var si=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,t=e[Z];return hc(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t}get context(){return this._lView[We]}set context(e){this._lView[We]=e}get destroyed(){return ro(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[ut];if(Cn(e)){let t=e[nc],r=t?t.indexOf(this):-1;r>-1&&(pc(e,r),Xa(t,r))}this._attachedToViewContainer=!1}Md(this._lView[Z],this._lView)}onDestroy(e){Zg(this._lView,e)}markForCheck(){yy(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[ie]&=-129}reattach(){Yl(this._lView),this._lView[ie]|=128}detectChanges(){this._lView[ie]|=1024,kD(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new $(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=fs(this._lView),t=this._lView[ei];t!==null&&!e&&dy(t,this._lView),bD(this._lView[Z],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new $(902,!1);this._appRef=e;let t=fs(this._lView),r=this._lView[ei];r!==null&&!t&&HD(r,this._lView),Yl(this._lView)}};var ai=(()=>{class n{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=fk;constructor(t,r,i){this._declarationLView=t,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,r){return this.createEmbeddedViewImpl(t,r)}createEmbeddedViewImpl(t,r,i){let o=kd(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:r,dehydratedView:i});return new si(o)}}return n})();function fk(){return vy(Ut(),de())}function vy(n,e){return n.type&4?new ai(e,n,Es(n,e)):null}function Ld(n,e,t,r,i){let o=n.data[e];if(o===null)o=hk(n,e,t,r,i),GC()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=BC();o.injectorIndex=s===null?-1:s.injectorIndex}return ps(o,!0),o}function hk(n,e,t,r,i){let o=em(),s=tm(),a=s?o:o&&o.parent,u=n.data[e]=gk(n,a,t,e,r,i);return pk(n,u,o,s),u}function pk(n,e,t,r){n.firstChild===null&&(n.firstChild=e),t!==null&&(r?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function gk(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return VC()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,fieldIndex:-1,customControlIndex:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function mk(n){let e=n[zg]??[],r=n[ut][Ue],i=[];for(let o of e)o.data[sD]!==void 0?i.push(o):yk(o,r);n[zg]=i}function yk(n,e){let t=0,r=n.firstChild;if(r){let i=n.data[oD];for(;t<i;){let o=r.nextSibling;pD(e,r,!1),r=o,t++}}}var vk=()=>null,_k=()=>null;function km(n,e){return vk(n,e)}function $D(n,e,t){return _k(n,e,t)}var zD=class{},Vd=class{},Fm=class{resolveComponentFactory(e){throw new $(917,!1)}},Ec=class{static NULL=new Fm},co=class{},ws=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>Ek()}return n})();function Ek(){let n=de(),e=Ut(),t=ln(e.index,n);return(Un(t)?t:n)[Ue]}var qD=(()=>{class n{static \u0275prov=ee({token:n,providedIn:"root",factory:()=>null})}return n})();var ld={},Lm=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){let i=this.injector.get(e,ld,r);return i!==ld||t===ld?i:this.parentInjector.get(e,t,r)}};function Ib(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=bg(i,a);else if(o==2){let u=a,l=e[++s];r=bg(r,u+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function ve(n,e=0){let t=de();if(t===null)return ue(n,e);let r=Ut();return Zb(r,t,Et(n),e)}function GD(n,e,t,r,i){let o=r===null?null:{"":-1},s=i(n,t);if(s!==null){let a=s,u=null,l=null;for(let f of s)if(f.resolveHostDirectives!==null){[a,u,l]=f.resolveHostDirectives(s);break}Ck(n,e,t,a,o,u,l)}o!==null&&r!==null&&wk(t,r,o)}function wk(n,e,t){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new $(-301,!1);r.push(e[i],o)}}function Ik(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function Ck(n,e,t,r,i,o,s){let a=r.length,u=null;for(let g=0;g<a;g++){let y=r[g];u===null&&jn(y)&&(u=y,Ik(n,t,g)),Sm(gd(t,e),n,y.type)}xk(t,n.data.length,a),u?.viewProvidersResolver&&u.viewProvidersResolver(u);for(let g=0;g<a;g++){let y=r[g];y.providersResolver&&y.providersResolver(y)}let l=!1,f=!1,p=_D(n,e,a,null);a>0&&(t.directiveToIndex=new Map);for(let g=0;g<a;g++){let y=r[g];if(t.mergedAttrs=lc(t.mergedAttrs,y.hostAttrs),Dk(n,t,e,p,y),Ak(p,y,i),s!==null&&s.has(y)){let[P,N]=s.get(y);t.directiveToIndex.set(y.type,[p,P+t.directiveStart,N+t.directiveStart])}else(o===null||!o.has(y))&&t.directiveToIndex.set(y.type,p);y.contentQueries!==null&&(t.flags|=4),(y.hostBindings!==null||y.hostAttrs!==null||y.hostVars!==0)&&(t.flags|=64);let T=y.type.prototype;!l&&(T.ngOnChanges||T.ngOnInit||T.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),l=!0),!f&&(T.ngOnChanges||T.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),f=!0),p++}bk(n,t,o)}function bk(n,e,t){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=n.data[r];if(t===null||!t.has(i))Cb(0,e,i,r),Cb(1,e,i,r),Db(e,r,!1);else{let o=t.get(i);bb(0,e,o,r),bb(1,e,o,r),Db(e,r,!0)}}}function Cb(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;n===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),WD(e,o)}}function bb(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],a;n===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),WD(e,s)}}function WD(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function Db(n,e,t){let{attrs:r,inputs:i,hostDirectiveInputs:o}=n;if(r===null||!t&&i===null||t&&o===null||oy(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let u=r[a];if(u===0){a+=4;continue}else if(u===5){a+=2;continue}else if(typeof u=="number")break;if(!t&&i.hasOwnProperty(u)){let l=i[u];for(let f of l)if(f===e){s??=[],s.push(u,r[a+1]);break}}else if(t&&o.hasOwnProperty(u)){let l=o[u];for(let f=0;f<l.length;f+=2)if(l[f]===e){s??=[],s.push(l[f+1],r[a+1]);break}}a+=2}n.initialInputs??=[],n.initialInputs.push(s)}function Dk(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=Qr(i.type,!0)),s=new so(o,jn(i),ve,null);n.blueprint[r]=s,t[r]=s,Tk(n,e,r,_D(n,t,i.hostVars,dn),i)}function Tk(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;Sk(s)!=a&&s.push(a),s.push(t,r,o)}}function Sk(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function Ak(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;jn(e)&&(t[""]=n)}}function xk(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function _y(n,e,t,r,i,o,s,a){let u=e[Z],l=u.consts,f=Bn(l,s),p=Ld(u,n,t,r,f);return o&&GD(u,e,p,Bn(l,a),i),p.mergedAttrs=lc(p.mergedAttrs,p.attrs),p.attrs!==null&&Ib(p,p.attrs,!1),p.mergedAttrs!==null&&Ib(p,p.mergedAttrs,!0),u.queries!==null&&u.queries.elementStart(u,p),p}function Ey(n,e){$b(n,e),qg(e)&&n.queries.elementEnd(e)}function Rk(n,e,t){return n[e]=t}function Ir(n,e,t){if(t===dn)return!1;let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function KD(n,e,t,r){let i=Ir(n,e,t);return Ir(n,e+1,r)||i}function ym(n,e,t){return function r(i){let o=ni(n)?ln(n.index,e):e;yy(o,5);let s=e[We],a=Tb(e,s,t,i),u=r.__ngNextListenerFn__;for(;u;)a=Tb(e,s,u,i)&&a,u=u.__ngNextListenerFn__;return a}}function Tb(n,e,t,r){let i=J(null);try{return Me(Ee.OutputStart,e,t),t(r)!==!1}catch(o){return QO(n,o),!1}finally{Me(Ee.OutputEnd,e,t),J(i)}}function Mk(n,e,t,r,i,o,s,a){let u=ds(n),l=!1,f=null;if(!r&&u&&(f=Pk(e,t,o,n.index)),f!==null){let p=f.__ngLastListenerFn__||f;p.__ngNextListenerFn__=s,f.__ngLastListenerFn__=s,l=!0}else{let p=bn(n,t),g=r?r(p):p;QP(t,g,o,a);let y=i.listen(g,o,a);if(!Nk(o)){let T=r?P=>r(un(P[n.index])):n.index;QD(T,e,t,o,a,y,!1)}}return l}function Nk(n){return n.startsWith("animation")||n.startsWith("transition")}function Pk(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let a=e[us],u=i[o+2];return a&&a.length>u?a[u]:null}typeof s=="string"&&(o+=2)}return null}function QD(n,e,t,r,i,o,s){let a=e.firstCreatePass?Xg(e):null,u=Jg(t),l=u.length;u.push(i,o),a&&a.push(r,n,l,(l+1)*(s?-1:1))}function Sb(n,e,t,r,i,o){let s=e[t],a=e[Z],l=a.data[t].outputs[r],p=s[l].subscribe(o);QD(n.index,a,e,i,o,p,!0)}var Vm=Symbol("BINDING");var vd=class extends Ec{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=Jr(e);return new vs(t,this.ngModule)}};function Ok(n){return Object.keys(n).map(e=>{let[t,r,i]=n[e],o={propName:t,templateName:e,isSignal:(r&Rd.SignalBased)!==0};return i&&(o.transform=i),o})}function kk(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function Fk(n,e,t){let r=e instanceof ct?e:e?.injector;return r&&n.getStandaloneInjector!==null&&(r=n.getStandaloneInjector(r)||r),r?new Lm(t,r):t}function Lk(n){let e=n.get(co,null);if(e===null)throw new $(407,!1);let t=n.get(qD,null),r=n.get(Qi,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:r,ngReflect:!1}}function Vk(n,e){let t=YD(n);return fD(e,t,t==="svg"?AC:t==="math"?xC:null)}function YD(n){return(n.selectors[0][0]||"div").toLowerCase()}var vs=class extends Vd{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=Ok(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=kk(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=gO(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,r,i,o,s){Me(Ee.DynamicComponentStart);let a=J(null);try{let u=this.componentDef,l=Uk(r,u,s,o),f=Fk(u,i||this.ngModule,e),p=Lk(f),g=p.rendererFactory.createRenderer(null,u),y=r?LO(g,r,u.encapsulation,f):Vk(u,g),T=s?.some(Ab)||o?.some(j=>typeof j!="function"&&j.bindings.some(Ab)),P=ay(null,l,null,512|vD(u),null,null,p,g,f,null,uD(y,f,!0));P[Ke]=y,ed(P);let N=null;try{let j=_y(Ke,P,2,"#host",()=>l.directiveRegistry,!0,0);gD(g,y,j),ys(y,P),Pd(l,P,j),iy(l,j,P),Ey(l,j),t!==void 0&&Bk(j,this.ngContentSelectors,t),N=ln(j.index,P),P[We]=N[We],my(l,P,null)}catch(j){throw N!==null&&xm(N),xm(P),j}finally{Me(Ee.DynamicComponentEnd),td()}return new _d(this.componentType,P,!!T)}finally{J(a)}}};function Uk(n,e,t,r){let i=n?["ng-version","21.1.2"]:mO(e.selectors[0]),o=null,s=null,a=0;if(t)for(let f of t)a+=f[Vm].requiredVars,f.create&&(f.targetIdx=0,(o??=[]).push(f)),f.update&&(f.targetIdx=0,(s??=[]).push(f));if(r)for(let f=0;f<r.length;f++){let p=r[f];if(typeof p!="function")for(let g of p.bindings){a+=g[Vm].requiredVars;let y=f+1;g.create&&(g.targetIdx=y,(o??=[]).push(g)),g.update&&(g.targetIdx=y,(s??=[]).push(g))}}let u=[e];if(r)for(let f of r){let p=typeof f=="function"?f:f.type,g=Pg(p);u.push(g)}return sy(0,null,jk(o,s),1,a,u,null,null,null,[i],null)}function jk(n,e){return!n&&!e?null:t=>{if(t&1&&n)for(let r of n)r.create();if(t&2&&e)for(let r of e)r.update()}}function Ab(n){let e=n[Vm].kind;return e==="input"||e==="twoWay"}var _d=class extends zD{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t,r){super(),this._rootLView=t,this._hasInputBindings=r,this._tNode=rc(t[Z],Ke),this.location=Es(this._tNode,t),this.instance=ln(this._tNode.index,t)[We],this.hostView=this.changeDetectorRef=new si(t,void 0),this.componentType=e}setInput(e,t){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let i=this._rootLView,o=gy(r,i[Z],i,e,t);this.previousInputValues.set(e,t);let s=ln(r.index,i);yy(s,1)}get injector(){return new oo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function Bk(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null&&o.length?Array.from(o):null)}}var Cr=(()=>{class n{static __NG_ELEMENT_ID__=Hk}return n})();function Hk(){let n=Ut();return JD(n,de())}var $k=Cr,ZD=class extends $k{_lContainer;_hostTNode;_hostLView;constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Es(this._hostTNode,this._hostLView)}get injector(){return new oo(this._hostTNode,this._hostLView)}get parentInjector(){let e=ey(this._hostTNode,this._hostLView);if(qb(e)){let t=hd(e,this._hostLView),r=fd(e),i=t[Z].data[r+8];return new oo(i,t)}else return new oo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=xb(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-ze}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=km(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,fc(this._hostTNode,s)),a}createComponent(e,t,r,i,o,s,a){let u=e&&!wP(e),l;if(u)l=t;else{let N=t||{};l=N.index,r=N.injector,i=N.projectableNodes,o=N.environmentInjector||N.ngModuleRef,s=N.directives,a=N.bindings}let f=u?e:new vs(Jr(e)),p=r||this.parentInjector;if(!o&&f.ngModule==null){let j=(u?p:this.parentInjector).get(ct,null);j&&(o=j)}let g=Jr(f.componentType??{}),y=km(this._lContainer,g?.id??null),T=y?.firstChild??null,P=f.create(p,i,T,o,s,a);return this.insertImpl(P.hostView,l,fc(this._hostTNode,y)),P}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(MC(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[ut],l=new ZD(u,u[cn],u[ut]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return Fd(s,i,o,r),e.attachToViewContainerRef(),Fg(vm(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=xb(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=pc(this._lContainer,t);r&&(Xa(vm(this._lContainer),t),Md(r[Z],r))}detach(e){let t=this._adjustIndex(e,-1),r=pc(this._lContainer,t);return r&&Xa(vm(this._lContainer),t)!=null?new si(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function xb(n){return n[nc]}function vm(n){return n[nc]||(n[nc]=[])}function JD(n,e){let t,r=e[n.index];return Cn(r)?t=r:(t=UD(r,e,null,n),e[n.index]=t,cy(e,t)),qk(t,e,n,r),new ZD(t,n,e)}function zk(n,e){let t=n[Ue],r=t.createComment(""),i=bn(e,n),o=t.parentNode(i);return yd(t,o,r,t.nextSibling(i),!1),r}var qk=Kk,Gk=()=>!1;function Wk(n,e,t){return Gk(n,e,t)}function Kk(n,e,t,r){if(n[ti])return;let i;t.type&8?i=un(r):i=zk(e,t),n[ti]=i}var Um=class n{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},jm=class n{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let r=e.contentQueries!==null?e.contentQueries[0]:t.length,i=[];for(let o=0;o<r;o++){let s=t.getByIndex(o),a=this.queries[s.indexInDeclarationView];i.push(a.clone())}return new n(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)wy(e,t).matches!==null&&this.queries[t].setDirty()}},Bm=class{flags;read;predicate;constructor(e,t,r=null){this.flags=t,this.read=r,typeof e=="string"?this.predicate=nF(e):this.predicate=e}},Hm=class n{queries;constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){let i=t!==null?t.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,t!==null?t.push(o):t=[o])}return t!==null?new n(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},$m=class n{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,t=-1){this.metadata=e,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==t;)r=r.parent;return t===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(e,t,Qk(t,o)),this.matchTNodeWithReadOption(e,t,ud(t,e,o,!1,!1))}else r===ai?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,ud(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===Gn||i===Cr||i===ai&&t.type&4)this.addMatch(t.index,-2);else{let o=ud(t,e,i,!1,!1);o!==null&&this.addMatch(t.index,o)}else this.addMatch(t.index,r)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function Qk(n,e){let t=n.localNames;if(t!==null){for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1]}return null}function Yk(n,e){return n.type&11?Es(n,e):n.type&4?vy(n,e):null}function Zk(n,e,t,r){return t===-1?Yk(e,n):t===-2?Jk(n,e,r):dc(n,n[Z],t,e)}function Jk(n,e,t){if(t===Gn)return Es(e,n);if(t===ai)return vy(e,n);if(t===Cr)return JD(e,n)}function XD(n,e,t,r){let i=e[Vn].queries[r];if(i.matches===null){let o=n.data,s=t.matches,a=[];for(let u=0;s!==null&&u<s.length;u+=2){let l=s[u];if(l<0)a.push(null);else{let f=o[l];a.push(Zk(e,f,s[u+1],t.metadata.read))}}i.matches=a}return i.matches}function zm(n,e,t,r){let i=n.queries.getByIndex(t),o=i.matches;if(o!==null){let s=XD(n,e,i,t);for(let a=0;a<o.length;a+=2){let u=o[a];if(u>0)r.push(s[a/2]);else{let l=o[a+1],f=e[-u];for(let p=ze;p<f.length;p++){let g=f[p];g[ei]===g[ut]&&zm(g[Z],g,l,r)}if(f[no]!==null){let p=f[no];for(let g=0;g<p.length;g++){let y=p[g];zm(y[Z],y,l,r)}}}}}return r}function Xk(n,e){return n[Vn].queries[e].queryList}function eF(n,e,t){let r=new md((t&4)===4);return OC(n,e,r,r.destroy),(e[Vn]??=new jm).queries.push(new Um(r))-1}function tF(n,e,t){let r=Xe();return r.firstCreatePass&&(rF(r,new Bm(n,e,t),-1),(e&2)===2&&(r.staticViewQueries=!0)),eF(r,de(),e)}function nF(n){return n.split(",").map(e=>e.trim())}function rF(n,e,t){n.queries===null&&(n.queries=new Hm),n.queries.track(new $m(e,t))}function wy(n,e){return n.queries.getByIndex(e)}function iF(n,e){let t=n[Z],r=wy(t,e);return r.crossesNgTemplate?zm(t,n,e,[]):XD(t,n,r,e)}var uo=class{},Ud=class{};var Ed=class extends uo{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new vd(this);constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t;let o=Ng(e);this._bootstrapComponents=mD(o.bootstrap),this._r3Injector=cm(e,t,[{provide:uo,useValue:this},{provide:Ec,useValue:this.componentFactoryResolver},...r],gr(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},wd=class extends Ud{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new Ed(this.moduleType,e,[])}};var gc=class extends uo{injector;componentFactoryResolver=new vd(this);instance=null;constructor(e){super();let t=new Ki([...e.providers,{provide:uo,useValue:this},{provide:Ec,useValue:this.componentFactoryResolver}],e.parent||tc(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function wc(n,e,t=null){return new gc({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var oF=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=Ug(!1,t.type),i=r.length>0?wc([r],this._injector,""):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=ee({token:n,providedIn:"environment",factory:()=>new n(ue(ct))})}return n})();function Ic(n){return yc(()=>{let e=eT(n),t=ne(L({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===ty.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(oF).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Sn.Emulated,styles:n.styles||qt,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&ho("NgStandalone"),tT(t);let r=n.dependencies;return t.directiveDefs=Rb(r,sF),t.pipeDefs=Rb(r,hC),t.id=uF(t),t})}function sF(n){return Jr(n)||Pg(n)}function ci(n){return yc(()=>({type:n.type,bootstrap:n.bootstrap||qt,declarations:n.declarations||qt,imports:n.imports||qt,exports:n.exports||qt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function aF(n,e){if(n==null)return Xr;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a,u;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,u=i[3]||null):(o=i,s=i,a=Rd.None,u=null),t[o]=[r,a,u],e[o]=s}return t}function cF(n){if(n==null)return Xr;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function qe(n){return yc(()=>{let e=eT(n);return tT(e),e})}function Iy(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function eT(n){let e={};return{type:n.type,providersResolver:null,viewProvidersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||Xr,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||qt,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:aF(n.inputs,e),outputs:cF(n.outputs),debugInfo:null}}function tT(n){n.features?.forEach(e=>e(n))}function Rb(n,e){return n?()=>{let t=typeof n=="function"?n():n,r=[];for(let i of t){let o=e(i);o!==null&&r.push(o)}return r}:null}function uF(n){let e=0,t=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function lF(n){return Object.getPrototypeOf(n.prototype).constructor}function Qt(n){let e=lF(n.type),t=!0,r=[n];for(;e;){let i;if(jn(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new $(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let s=n;s.inputs=_m(n.inputs),s.declaredInputs=_m(n.declaredInputs),s.outputs=_m(n.outputs);let a=i.hostBindings;a&&gF(n,a);let u=i.viewQuery,l=i.contentQueries;if(u&&hF(n,u),l&&pF(n,l),dF(n,i),fC(n.outputs,i.outputs),jn(i)&&i.data.animation){let f=n.data;f.animation=(f.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===Qt&&(t=!1)}}e=Object.getPrototypeOf(e)}fF(r)}function dF(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t])}}function fF(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=lc(i.hostAttrs,t=lc(t,i.hostAttrs))}}function _m(n){return n===Xr?{}:n===qt?[]:n}function hF(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function pF(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,o)=>{e(r,i,o),t(r,i,o)}:n.contentQueries=e}function gF(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function nT(n,e,t,r,i,o,s,a){if(t.firstCreatePass){n.mergedAttrs=lc(n.mergedAttrs,n.attrs);let f=n.tView=sy(2,n,i,o,s,t.directiveRegistry,t.pipeRegistry,null,t.schemas,t.consts,null);t.queries!==null&&(t.queries.template(t,n),f.queries=t.queries.embeddedTView(n))}a&&(n.flags|=a),ps(n,!1);let u=yF(t,e,n,r);rd()&&fy(t,e,u,n),ys(u,e);let l=UD(u,e,u,n);e[r+Ke]=l,cy(e,l),Wk(l,n,e)}function mF(n,e,t,r,i,o,s,a,u,l,f){let p=t+Ke,g;return e.firstCreatePass?(g=Ld(e,p,4,s||null,a||null),Zl()&&GD(e,n,g,Bn(e.consts,l),py),$b(e,g)):g=e.data[p],nT(g,n,e,t,r,i,o,u),ds(g)&&Pd(e,n,g),l!=null&&Od(n,g,f),g}function Id(n,e,t,r,i,o,s,a,u,l,f){let p=t+Ke,g;if(e.firstCreatePass){if(g=Ld(e,p,4,s||null,a||null),l!=null){let y=Bn(e.consts,l);g.localNames=[];for(let T=0;T<y.length;T+=2)g.localNames.push(y[T],-1)}}else g=e.data[p];return nT(g,n,e,t,r,i,o,u),l!=null&&Od(n,g,f),g}function Is(n,e,t,r,i,o,s,a){let u=de(),l=Xe(),f=Bn(l.consts,o);return mF(u,l,n,e,t,r,i,f,void 0,s,a),Is}var yF=vF;function vF(n,e,t,r){return oc(!0),e[Ue].createComment("")}var Cy=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();function rT(n){return typeof n=="function"&&n[Ft]!==void 0}function by(n){return rT(n)&&typeof n.set=="function"}var Dy=new G("");function ui(n){return!!n&&typeof n.then=="function"}function Ty(n){return!!n&&typeof n.subscribe=="function"}var iT=new G("");var Sy=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=V(iT,{optional:!0})??[];injector=V(on);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=At(this.injector,i);if(ui(o))t.push(o);else if(Ty(o)){let s=new Promise((a,u)=>{o.subscribe({complete:a,error:u})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),jd=new G("");function oT(){qp(()=>{let n="";throw new $(600,n)})}function sT(n){return n.isBoundToModule}var _F=10;var po=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=V(Dn);afterRenderManager=V(wD);zonelessEnabled=V(sc);rootEffectScheduler=V(od);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new at;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=V(ii);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(Ve(t=>!t))}constructor(){V(_c,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=V(ct);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){return this.bootstrapImpl(t,r)}bootstrapImpl(t,r,i=on.NULL){return this._injector.get(Gt).run(()=>{Me(Ee.BootstrapComponentStart);let s=t instanceof Vd;if(!this._injector.get(Sy).done){let T="";throw new $(405,T)}let u;s?u=t:u=this._injector.get(Ec).resolveComponentFactory(t),this.componentTypes.push(u.componentType);let l=sT(u)?void 0:this._injector.get(uo),f=r||u.selector,p=u.create(i,[],f,l),g=p.location.nativeElement,y=p.injector.get(Dy,null);return y?.registerApplication(g),p.onDestroy(()=>{this.detachView(p.hostView),uc(this.components,p),y?.unregisterApplication(g)}),this._loadComponent(p),Me(Ee.BootstrapComponentEnd,p),p})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){Me(Ee.ChangeDetectionStart),this.tracingSnapshot!==null?this.tracingSnapshot.run(ly.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw Me(Ee.ChangeDetectionEnd),new $(101,!1);let t=J(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,J(t),this.afterTick.next(),Me(Ee.ChangeDetectionEnd)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(co,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<_F;){Me(Ee.ChangeDetectionSyncStart);try{this.synchronizeOnce()}finally{Me(Ee.ChangeDetectionSyncEnd)}}}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let t=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!ic(i))continue;let o=r&&!this.zonelessEnabled?0:1;kD(i,o),t=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}t||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>ic(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;uc(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(t),this._injector.get(jd,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>uc(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new $(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function uc(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function li(n,e,t,r){let i=de(),o=io();if(Ir(i,o,e)){let s=Xe(),a=nd();GO(a,i,n,e,t,r)}return li}var HG=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";var qm=class{destroy(e){}updateValue(e,t){}swap(e,t){let r=Math.min(e,t),i=Math.max(e,t),o=this.detach(i);if(i-r>1){let s=this.detach(r);this.attach(r,o),this.attach(i,s)}else this.attach(r,o)}move(e,t){this.attach(t,this.detach(e))}};function Em(n,e,t,r,i){return n===t&&Object.is(e,r)?1:Object.is(i(n,e),i(t,r))?-1:0}function EF(n,e,t,r){let i,o,s=0,a=n.length-1,u=void 0;if(Array.isArray(e)){J(r);let l=e.length-1;for(J(null);s<=a&&s<=l;){let f=n.at(s),p=e[s],g=Em(s,f,s,p,t);if(g!==0){g<0&&n.updateValue(s,p),s++;continue}let y=n.at(a),T=e[l],P=Em(a,y,l,T,t);if(P!==0){P<0&&n.updateValue(a,T),a--,l--;continue}let N=t(s,f),j=t(a,y),W=t(s,p);if(Object.is(W,j)){let re=t(l,T);Object.is(re,N)?(n.swap(s,a),n.updateValue(a,T),l--,a--):n.move(a,s),n.updateValue(s,p),s++;continue}if(i??=new Cd,o??=Nb(n,s,a,t),Gm(n,i,s,W))n.updateValue(s,p),s++,a++;else if(o.has(W))i.set(N,n.detach(s)),a--;else{let re=n.create(s,e[s]);n.attach(s,re),s++,a++}}for(;s<=l;)Mb(n,i,t,s,e[s]),s++}else if(e!=null){J(r);let l=e[Symbol.iterator]();J(null);let f=l.next();for(;!f.done&&s<=a;){let p=n.at(s),g=f.value,y=Em(s,p,s,g,t);if(y!==0)y<0&&n.updateValue(s,g),s++,f=l.next();else{i??=new Cd,o??=Nb(n,s,a,t);let T=t(s,g);if(Gm(n,i,s,T))n.updateValue(s,g),s++,a++,f=l.next();else if(!o.has(T))n.attach(s,n.create(s,g)),s++,a++,f=l.next();else{let P=t(s,p);i.set(P,n.detach(s)),a--}}}for(;!f.done;)Mb(n,i,t,n.length,f.value),f=l.next()}for(;s<=a;)n.destroy(n.detach(a--));i?.forEach(l=>{n.destroy(l)})}function Gm(n,e,t,r){return e!==void 0&&e.has(r)?(n.attach(t,e.get(r)),e.delete(r),!0):!1}function Mb(n,e,t,r,i){if(Gm(n,e,r,t(r,i)))n.updateValue(r,i);else{let o=n.create(r,i);n.attach(r,o)}}function Nb(n,e,t,r){let i=new Set;for(let o=e;o<=t;o++)i.add(r(o,n.at(o)));return i}var Cd=class{kvMap=new Map;_vMap=void 0;has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let t=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(t)?(this.kvMap.set(e,this._vMap.get(t)),this._vMap.delete(t)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,t){if(this.kvMap.has(e)){let r=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,t)}else this.kvMap.set(e,t)}forEach(e){for(let[t,r]of this.kvMap)if(e(r,t),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),e(r,t)}}};function we(n,e,t,r,i,o,s,a){ho("NgControlFlow");let u=de(),l=Xe(),f=Bn(l.consts,o);return Id(u,l,n,e,t,r,i,f,256,s,a),Ay}function Ay(n,e,t,r,i,o,s,a){ho("NgControlFlow");let u=de(),l=Xe(),f=Bn(l.consts,o);return Id(u,l,n,e,t,r,i,f,512,s,a),Ay}function Ie(n,e){ho("NgControlFlow");let t=de(),r=io(),i=t[r]!==dn?t[r]:-1,o=i!==-1?bd(t,Ke+i):void 0,s=0;if(Ir(t,r,n)){let a=J(null);try{if(o!==void 0&&BD(o,s),n!==-1){let u=Ke+n,l=bd(t,u),f=Ym(t[Z],u),p=$D(l,f,t),g=kd(t,f,e,{dehydratedView:p});Fd(l,g,s,fc(f,p))}}finally{J(a)}}else if(o!==void 0){let a=jD(o,s);a!==void 0&&(a[We]=e)}}var Wm=class{lContainer;$implicit;$index;constructor(e,t,r){this.lContainer=e,this.$implicit=t,this.$index=r}get $count(){return this.lContainer.length-ze}};var Km=class{hasEmptyBlock;trackByFn;liveCollection;constructor(e,t,r){this.hasEmptyBlock=e,this.trackByFn=t,this.liveCollection=r}};function Yt(n,e,t,r,i,o,s,a,u,l,f,p,g){ho("NgControlFlow");let y=de(),T=Xe(),P=u!==void 0,N=de(),j=a?s.bind(N[Wt][We]):s,W=new Km(P,j);N[Ke+n]=W,Id(y,T,n+1,e,t,r,i,Bn(T.consts,o),256),P&&Id(y,T,n+2,u,l,f,p,Bn(T.consts,g),512)}var Qm=class extends qm{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(e,t,r){super(),this.lContainer=e,this.hostLView=t,this.templateTNode=r}get length(){return this.lContainer.length-ze}at(e){return this.getLView(e)[We].$implicit}attach(e,t){let r=t[cs];this.needsIndexUpdate||=e!==this.length,Fd(this.lContainer,t,e,fc(this.templateTNode,r)),wF(this.lContainer,e)}detach(e){return this.needsIndexUpdate||=e!==this.length-1,IF(this.lContainer,e),CF(this.lContainer,e)}create(e,t){let r=km(this.lContainer,this.templateTNode.tView.ssrId);return kd(this.hostLView,this.templateTNode,new Wm(this.lContainer,t,e),{dehydratedView:r})}destroy(e){Md(e[Z],e)}updateValue(e,t){this.getLView(e)[We].$implicit=t}reset(){this.needsIndexUpdate=!1}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[We].$index=e}getLView(e){return bF(this.lContainer,e)}};function Zt(n){let e=J(null),t=wr();try{let r=de(),i=r[Z],o=r[t],s=t+1,a=bd(r,s);if(o.liveCollection===void 0){let l=Ym(i,s);o.liveCollection=new Qm(a,r,l)}else o.liveCollection.reset();let u=o.liveCollection;if(EF(u,n,o.trackByFn,e),u.updateIndexes(),o.hasEmptyBlock){let l=io(),f=u.length===0;if(Ir(r,l,f)){let p=t+2,g=bd(r,p);if(f){let y=Ym(i,p),T=$D(g,y,r),P=kd(r,y,void 0,{dehydratedView:T});Fd(g,P,0,fc(y,T))}else i.firstUpdatePass&&mk(g),BD(g,0)}}}finally{J(e)}}function bd(n,e){return n[e]}function wF(n,e){if(n.length<=ze)return;let t=ze+e,r=n[t],i=r?r[to]:void 0;if(r&&i&&i.detachedLeaveAnimationFns&&i.detachedLeaveAnimationFns.length>0){let o=r[vr];wO(o,i),ao.delete(r[Er]),i.detachedLeaveAnimationFns=void 0}}function IF(n,e){if(n.length<=ze)return;let t=ze+e,r=n[t],i=r?r[to]:void 0;i&&i.leave&&i.leave.size>0&&(i.detachedLeaveAnimationFns=[])}function CF(n,e){return pc(n,e)}function bF(n,e){return jD(n,e)}function Ym(n,e){return rc(n,e)}function ke(n,e,t){let r=de(),i=io();if(Ir(r,i,e)){let o=Xe(),s=nd();SD(s,r,n,e,r[Ue],t)}return ke}function Pb(n,e,t,r,i){gy(e,n,t,i?"class":"style",r)}function w(n,e,t,r){let i=de(),o=i[Z],s=n+Ke,a=o.firstCreatePass?_y(s,i,2,e,py,Zl(),t,r):o.data[s];if(AD(a,i,n,e,DF),ds(a)){let u=i[Z];Pd(u,i,a),iy(u,a,i)}return r!=null&&Od(i,a),w}function D(){let n=Xe(),e=Ut(),t=xD(e);return n.firstCreatePass&&Ey(n,t),UC(t)&&jC(),LC(),t.classesWithoutHost!=null&&SP(t)&&Pb(n,t,de(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&AP(t)&&Pb(n,t,de(),t.stylesWithoutHost,!1),D}function br(n,e,t,r){return w(n,e,t,r),D(),br}var DF=(n,e,t,r,i)=>(oc(!0),fD(e[Ue],r,eb()));function go(n,e,t){let r=de(),i=r[Z],o=n+Ke,s=i.firstCreatePass?_y(o,r,8,"ng-container",py,Zl(),e,t):i.data[o];if(AD(s,r,n,"ng-container",TF),ds(s)){let a=r[Z];Pd(a,r,s),iy(a,s,r)}return t!=null&&Od(r,s),go}function mo(){let n=Xe(),e=Ut(),t=xD(e);return n.firstCreatePass&&Ey(n,t),mo}var TF=(n,e,t,r,i)=>(oc(!0),rO(e[Ue],""));function Re(){return de()}var ac=void 0;function SF(n){let e=Math.floor(Math.abs(n)),t=n.toString().replace(/^[^.]*\.?/,"").length;return e===1&&t===0?1:5}var AF=["en",[["a","p"],["AM","PM"]],[["AM","PM"]],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],ac,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],ac,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm\u202Fa","h:mm:ss\u202Fa","h:mm:ss\u202Fa z","h:mm:ss\u202Fa zzzz"],["{1}, {0}",ac,ac,ac],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",SF],wm={};function Jt(n){let e=xF(n),t=Ob(e);if(t)return t;let r=e.split("-")[0];if(t=Ob(r),t)return t;if(r==="en")return AF;throw new $(701,!1)}function Ob(n){return n in wm||(wm[n]=Yi.ng&&Yi.ng.common&&Yi.ng.common.locales&&Yi.ng.common.locales[n]),wm[n]}var Qe=(function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n})(Qe||{});function xF(n){return n.toLowerCase().replace(/_/g,"-")}var Cc="en-US";var RF=Cc;function aT(n){typeof n=="string"&&(RF=n.toLowerCase().replace(/_/g,"-"))}function K(n,e,t){let r=de(),i=Xe(),o=Ut();return cT(i,r,r[Ue],o,n,e,t),K}function cT(n,e,t,r,i,o,s){let a=!0,u=null;if((r.type&3||s)&&(u??=ym(r,e,o),Mk(r,n,e,s,t,i,o,u)&&(a=!1)),a){let l=r.outputs?.[i],f=r.hostDirectiveOutputs?.[i];if(f&&f.length)for(let p=0;p<f.length;p+=2){let g=f[p],y=f[p+1];u??=ym(r,e,o),Sb(r,e,g,y,i,u)}if(l&&l.length)for(let p of l)u??=ym(r,e,o),Sb(r,e,p,i,i,u)}}function k(n=1){return XC(n)}function Bd(n,e,t){return tF(n,e,t),Bd}function xy(n){let e=de(),t=Xe(),r=om();Xl(r+1);let i=wy(t,r);if(n.dirty&&RC(e)===((i.metadata.flags&2)===2)){if(i.matches===null)n.reset([]);else{let o=iF(e,r);n.reset(o,BP),n.notifyOnChanges()}return!0}return!1}function Ry(){return Xk(de(),om())}function My(n){let e=$C();return Wg(e,Ke+n)}function sd(n,e){return n<<17|e<<2}function lo(n){return n>>17&32767}function MF(n){return(n&2)==2}function NF(n,e){return n&131071|e<<17}function Zm(n){return n|2}function _s(n){return(n&131068)>>2}function Im(n,e){return n&-131069|e<<2}function PF(n){return(n&1)===1}function Jm(n){return n|1}function OF(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=lo(s),u=_s(s);n[r]=t;let l=!1,f;if(Array.isArray(t)){let p=t;f=p[1],(f===null||ss(p,f)>0)&&(l=!0)}else f=t;if(i)if(u!==0){let g=lo(n[a+1]);n[r+1]=sd(g,a),g!==0&&(n[g+1]=Im(n[g+1],r)),n[a+1]=NF(n[a+1],r)}else n[r+1]=sd(a,0),a!==0&&(n[a+1]=Im(n[a+1],r)),a=r;else n[r+1]=sd(u,0),a===0?a=r:n[u+1]=Im(n[u+1],r),u=r;l&&(n[r+1]=Zm(n[r+1])),kb(n,f,r,!0),kb(n,f,r,!1),kF(e,f,n,r,o),s=sd(a,u),o?e.classBindings=s:e.styleBindings=s}function kF(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&ss(o,e)>=0&&(t[r+1]=Jm(t[r+1]))}function kb(n,e,t,r){let i=n[t+1],o=e===null,s=r?lo(i):_s(i),a=!1;for(;s!==0&&(a===!1||o);){let u=n[s],l=n[s+1];FF(u,e)&&(a=!0,n[s+1]=r?Jm(l):Zm(l)),s=r?lo(l):_s(l)}a&&(n[t+1]=r?Zm(i):Jm(i))}function FF(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?ss(n,e)>=0:!1}function xt(n,e,t){return uT(n,e,t,!1),xt}function et(n,e){return uT(n,e,null,!0),et}function uT(n,e,t,r){let i=de(),o=Xe(),s=im(2);if(o.firstUpdatePass&&VF(o,n,s,r),e!==dn&&Ir(i,s,e)){let a=o.data[wr()];$F(o,a,i,i[Ue],n,i[s+1]=zF(e,t),r,s)}}function LF(n,e){return e>=n.expandoStartIndex}function VF(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[wr()],s=LF(n,t);qF(o,r)&&e===null&&!s&&(e=!1),e=UF(i,o,e,r),OF(i,o,e,t,s,r)}}function UF(n,e,t,r){let i=QC(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=Cm(null,n,e,t,r),t=mc(t,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==i)if(t=Cm(i,n,e,t,r),o===null){let u=jF(n,e,r);u!==void 0&&Array.isArray(u)&&(u=Cm(null,n,e,u[1],r),u=mc(u,e.attrs,r),BF(n,e,r,u))}else o=HF(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function jF(n,e,t){let r=t?e.classBindings:e.styleBindings;if(_s(r)!==0)return n[lo(r)]}function BF(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[lo(i)]=r}function HF(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=mc(r,s,t)}return mc(r,e.attrs,t)}function Cm(n,e,t,r,i){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],r=mc(r,o.hostAttrs,i),o!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function mc(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),EC(n,s,t?!0:e[++o]))}return n===void 0?null:n}function $F(n,e,t,r,i,o,s,a){if(!(e.type&3))return;let u=n.data,l=u[a+1],f=PF(l)?Fb(u,e,t,i,_s(l),s):void 0;if(!Dd(f)){Dd(o)||MF(l)&&(o=Fb(u,null,t,i,a,s));let p=Gg(wr(),t);FO(r,s,p,i,o)}}function Fb(n,e,t,r,i,o){let s=e===null,a;for(;i>0;){let u=n[i],l=Array.isArray(u),f=l?u[1]:u,p=f===null,g=t[i+1];g===dn&&(g=p?qt:void 0);let y=p?Gl(g,r):f===r?g:void 0;if(l&&!Dd(y)&&(y=Gl(u,r)),Dd(y)&&(a=y,s))return a;let T=n[i+1];i=s?lo(T):_s(T)}if(e!==null){let u=o?e.residualClasses:e.residualStyles;u!=null&&(a=Gl(u,r))}return a}function Dd(n){return n!==void 0}function zF(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=gr(dD(n)))),n}function qF(n,e){return(n.flags&(e?8:16))!==0}function x(n,e=""){let t=de(),r=Xe(),i=n+Ke,o=r.firstCreatePass?Ld(r,i,1,e,null):r.data[i],s=GF(r,t,o,e);t[i]=s,rd()&&fy(r,t,s,o),ps(o,!1)}var GF=(n,e,t,r)=>(oc(!0),tO(e[Ue],r));function WF(n,e,t,r=""){return Ir(n,io(),t)?e+Ja(t)+r:dn}function KF(n,e,t,r,i,o=""){let s=zC(),a=KD(n,s,t,i);return im(2),a?e+Ja(t)+r+Ja(i)+o:dn}function Te(n){return ft("",n),Te}function ft(n,e,t){let r=de(),i=WF(r,n,e,t);return i!==dn&&lT(r,wr(),i),ft}function An(n,e,t,r,i){let o=de(),s=KF(o,n,e,t,r,i);return s!==dn&&lT(o,wr(),s),An}function lT(n,e,t){let r=Gg(e,n);nO(n[Ue],r,t)}function yo(n,e,t){by(e)&&(e=e());let r=de(),i=io();if(Ir(r,i,e)){let o=Xe(),s=nd();SD(s,r,n,e,r[Ue],t)}return yo}function Cs(n,e){let t=by(n);return t&&n.set(e),t}function vo(n,e){let t=de(),r=Xe(),i=Ut();return cT(r,t,t[Ue],i,n,e),vo}function Lb(n,e,t){let r=Xe();r.firstCreatePass&&dT(e,r.data,r.blueprint,jn(n),t)}function dT(n,e,t,r,i){if(n=Et(n),Array.isArray(n))for(let o=0;o<n.length;o++)dT(n[o],e,t,r,i);else{let o=Xe(),s=de(),a=Ut(),u=Wi(n)?n:Et(n.provide),l=Bg(n),f=a.providerIndexes&1048575,p=a.directiveStart,g=a.providerIndexes>>20;if(Wi(n)||!n.multi){let y=new so(l,i,ve,null),T=Dm(u,e,i?f:f+g,p);T===-1?(Sm(gd(a,s),o,u),bm(o,n,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(y),s.push(y)):(t[T]=y,s[T]=y)}else{let y=Dm(u,e,f+g,p),T=Dm(u,e,f,f+g),P=y>=0&&t[y],N=T>=0&&t[T];if(i&&!N||!i&&!P){Sm(gd(a,s),o,u);let j=ZF(i?YF:QF,t.length,i,r,l,n);!i&&N&&(t[T].providerFactory=j),bm(o,n,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(j),s.push(j)}else{let j=fT(t[i?T:y],l,!i&&r);bm(o,n,y>-1?y:T,j)}!i&&r&&N&&t[T].componentProviders++}}}function bm(n,e,t,r){let i=Wi(e),o=DC(e);if(i||o){let u=(o?Et(e.useClass):e).prototype.ngOnDestroy;if(u){let l=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let f=l.indexOf(t);f===-1?l.push(t,[r,u]):l[f+1].push(r,u)}else l.push(t,u)}}}function fT(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function Dm(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function QF(n,e,t,r,i){return Xm(this.multi,[])}function YF(n,e,t,r,i){let o=this.multi,s;if(this.providerFactory){let a=this.providerFactory.componentProviders,u=dc(r,r[Z],this.providerFactory.index,i);s=u.slice(0,a),Xm(o,s);for(let l=a;l<u.length;l++)s.push(u[l])}else s=[],Xm(o,s);return s}function Xm(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function ZF(n,e,t,r,i,o){let s=new so(n,t,ve,null);return s.multi=[],s.index=e,s.componentProviders=0,fT(s,i,r&&!t),s}function Dr(n,e){return t=>{t.providersResolver=(r,i)=>Lb(r,i?i(n):n,!1),e&&(t.viewProvidersResolver=(r,i)=>Lb(r,i?i(e):e,!0))}}function Tr(n,e,t,r){return hT(de(),rm(),n,e,t,r)}function JF(n,e){let t=n[e];return t===dn?void 0:t}function hT(n,e,t,r,i,o,s){let a=e+t;return KD(n,a,i,o)?Rk(n,a+2,s?r.call(s,i,o):r(i,o)):JF(n,a+2)}function _o(n,e){let t=Xe(),r,i=n+Ke;t.firstCreatePass?(r=XF(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let o=r.factory||(r.factory=Qr(r.type,!0)),s,a=Vt(ve);try{let u=pd(!1),l=o();return pd(u),Kg(t,de(),i,l),l}finally{Vt(a)}}function XF(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function Eo(n,e,t,r){let i=n+Ke,o=de(),s=Wg(o,i);return eL(o,i)?hT(o,rm(),e,s.transform,t,r,s):s.transform(t,r)}function eL(n,e){return n[Z].data[e].pure}var Td=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},Ny=(()=>{class n{compileModuleSync(t){return new wd(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=Ng(t),o=mD(i.declarations).reduce((s,a)=>{let u=Jr(a);return u&&s.push(new vs(u)),s},[]);return new Td(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var pT=(()=>{class n{applicationErrorHandler=V(Dn);appRef=V(po);taskService=V(ii);ngZone=V(Gt);zonelessEnabled=V(sc);tracing=V(_c,{optional:!0});zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new yt;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Qa):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(V(hm,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{let t=this.taskService.add();if(!this.runningTick&&(this.cleanup(),!this.zonelessEnabled||this.appRef.includeAllTestViews)){this.taskService.remove(t);return}this.switchToMicrotaskScheduler(),this.taskService.remove(t)})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()}))}switchToMicrotaskScheduler(){this.ngZone.runOutsideAngular(()=>{let t=this.taskService.add();this.useMicrotaskScheduler=!0,queueMicrotask(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})})}notify(t){if(!this.zonelessEnabled&&t===5)return;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2;break}case 12:{this.appRef.dirtyFlags|=16;break}case 13:{this.appRef.dirtyFlags|=2;break}case 11:break;default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?ib:um;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Qa+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.applicationErrorHandler(r)}finally{this.taskService.remove(t),this.cleanup()}}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function gT(){return[{provide:Qi,useExisting:pT},{provide:Gt,useClass:Ya},{provide:sc,useValue:!0}]}function tL(){return typeof $localize<"u"&&$localize.locale||Cc}var bc=new G("",{factory:()=>V(bc,{optional:!0,skipSelf:!0})||tL()});function jt(n,e){return ul(n,e?.equal)}var yT=Symbol("InputSignalNode#UNSET"),vL=ne(L({},ll),{transformFn:void 0,applyValueToInputSignal(n,e){Ua(n,e)}});function vT(n,e){let t=Object.create(vL);t.value=n,t.transformFn=e?.transform;function r(){if(Fa(t),t.value===yT){let i=null;throw new $(-950,i)}return t.value}return r[Ft]=t,r}function mT(n,e){return vT(n,e)}function _L(n){return vT(yT,n)}var _T=(mT.required=_L,mT);var Py=new G(""),EL=new G("");function Dc(n){return!n.moduleRef}function wL(n){let e=Dc(n)?n.r3Injector:n.moduleRef.injector,t=e.get(Gt);return t.run(()=>{Dc(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(Dn),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:r})}),Dc(n)){let o=()=>e.destroy(),s=n.platformInjector.get(Py);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(Py);s.add(o),n.moduleRef.onDestroy(()=>{uc(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return CL(r,t,()=>{let o=e.get(ii),s=o.add(),a=e.get(Sy);return a.runInitializers(),a.donePromise.then(()=>{let u=e.get(bc,Cc);if(aT(u||Cc),!e.get(EL,!0))return Dc(n)?e.get(po):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(Dc(n)){let f=e.get(po);return n.rootComponent!==void 0&&f.bootstrap(n.rootComponent),f}else return IL?.(n.moduleRef,n.allPlatformModules),n.moduleRef}).finally(()=>{o.remove(s)})})})}var IL;function CL(n,e,t){try{let r=t();return ui(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n(r)),r}}var Hd=null;function bL(n=[],e){return on.create({name:e,providers:[{provide:ec,useValue:"platform"},{provide:Py,useValue:new Set([()=>Hd=null])},...n]})}function DL(n=[]){if(Hd)return Hd;let e=bL(n);return Hd=e,oT(),TL(e),e}function TL(n){let e=n.get(Ad,null);At(n,()=>{e?.forEach(t=>t())})}var SL=1e4;var fJ=SL-1e3;var Tc=(()=>{class n{static __NG_ELEMENT_ID__=AL}return n})();function AL(n){return xL(Ut(),de(),(n&16)===16)}function xL(n,e,t){if(ni(n)&&!t){let r=ln(n.index,e);return new si(r,r)}else if(n.type&175){let r=e[Wt];return new si(r,e)}return null}function ET(n){let{rootComponent:e,appProviders:t,platformProviders:r,platformRef:i}=n;Me(Ee.BootstrapApplicationStart);try{let o=i?.injector??DL(r),s=[gT(),sb,...t||[]],a=new gc({providers:s,parent:o,debugName:"",runEnvironmentInitializers:!1});return wL({r3Injector:a.injector,platformInjector:o,rootComponent:e})}catch(o){return Promise.reject(o)}finally{Me(Ee.BootstrapApplicationEnd)}}function $d(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}var wT=null;function fn(){return wT}function ky(n){wT??=n}var Sc=class{},zd=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ee({token:n,factory:()=>V(IT),providedIn:"platform"})}return n})();var IT=(()=>{class n extends zd{_location;_history;_doc=V(lt);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return fn().getBaseHref(this._doc)}onPopState(t){let r=fn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=fn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ee({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function DT(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function CT(n){let e=n.search(/#|\?|$/);return n[e-1]==="/"?n.slice(0,e-1)+n.slice(e):n}function di(n){return n&&n[0]!=="?"?`?${n}`:n}var qd=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ee({token:n,factory:()=>V(ML),providedIn:"root"})}return n})(),RL=new G(""),ML=(()=>{class n extends qd{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??V(lt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return DT(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+di(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+di(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+di(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(ue(zd),ue(RL,8))};static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),bs=(()=>{class n{_subject=new at;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=OL(CT(bT(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+di(r))}normalize(t){return n.stripTrailingSlash(PL(this._basePath,bT(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+di(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+di(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=di;static joinWithSlash=DT;static stripTrailingSlash=CT;static \u0275fac=function(r){return new(r||n)(ue(qd))};static \u0275prov=ee({token:n,factory:()=>NL(),providedIn:"root"})}return n})();function NL(){return new bs(ue(qd))}function PL(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function bT(n){return n.replace(/\/index.html$/,"")}function OL(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var Rt=(function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n})(Rt||{}),Ne=(function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n})(Ne||{}),$t=(function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n})($t||{}),Ar={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function xT(n){return Jt(n)[Qe.LocaleId]}function RT(n,e,t){let r=Jt(n),i=[r[Qe.DayPeriodsFormat],r[Qe.DayPeriodsStandalone]],o=hn(i,e);return hn(o,t)}function MT(n,e,t){let r=Jt(n),i=[r[Qe.DaysFormat],r[Qe.DaysStandalone]],o=hn(i,e);return hn(o,t)}function NT(n,e,t){let r=Jt(n),i=[r[Qe.MonthsFormat],r[Qe.MonthsStandalone]],o=hn(i,e);return hn(o,t)}function PT(n,e){let r=Jt(n)[Qe.Eras];return hn(r,e)}function Ac(n,e){let t=Jt(n);return hn(t[Qe.DateFormat],e)}function xc(n,e){let t=Jt(n);return hn(t[Qe.TimeFormat],e)}function Rc(n,e){let r=Jt(n)[Qe.DateTimeFormat];return hn(r,e)}function Mc(n,e){let t=Jt(n),r=t[Qe.NumberSymbols][e];if(typeof r>"u"){if(e===Ar.CurrencyDecimal)return t[Qe.NumberSymbols][Ar.Decimal];if(e===Ar.CurrencyGroup)return t[Qe.NumberSymbols][Ar.Group]}return r}function OT(n){if(!n[Qe.ExtraData])throw new $(2303,!1)}function kT(n){let e=Jt(n);return OT(e),(e[Qe.ExtraData][2]||[]).map(r=>typeof r=="string"?Fy(r):[Fy(r[0]),Fy(r[1])])}function FT(n,e,t){let r=Jt(n);OT(r);let i=[r[Qe.ExtraData][0],r[Qe.ExtraData][1]],o=hn(i,e)||[];return hn(o,t)||[]}function hn(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new $(2304,!1)}function Fy(n){let[e,t]=n.split(":");return{hours:+e,minutes:+t}}var kL=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Gd={},FL=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;function LT(n,e,t,r){let i=qL(n);e=Sr(t,e)||e;let s=[],a;for(;e;)if(a=FL.exec(e),a){s=s.concat(a.slice(1));let f=s.pop();if(!f)break;e=f}else{s.push(e);break}let u=i.getTimezoneOffset();r&&(u=UT(r,u),i=zL(i,r));let l="";return s.forEach(f=>{let p=HL(f);l+=p?p(i,t,u):f==="''"?"'":f.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}function Zd(n,e,t){let r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function Sr(n,e){let t=xT(n);if(Gd[t]??={},Gd[t][e])return Gd[t][e];let r="";switch(e){case"shortDate":r=Ac(n,$t.Short);break;case"mediumDate":r=Ac(n,$t.Medium);break;case"longDate":r=Ac(n,$t.Long);break;case"fullDate":r=Ac(n,$t.Full);break;case"shortTime":r=xc(n,$t.Short);break;case"mediumTime":r=xc(n,$t.Medium);break;case"longTime":r=xc(n,$t.Long);break;case"fullTime":r=xc(n,$t.Full);break;case"short":let i=Sr(n,"shortTime"),o=Sr(n,"shortDate");r=Wd(Rc(n,$t.Short),[i,o]);break;case"medium":let s=Sr(n,"mediumTime"),a=Sr(n,"mediumDate");r=Wd(Rc(n,$t.Medium),[s,a]);break;case"long":let u=Sr(n,"longTime"),l=Sr(n,"longDate");r=Wd(Rc(n,$t.Long),[u,l]);break;case"full":let f=Sr(n,"fullTime"),p=Sr(n,"fullDate");r=Wd(Rc(n,$t.Full),[f,p]);break}return r&&(Gd[t][e]=r),r}function Wd(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return e!=null&&r in e?e[r]:t})),n}function xn(n,e,t="-",r,i){let o="";(n<0||i&&n<=0)&&(i?n=-n+1:(n=-n,o=t));let s=String(n);for(;s.length<e;)s="0"+s;return r&&(s=s.slice(s.length-e)),o+s}function LL(n,e){return xn(n,3).substring(0,e)}function tt(n,e,t=0,r=!1,i=!1){return function(o,s){let a=VL(n,o);if((t>0||a>-t)&&(a+=t),n===3)a===0&&t===-12&&(a=12);else if(n===6)return LL(a,e);let u=Mc(s,Ar.MinusSign);return xn(a,e,u,r,i)}}function VL(n,e){switch(n){case 0:return e.getFullYear();case 1:return e.getMonth();case 2:return e.getDate();case 3:return e.getHours();case 4:return e.getMinutes();case 5:return e.getSeconds();case 6:return e.getMilliseconds();case 7:return e.getDay();default:throw new $(2301,!1)}}function Fe(n,e,t=Rt.Format,r=!1){return function(i,o){return UL(i,o,n,e,t,r)}}function UL(n,e,t,r,i,o){switch(t){case 2:return NT(e,i,r)[n.getMonth()];case 1:return MT(e,i,r)[n.getDay()];case 0:let s=n.getHours(),a=n.getMinutes();if(o){let l=kT(e),f=FT(e,i,r),p=l.findIndex(g=>{if(Array.isArray(g)){let[y,T]=g,P=s>=y.hours&&a>=y.minutes,N=s<T.hours||s===T.hours&&a<T.minutes;if(y.hours<T.hours){if(P&&N)return!0}else if(P||N)return!0}else if(g.hours===s&&g.minutes===a)return!0;return!1});if(p!==-1)return f[p]}return RT(e,i,r)[s<12?0:1];case 3:return PT(e,r)[n.getFullYear()<=0?0:1];default:let u=t;throw new $(2302,!1)}}function Kd(n){return function(e,t,r){let i=-1*r,o=Mc(t,Ar.MinusSign),s=i>0?Math.floor(i/60):Math.ceil(i/60);switch(n){case 0:return(i>=0?"+":"")+xn(s,2,o)+xn(Math.abs(i%60),2,o);case 1:return"GMT"+(i>=0?"+":"")+xn(s,1,o);case 2:return"GMT"+(i>=0?"+":"")+xn(s,2,o)+":"+xn(Math.abs(i%60),2,o);case 3:return r===0?"Z":(i>=0?"+":"")+xn(s,2,o)+":"+xn(Math.abs(i%60),2,o);default:throw new $(2310,!1)}}}var jL=0,Yd=4;function BL(n){let e=Zd(n,jL,1).getDay();return Zd(n,0,1+(e<=Yd?Yd:Yd+7)-e)}function VT(n){let e=n.getDay(),t=e===0?-3:Yd-e;return Zd(n.getFullYear(),n.getMonth(),n.getDate()+t)}function Ly(n,e=!1){return function(t,r){let i;if(e){let o=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,s=t.getDate();i=1+Math.floor((s+o)/7)}else{let o=VT(t),s=BL(o.getFullYear()),a=o.getTime()-s.getTime();i=1+Math.round(a/6048e5)}return xn(i,n,Mc(r,Ar.MinusSign))}}function Qd(n,e=!1){return function(t,r){let o=VT(t).getFullYear();return xn(o,n,Mc(r,Ar.MinusSign),e)}}var Vy={};function HL(n){if(Vy[n])return Vy[n];let e;switch(n){case"G":case"GG":case"GGG":e=Fe(3,Ne.Abbreviated);break;case"GGGG":e=Fe(3,Ne.Wide);break;case"GGGGG":e=Fe(3,Ne.Narrow);break;case"y":e=tt(0,1,0,!1,!0);break;case"yy":e=tt(0,2,0,!0,!0);break;case"yyy":e=tt(0,3,0,!1,!0);break;case"yyyy":e=tt(0,4,0,!1,!0);break;case"Y":e=Qd(1);break;case"YY":e=Qd(2,!0);break;case"YYY":e=Qd(3);break;case"YYYY":e=Qd(4);break;case"M":case"L":e=tt(1,1,1);break;case"MM":case"LL":e=tt(1,2,1);break;case"MMM":e=Fe(2,Ne.Abbreviated);break;case"MMMM":e=Fe(2,Ne.Wide);break;case"MMMMM":e=Fe(2,Ne.Narrow);break;case"LLL":e=Fe(2,Ne.Abbreviated,Rt.Standalone);break;case"LLLL":e=Fe(2,Ne.Wide,Rt.Standalone);break;case"LLLLL":e=Fe(2,Ne.Narrow,Rt.Standalone);break;case"w":e=Ly(1);break;case"ww":e=Ly(2);break;case"W":e=Ly(1,!0);break;case"d":e=tt(2,1);break;case"dd":e=tt(2,2);break;case"c":case"cc":e=tt(7,1);break;case"ccc":e=Fe(1,Ne.Abbreviated,Rt.Standalone);break;case"cccc":e=Fe(1,Ne.Wide,Rt.Standalone);break;case"ccccc":e=Fe(1,Ne.Narrow,Rt.Standalone);break;case"cccccc":e=Fe(1,Ne.Short,Rt.Standalone);break;case"E":case"EE":case"EEE":e=Fe(1,Ne.Abbreviated);break;case"EEEE":e=Fe(1,Ne.Wide);break;case"EEEEE":e=Fe(1,Ne.Narrow);break;case"EEEEEE":e=Fe(1,Ne.Short);break;case"a":case"aa":case"aaa":e=Fe(0,Ne.Abbreviated);break;case"aaaa":e=Fe(0,Ne.Wide);break;case"aaaaa":e=Fe(0,Ne.Narrow);break;case"b":case"bb":case"bbb":e=Fe(0,Ne.Abbreviated,Rt.Standalone,!0);break;case"bbbb":e=Fe(0,Ne.Wide,Rt.Standalone,!0);break;case"bbbbb":e=Fe(0,Ne.Narrow,Rt.Standalone,!0);break;case"B":case"BB":case"BBB":e=Fe(0,Ne.Abbreviated,Rt.Format,!0);break;case"BBBB":e=Fe(0,Ne.Wide,Rt.Format,!0);break;case"BBBBB":e=Fe(0,Ne.Narrow,Rt.Format,!0);break;case"h":e=tt(3,1,-12);break;case"hh":e=tt(3,2,-12);break;case"H":e=tt(3,1);break;case"HH":e=tt(3,2);break;case"m":e=tt(4,1);break;case"mm":e=tt(4,2);break;case"s":e=tt(5,1);break;case"ss":e=tt(5,2);break;case"S":e=tt(6,1);break;case"SS":e=tt(6,2);break;case"SSS":e=tt(6,3);break;case"Z":case"ZZ":case"ZZZ":e=Kd(0);break;case"ZZZZZ":e=Kd(3);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=Kd(1);break;case"OOOO":case"ZZZZ":case"zzzz":e=Kd(2);break;default:return null}return Vy[n]=e,e}function UT(n,e){n=n.replace(/:/g,"");let t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function $L(n,e){return n=new Date(n.getTime()),n.setMinutes(n.getMinutes()+e),n}function zL(n,e,t){let i=n.getTimezoneOffset(),o=UT(e,i);return $L(n,-1*(o-i))}function qL(n){if(TT(n))return n;if(typeof n=="number"&&!isNaN(n))return new Date(n);if(typeof n=="string"){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){let[i,o=1,s=1]=n.split("-").map(a=>+a);return Zd(i,o-1,s)}let t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(kL))return GL(r)}let e=new Date(n);if(!TT(e))throw new $(2311,!1);return e}function GL(n){let e=new Date(0),t=0,r=0,i=n[8]?e.setUTCFullYear:e.setFullYear,o=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),i.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));let s=Number(n[4]||0)-t,a=Number(n[5]||0)-r,u=Number(n[6]||0),l=Math.floor(parseFloat("0."+(n[7]||0))*1e3);return o.call(e,s,a,u,l),e}function TT(n){return n instanceof Date&&!isNaN(n.valueOf())}var Uy=/\s+/,ST=[],By=(()=>{class n{_ngEl;_renderer;initialClasses=ST;rawClass;stateMap=new Map;constructor(t,r){this._ngEl=t,this._renderer=r}set klass(t){this.initialClasses=t!=null?t.trim().split(Uy):ST}set ngClass(t){this.rawClass=typeof t=="string"?t.trim().split(Uy):t}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(let r of t)this._updateState(r,!0);else if(t!=null)for(let r of Object.keys(t))this._updateState(r,!!t[r]);this._applyStateDiff()}_updateState(t,r){let i=this.stateMap.get(t);i!==void 0?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let t of this.stateMap){let r=t[0],i=t[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(t,r){t=t.trim(),t.length>0&&t.split(Uy).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static \u0275fac=function(r){return new(r||n)(ve(Gn),ve(ws))};static \u0275dir=qe({type:n,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return n})();var Hy=(()=>{class n{_viewContainer;_context=new Jd;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(t,r){this._viewContainer=t,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){AT(t,!1),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){AT(t,!1),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(ve(Cr),ve(ai))};static \u0275dir=qe({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),Jd=class{$implicit=null;ngIf=null};function AT(n,e){if(n&&!n.createEmbeddedView)throw new $(2020,!1)}var jy=class{_viewContainerRef;_templateRef;_created=!1;constructor(e,t){this._viewContainerRef=e,this._templateRef=t}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(e){e&&!this._created?this.create():!e&&this._created&&this.destroy()}},Xd=(()=>{class n{_defaultViews=[];_defaultUsed=!1;_caseCount=0;_lastCaseCheckIndex=0;_lastCasesMatched=!1;_ngSwitch;set ngSwitch(t){this._ngSwitch=t,this._caseCount===0&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(t){this._defaultViews.push(t)}_matchCase(t){let r=t===this._ngSwitch;return this._lastCasesMatched||=r,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),r}_updateDefaultCases(t){if(this._defaultViews.length>0&&t!==this._defaultUsed){this._defaultUsed=t;for(let r of this._defaultViews)r.enforceState(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275dir=qe({type:n,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"}})}return n})(),$y=(()=>{class n{ngSwitch;_view;ngSwitchCase;constructor(t,r,i){this.ngSwitch=i,i._addCase(),this._view=new jy(t,r)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}static \u0275fac=function(r){return new(r||n)(ve(Cr),ve(ai),ve(Xd,9))};static \u0275dir=qe({type:n,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"}})}return n})();function WL(n,e){return new $(2100,!1)}var KL="mediumDate",jT=new G(""),BT=new G(""),zy=(()=>{class n{locale;defaultTimezone;defaultOptions;constructor(t,r,i){this.locale=t,this.defaultTimezone=r,this.defaultOptions=i}transform(t,r,i,o){if(t==null||t===""||t!==t)return null;try{let s=r??this.defaultOptions?.dateFormat??KL,a=i??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return LT(t,s,o||this.locale,a)}catch(s){throw WL(n,s.message)}}static \u0275fac=function(r){return new(r||n)(ve(bc,16),ve(jT,24),ve(BT,24))};static \u0275pipe=Iy({name:"date",type:n,pure:!0})}return n})();var ef=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=ci({type:n});static \u0275inj=yr({})}return n})();function qy(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var Nc=class{};var HT="browser";var Pc=class{_doc;constructor(e){this._doc=e}manager},tf=(()=>{class n extends Pc{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,o){return t.addEventListener(r,i,o),()=>this.removeEventListener(t,r,i,o)}removeEventListener(t,r,i,o){return t.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||n)(ue(lt))};static \u0275prov=ee({token:n,factory:n.\u0275fac})}return n})(),of=new G(""),Qy=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(s=>{s.manager=this});let i=t.filter(s=>!(s instanceof tf));this._plugins=i.slice().reverse();let o=t.find(s=>s instanceof tf);o&&this._plugins.push(o)}addEventListener(t,r,i,o){return this._findPluginFor(r).addEventListener(t,r,i,o)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new $(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)(ue(of),ue(Gt))};static \u0275prov=ee({token:n,factory:n.\u0275fac})}return n})(),Gy="ng-app-id";function $T(n){for(let e of n)e.remove()}function zT(n,e){let t=e.createElement("style");return t.textContent=n,t}function ZL(n,e,t,r){let i=n.head?.querySelectorAll(`style[${Gy}="${e}"],link[${Gy}="${e}"]`);if(i)for(let o of i)o.removeAttribute(Gy),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&t.set(o.textContent,{usage:0,elements:[o]})}function Ky(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var Yy=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,ZL(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,zT);r?.forEach(i=>this.addUsage(i,this.external,Ky))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let o=r.get(t);o?o.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&($T(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])$T(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,zT(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,Ky(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)(ue(lt),ue(Sd),ue(xd,8),ue(vc))};static \u0275prov=ee({token:n,factory:n.\u0275fac})}return n})(),Wy={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Zy=/%COMP%/g;var GT="%COMP%",JL=`_nghost-${GT}`,XL=`_ngcontent-${GT}`,e2=!0,t2=new G("",{factory:()=>e2});function n2(n){return XL.replace(Zy,n)}function r2(n){return JL.replace(Zy,n)}function WT(n,e){return e.map(t=>t.replace(Zy,n))}var Jy=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;constructor(t,r,i,o,s,a,u=null,l=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.ngZone=a,this.nonce=u,this.tracingService=l,this.defaultRenderer=new Oc(t,s,a,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(t,r);return i instanceof rf?i.applyToHost(t):i instanceof kc&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,f=this.removeStylesOnCompDestroy,p=this.tracingService;switch(r.encapsulation){case Sn.Emulated:o=new rf(u,l,r,this.appId,f,s,a,p);break;case Sn.ShadowDom:return new nf(u,t,r,s,a,this.nonce,p,l);case Sn.ExperimentalIsolatedShadowDom:return new nf(u,t,r,s,a,this.nonce,p);default:o=new kc(u,l,r,f,s,a,p);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||n)(ue(Qy),ue(Yy),ue(Sd),ue(t2),ue(lt),ue(Gt),ue(xd),ue(_c,8))};static \u0275prov=ee({token:n,factory:n.\u0275fac})}return n})(),Oc=class{eventManager;doc;ngZone;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.tracingService=i}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(Wy[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(qT(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(qT(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new $(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=Wy[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=Wy[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(zn.DashCase|zn.Important)?e.style.setProperty(t,r,i&zn.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&zn.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,i){if(typeof e=="string"&&(e=fn().getGlobalEventTarget(this.doc,e),!e))throw new $(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,t,o)),this.eventManager.addEventListener(e,t,o,i)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;e(t)===!1&&t.preventDefault()}}};function qT(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var nf=class extends Oc{hostEl;sharedStylesHost;shadowRoot;constructor(e,t,r,i,o,s,a,u){super(e,i,o,a),this.hostEl=t,this.sharedStylesHost=u,this.shadowRoot=t.attachShadow({mode:"open"}),this.sharedStylesHost&&this.sharedStylesHost.addHost(this.shadowRoot);let l=r.styles;l=WT(r.id,l);for(let p of l){let g=document.createElement("style");s&&g.setAttribute("nonce",s),g.textContent=p,this.shadowRoot.appendChild(g)}let f=r.getExternalStyles?.();if(f)for(let p of f){let g=Ky(p,i);s&&g.setAttribute("nonce",s),this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost&&this.sharedStylesHost.removeHost(this.shadowRoot)}},kc=class extends Oc{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,i,o,s,a,u){super(e,o,s,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i;let l=r.styles;this.styles=u?WT(u,l):l,this.styleUrls=r.getExternalStyles?.(u)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&ao.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},rf=class extends kc{contentAttr;hostAttr;constructor(e,t,r,i,o,s,a,u){let l=i+"-"+r.id;super(e,t,r,o,s,a,u,l),this.contentAttr=n2(l),this.hostAttr=r2(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}};var sf=class n extends Sc{supportsDOMEvents=!0;static makeCurrent(){ky(new n)}onAndCancel(e,t,r,i){return e.addEventListener(t,r,i),()=>{e.removeEventListener(t,r,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=i2();return t==null?null:o2(t)}resetBaseElement(){Fc=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return qy(document.cookie,e)}},Fc=null;function i2(){return Fc=Fc||document.head.querySelector("base"),Fc?Fc.getAttribute("href"):null}function o2(n){return new URL(n,document.baseURI).pathname}var s2=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ee({token:n,factory:n.\u0275fac})}return n})(),KT=["alt","control","meta","shift"],a2={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},c2={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},QT=(()=>{class n extends Pc{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i,o){let s=n.parseEventName(r),a=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>fn().onAndCancel(t,s.domEventName,a,o))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),KT.forEach(l=>{let f=r.indexOf(l);f>-1&&(r.splice(f,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let u={};return u.domEventName=i,u.fullKey=s,u}static matchEventFullKeyCode(t,r){let i=a2[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),KT.forEach(s=>{if(s!==i){let a=c2[s];a(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)(ue(lt))};static \u0275prov=ee({token:n,factory:n.\u0275fac})}return n})();async function Xy(n,e,t){let r=L({rootComponent:n},u2(e,t));return ET(r)}function u2(n,e){return{platformRef:e?.platformRef,appProviders:[...p2,...n?.providers??[]],platformProviders:h2}}function l2(){sf.makeCurrent()}function d2(){return new mr}function f2(){return ny(document),document}var h2=[{provide:vc,useValue:HT},{provide:Ad,useValue:l2,multi:!0},{provide:lt,useFactory:f2}];var p2=[{provide:ec,useValue:"root"},{provide:mr,useFactory:d2},{provide:of,useClass:tf,multi:!0},{provide:of,useClass:QT,multi:!0},Jy,Yy,Qy,{provide:co,useExisting:Jy},{provide:Nc,useClass:s2},[]];var YT=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(r){return new(r||n)(ue(lt))};static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var ae="primary",Wc=Symbol("RouteTitle"),iv=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function xs(n){return new iv(n)}function ev(n,e,t){for(let r=0;r<n.length;r++){let i=n[r],o=e[r];if(i[0]===":")t[i.substring(1)]=o;else if(i!==o.path)return!1}return!0}function m2(n,e,t){let r=t.path.split("/"),i=r.indexOf("**");if(i===-1){if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let u={},l=n.slice(0,r.length);return ev(r,l,u)?{consumed:l,posParams:u}:null}if(i!==r.lastIndexOf("**"))return null;let o=r.slice(0,i),s=r.slice(i+1);if(o.length+s.length>n.length||t.pathMatch==="full"&&e.hasChildren()&&t.path!=="**")return null;let a={};return!ev(o,n.slice(0,o.length),a)||!ev(s,n.slice(n.length-s.length),a)?null:{consumed:n,posParams:a}}function ff(n){return new Promise((e,t)=>{n.pipe(fr()).subscribe({next:r=>e(r),error:r=>t(r)})})}function y2(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Kn(n[t],e[t]))return!1;return!0}function Kn(n,e){let t=n?ov(n):void 0,r=e?ov(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!sS(n[i],e[i]))return!1;return!0}function ov(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function sS(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function v2(n){return n.length>0?n[n.length-1]:null}function Do(n){return xl(n)?n:ui(n)?Ze(Promise.resolve(n)):ge(n)}function aS(n){return xl(n)?ff(n):Promise.resolve(n)}var _2={exact:uS,subset:lS},cS={exact:E2,subset:w2,ignored:()=>!0};function ZT(n,e,t){return _2[t.paths](n.root,e.root,t.matrixParams)&&cS[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function E2(n,e){return Kn(n,e)}function uS(n,e,t){if(!Io(n.segments,e.segments)||!uf(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!uS(n.children[r],e.children[r],t))return!1;return!0}function w2(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>sS(n[t],e[t]))}function lS(n,e,t){return dS(n,e,e.segments,t)}function dS(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!Io(i,t)||e.hasChildren()||!uf(i,t,r))}else if(n.segments.length===t.length){if(!Io(n.segments,t)||!uf(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!lS(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!Io(n.segments,i)||!uf(n.segments,i,r)||!n.children[ae]?!1:dS(n.children[ae],e,o,r)}}function uf(n,e,t){return e.every((r,i)=>cS[t](n[i].parameters,r.parameters))}var Qn=class{root;queryParams;fragment;_queryParamMap;constructor(e=new Se([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=xs(this.queryParams),this._queryParamMap}toString(){return b2.serialize(this)}},Se=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return lf(this)}},wo=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=xs(this.parameters),this._parameterMap}toString(){return hS(this)}};function I2(n,e){return Io(n,e)&&n.every((t,r)=>Kn(t.parameters,e[r].parameters))}function Io(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function C2(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===ae&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==ae&&(t=t.concat(e(i,r)))}),t}var If=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=ee({token:n,factory:()=>new Co,providedIn:"root"})}return n})(),Co=class{parse(e){let t=new av(e);return new Qn(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${Lc(e.root,!0)}`,r=S2(e.queryParams),i=typeof e.fragment=="string"?`#${D2(e.fragment)}`:"";return`${t}${r}${i}`}},b2=new Co;function lf(n){return n.segments.map(e=>hS(e)).join("/")}function Lc(n,e){if(!n.hasChildren())return lf(n);if(e){let t=n.children[ae]?Lc(n.children[ae],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==ae&&r.push(`${i}:${Lc(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=C2(n,(r,i)=>i===ae?[Lc(n.children[ae],!1)]:[`${i}:${Lc(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[ae]!=null?`${lf(n)}/${t[0]}`:`${lf(n)}/(${t.join("//")})`}}function fS(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function af(n){return fS(n).replace(/%3B/gi,";")}function D2(n){return encodeURI(n)}function sv(n){return fS(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function df(n){return decodeURIComponent(n)}function JT(n){return df(n.replace(/\+/g,"%20"))}function hS(n){return`${sv(n.path)}${T2(n.parameters)}`}function T2(n){return Object.entries(n).map(([e,t])=>`;${sv(e)}=${sv(t)}`).join("")}function S2(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${af(t)}=${af(i)}`).join("&"):`${af(t)}=${af(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var A2=/^[^\/()?;#]+/;function tv(n){let e=n.match(A2);return e?e[0]:""}var x2=/^[^\/()?;=#]+/;function R2(n){let e=n.match(x2);return e?e[0]:""}var M2=/^[^=?&#]+/;function N2(n){let e=n.match(M2);return e?e[0]:""}var P2=/^[^&#]+/;function O2(n){let e=n.match(P2);return e?e[0]:""}var av=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Se([],{}):new Se([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[ae]=new Se(e,t)),r}parseSegment(){let e=tv(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new $(4009,!1);return this.capture(e),new wo(df(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=R2(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=tv(this.remaining);i&&(r=i,this.capture(r))}e[df(t)]=df(r)}parseQueryParam(e){let t=N2(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=O2(this.remaining);s&&(r=s,this.capture(r))}let i=JT(t),o=JT(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=tv(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new $(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=ae);let s=this.parseChildren();t[o??ae]=Object.keys(s).length===1&&s[ae]?s[ae]:new Se([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new $(4011,!1)}};function pS(n){return n.segments.length>0?new Se([],{[ae]:n}):n}function gS(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=gS(i);if(r===ae&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new Se(n.segments,e);return k2(t)}function k2(n){if(n.numberOfChildren===1&&n.children[ae]){let e=n.children[ae];return new Se(n.segments.concat(e.segments),e.children)}return n}function Rs(n){return n instanceof Qn}function F2(n,e,t=null,r=null,i=new Co){let o=mS(n);return yS(o,e,t,r,i)}function mS(n){let e;function t(o){let s={};for(let u of o.children){let l=t(u);s[u.outlet]=l}let a=new Se(o.url,s);return o===n&&(e=a),a}let r=t(n.root),i=pS(r);return e??i}function yS(n,e,t,r,i){let o=n;for(;o.parent;)o=o.parent;if(e.length===0)return nv(o,o,o,t,r,i);let s=L2(e);if(s.toRoot())return nv(o,o,new Se([],{}),t,r,i);let a=V2(s,o,n),u=a.processChildren?Uc(a.segmentGroup,a.index,s.commands):_S(a.segmentGroup,a.index,s.commands);return nv(o,a.segmentGroup,u,t,r,i)}function hf(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Hc(n){return typeof n=="object"&&n!=null&&n.outlets}function XT(n,e,t){n||="\u0275";let r=new Qn;return r.queryParams={[n]:e},t.parse(t.serialize(r)).queryParams[n]}function nv(n,e,t,r,i,o){let s={};for(let[l,f]of Object.entries(r??{}))s[l]=Array.isArray(f)?f.map(p=>XT(l,p,o)):XT(l,f,o);let a;n===e?a=t:a=vS(n,e,t);let u=pS(gS(a));return new Qn(u,s,i)}function vS(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=vS(o,e,t)}),new Se(n.segments,r)}var pf=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&hf(r[0]))throw new $(4003,!1);let i=r.find(Hc);if(i&&i!==v2(r))throw new $(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function L2(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new pf(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([u,l])=>{a[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new pf(t,e,r)}var Ts=class{segmentGroup;processChildren;index;constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function V2(n,e,t){if(n.isAbsolute)return new Ts(e,!0,0);if(!t)return new Ts(e,!1,NaN);if(t.parent===null)return new Ts(t,!0,0);let r=hf(n.commands[0])?0:1,i=t.segments.length-1+r;return U2(t,i,n.numberOfDoubleDots)}function U2(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new $(4005,!1);i=r.segments.length}return new Ts(r,!1,i-o)}function j2(n){return Hc(n[0])?n[0].outlets:{[ae]:n}}function _S(n,e,t){if(n??=new Se([],{}),n.segments.length===0&&n.hasChildren())return Uc(n,e,t);let r=B2(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new Se(n.segments.slice(0,r.pathIndex),{});return o.children[ae]=new Se(n.segments.slice(r.pathIndex),n.children),Uc(o,0,i)}else return r.match&&i.length===0?new Se(n.segments,{}):r.match&&!n.hasChildren()?cv(n,e,t):r.match?Uc(n,0,i):cv(n,e,t)}function Uc(n,e,t){if(t.length===0)return new Se(n.segments,{});{let r=j2(t),i={};if(Object.keys(r).some(o=>o!==ae)&&n.children[ae]&&n.numberOfChildren===1&&n.children[ae].segments.length===0){let o=Uc(n.children[ae],e,t);return new Se(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=_S(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new Se(n.segments,i)}}function B2(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let s=n.segments[i],a=t[r];if(Hc(a))break;let u=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!tS(u,l,s))return o;r+=2}else{if(!tS(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function cv(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(Hc(o)){let u=H2(o.outlets);return new Se(r,u)}if(i===0&&hf(t[0])){let u=n.segments[e];r.push(new wo(u.path,eS(t[0]))),i++;continue}let s=Hc(o)?o.outlets[ae]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&hf(a)?(r.push(new wo(s,eS(a))),i+=2):(r.push(new wo(s,{})),i++)}return new Se(r,{})}function H2(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=cv(new Se([],{}),0,r))}),e}function eS(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function tS(n,e,t){return n==t.path&&Kn(e,t.parameters)}var jc="imperative",wt=(function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n})(wt||{}),pn=class{id;url;constructor(e,t){this.id=e,this.url=t}},Ms=class extends pn{type=wt.NavigationStart;navigationTrigger;restoredState;constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},fi=class extends pn{urlAfterRedirects;type=wt.NavigationEnd;constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Bt=(function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n[n.Aborted=4]="Aborted",n})(Bt||{}),gf=(function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n})(gf||{}),Mn=class extends pn{reason;code;type=wt.NavigationCancel;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}};function ES(n){return n instanceof Mn&&(n.code===Bt.Redirect||n.code===Bt.SupersededByNewNavigation)}var hi=class extends pn{reason;code;type=wt.NavigationSkipped;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}},Ns=class extends pn{error;target;type=wt.NavigationError;constructor(e,t,r,i){super(e,t),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},$c=class extends pn{urlAfterRedirects;state;type=wt.RoutesRecognized;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},uv=class extends pn{urlAfterRedirects;state;type=wt.GuardsCheckStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},lv=class extends pn{urlAfterRedirects;state;shouldActivate;type=wt.GuardsCheckEnd;constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},dv=class extends pn{urlAfterRedirects;state;type=wt.ResolveStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},fv=class extends pn{urlAfterRedirects;state;type=wt.ResolveEnd;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},hv=class{route;type=wt.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},pv=class{route;type=wt.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},gv=class{snapshot;type=wt.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},mv=class{snapshot;type=wt.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},yv=class{snapshot;type=wt.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},vv=class{snapshot;type=wt.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Ps=class{},Os=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function $2(n){return!(n instanceof Ps)&&!(n instanceof Os)}var _v=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return this.route?.snapshot._environmentInjector??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new Kc(this.rootInjector)}},Kc=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new _v(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(r){return new(r||n)(ue(ct))};static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),mf=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=Ev(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=Ev(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=wv(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return wv(e,this._root).map(t=>t.value)}};function Ev(n,e){if(n===e.value)return e;for(let t of e.children){let r=Ev(n,t);if(r)return r}return null}function wv(n,e){if(n===e.value)return[e];for(let t of e.children){let r=wv(n,t);if(r.length)return r.unshift(e),r}return[]}var Xt=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function Ds(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var yf=class extends mf{snapshot;constructor(e,t){super(e),this.snapshot=t,Rv(this,e)}toString(){return this.snapshot.toString()}};function wS(n,e){let t=z2(n,e),r=new vt([new wo("",{})]),i=new vt({}),o=new vt({}),s=new vt({}),a=new vt(""),u=new bo(r,i,s,a,o,ae,n,t.root);return u.snapshot=t.root,new yf(new Xt(u,[]),t)}function z2(n,e){let t={},r={},i={},s=new Ss([],t,i,"",r,ae,n,null,{},e);return new _f("",new Xt(s,[]))}var bo=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,r,i,o,s,a,u){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(Ve(l=>l[Wc]))??ge(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Ve(e=>xs(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Ve(e=>xs(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function vf(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:L(L({},e.params),n.params),data:L(L({},e.data),n.data),resolve:L(L(L(L({},n.data),e.data),i?.data),n._resolvedData)}:r={params:L({},n.params),data:L({},n.data),resolve:L(L({},n.data),n._resolvedData??{})},i&&CS(i)&&(r.resolve[Wc]=i.title),r}var Ss=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;_environmentInjector;get title(){return this.data?.[Wc]}constructor(e,t,r,i,o,s,a,u,l,f){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=u,this._resolve=l,this._environmentInjector=f}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=xs(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=xs(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},_f=class extends mf{url;constructor(e,t){super(t),this.url=e,Rv(this,t)}toString(){return IS(this._root)}};function Rv(n,e){e.value._routerState=n,e.children.forEach(t=>Rv(n,t))}function IS(n){let e=n.children.length>0?` { ${n.children.map(IS).join(", ")} } `:"";return`${n.value}${e}`}function rv(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Kn(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Kn(e.params,t.params)||n.paramsSubject.next(t.params),y2(e.url,t.url)||n.urlSubject.next(t.url),Kn(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function Iv(n,e){let t=Kn(n.params,e.params)&&I2(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||Iv(n.parent,e.parent))}function CS(n){return typeof n.title=="string"||n.title===null}var q2=new G(""),bS=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=ae;activateEvents=new Je;deactivateEvents=new Je;attachEvents=new Je;detachEvents=new Je;routerOutletData=_T();parentContexts=V(Kc);location=V(Cr);changeDetector=V(Tc);inputBinder=V(Cf,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new $(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new $(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new $(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new $(4013,!1);this._activatedRoute=t;let i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new Cv(t,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:u,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=qe({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[fo]})}return n})(),Cv=class{route;childContexts;parent;outletData;constructor(e,t,r,i){this.route=e,this.childContexts=t,this.parent=r,this.outletData=i}get(e,t){return e===bo?this.route:e===Kc?this.childContexts:e===q2?this.outletData:this.parent.get(e,t)}},Cf=new G("");var DS=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=Ic({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&br(0,"router-outlet")},dependencies:[bS],encapsulation:2})}return n})();function Mv(n){let e=n.children&&n.children.map(Mv),t=e?ne(L({},n),{children:e}):L({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==ae&&(t.component=DS),t}function G2(n,e,t){let r=zc(n,e._root,t?t._root:void 0);return new yf(r,e)}function zc(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=W2(n,e,t);return new Xt(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>zc(n,a)),s}}let r=K2(e.value),i=e.children.map(o=>zc(n,o));return new Xt(r,i)}}function W2(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return zc(n,r,i);return zc(n,r)})}function K2(n){return new bo(new vt(n.url),new vt(n.params),new vt(n.queryParams),new vt(n.fragment),new vt(n.data),n.outlet,n.component,n)}var qc=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},TS="ngNavigationCancelingError";function Ef(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=Rs(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=SS(!1,Bt.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function SS(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[TS]=!0,t.cancellationCode=e,t}function Q2(n){return AS(n)&&Rs(n.url)}function AS(n){return!!n&&n[TS]}var bv=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),rv(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=Ds(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Ds(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Ds(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=Ds(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new vv(o.value.snapshot))}),e.children.length&&this.forwardEvent(new mv(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(rv(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),rv(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},wf=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},As=class{component;route;constructor(e,t){this.component=e,this.route=t}};function Y2(n,e,t){let r=n._root,i=e?e._root:null;return Vc(r,i,t,[r.value])}function Z2(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function Fs(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!Tg(n)?n:e.get(n):r}function Vc(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=Ds(e);return n.children.forEach(s=>{J2(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>Bc(a,t.getContext(s),i)),i}function J2(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let u=X2(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new wf(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Vc(n,e,a?a.children:null,r,i):Vc(n,e,t,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new As(a.outlet.component,s))}else s&&Bc(e,a,i),i.canActivateChecks.push(new wf(r)),o.component?Vc(n,null,a?a.children:null,r,i):Vc(n,null,t,r,i);return i}function X2(n,e,t){if(typeof t=="function")return At(e._environmentInjector,()=>t(n,e));switch(t){case"pathParamsChange":return!Io(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Io(n.url,e.url)||!Kn(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Iv(n,e)||!Kn(n.queryParams,e.queryParams);default:return!Iv(n,e)}}function Bc(n,e,t){let r=Ds(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?e?Bc(s,e.children.getContext(o),t):Bc(s,null,t):Bc(s,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new As(e.outlet.component,i)):t.canDeactivateChecks.push(new As(null,i)):t.canDeactivateChecks.push(new As(null,i))}function Qc(n){return typeof n=="function"}function eV(n){return typeof n=="boolean"}function tV(n){return n&&Qc(n.canLoad)}function nV(n){return n&&Qc(n.canActivate)}function rV(n){return n&&Qc(n.canActivateChild)}function iV(n){return n&&Qc(n.canDeactivate)}function oV(n){return n&&Qc(n.canMatch)}function xS(n){return n instanceof zi||n?.name==="EmptyError"}var cf=Symbol("INITIAL_VALUE");function ks(){return hr(n=>sg(n.map(e=>e.pipe(dr(1),ug(cf)))).pipe(Ve(e=>{for(let t of e)if(t!==!0){if(t===cf)return cf;if(t===!1||sV(t))return t}return!0}),lr(e=>e!==cf),dr(1)))}function sV(n){return Rs(n)||n instanceof qc}function RS(n){return n.aborted?ge(void 0).pipe(dr(1)):new ye(e=>{let t=()=>{e.next(),e.complete()};return n.addEventListener("abort",t),()=>n.removeEventListener("abort",t)})}function MS(n){return za(RS(n))}function aV(n){return Lt(e=>{let{targetSnapshot:t,currentSnapshot:r,guards:{canActivateChecks:i,canDeactivateChecks:o}}=e;return o.length===0&&i.length===0?ge(ne(L({},e),{guardsResult:!0})):cV(o,t,r).pipe(Lt(s=>s&&eV(s)?uV(t,i,n):ge(s)),Ve(s=>ne(L({},e),{guardsResult:s})))})}function cV(n,e,t){return Ze(n).pipe(Lt(r=>pV(r.component,r.route,t,e)),fr(r=>r!==!0,!0))}function uV(n,e,t){return Ze(e).pipe(Pl(r=>ns(dV(r.route.parent,t),lV(r.route,t),hV(n,r.path),fV(n,r.route))),fr(r=>r!==!0,!0))}function lV(n,e){return n!==null&&e&&e(new yv(n)),ge(!0)}function dV(n,e){return n!==null&&e&&e(new gv(n)),ge(!0)}function fV(n,e){let t=e.routeConfig?e.routeConfig.canActivate:null;if(!t||t.length===0)return ge(!0);let r=t.map(i=>Ha(()=>{let o=e._environmentInjector,s=Fs(i,o),a=nV(s)?s.canActivate(e,n):At(o,()=>s(e,n));return Do(a).pipe(fr())}));return ge(r).pipe(ks())}function hV(n,e){let t=e[e.length-1],i=e.slice(0,e.length-1).reverse().map(o=>Z2(o)).filter(o=>o!==null).map(o=>Ha(()=>{let s=o.guards.map(a=>{let u=o.node._environmentInjector,l=Fs(a,u),f=rV(l)?l.canActivateChild(t,n):At(u,()=>l(t,n));return Do(f).pipe(fr())});return ge(s).pipe(ks())}));return ge(i).pipe(ks())}function pV(n,e,t,r){let i=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!i||i.length===0)return ge(!0);let o=i.map(s=>{let a=e._environmentInjector,u=Fs(s,a),l=iV(u)?u.canDeactivate(n,e,t,r):At(a,()=>u(n,e,t,r));return Do(l).pipe(fr())});return ge(o).pipe(ks())}function gV(n,e,t,r,i){let o=e.canLoad;if(o===void 0||o.length===0)return ge(!0);let s=o.map(a=>{let u=Fs(a,n),l=tV(u)?u.canLoad(e,t):At(n,()=>u(e,t)),f=Do(l);return i?f.pipe(MS(i)):f});return ge(s).pipe(ks(),NS(r))}function NS(n){return tg(Fn(e=>{if(typeof e!="boolean")throw Ef(n,e)}),Ve(e=>e===!0))}function mV(n,e,t,r,i){let o=e.canMatch;if(!o||o.length===0)return ge(!0);let s=o.map(a=>{let u=Fs(a,n),l=oV(u)?u.canMatch(e,t):At(n,()=>u(e,t));return Do(l).pipe(MS(i))});return ge(s).pipe(ks(),NS(r))}var xr=class n extends Error{segmentGroup;constructor(e){super(),this.segmentGroup=e||null,Object.setPrototypeOf(this,n.prototype)}},Gc=class n extends Error{urlTree;constructor(e){super(),this.urlTree=e,Object.setPrototypeOf(this,n.prototype)}};function yV(n){throw new $(4e3,!1)}function vV(n){throw SS(!1,Bt.GuardRejected)}var Dv=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}async lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return r;if(i.numberOfChildren>1||!i.children[ae])throw yV(`${e.redirectTo}`);i=i.children[ae]}}async applyRedirectCommands(e,t,r,i,o){let s=await _V(t,i,o);if(s instanceof Qn)throw new Gc(s);let a=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),e,r);if(s[0]==="/")throw new Gc(a);return a}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new Qn(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),s={};return Object.entries(t.children).forEach(([a,u])=>{s[a]=this.createSegmentGroup(e,u,r,i)}),new Se(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new $(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}};function _V(n,e,t){if(typeof n=="string")return Promise.resolve(n);let r=n,{queryParams:i,fragment:o,routeConfig:s,url:a,outlet:u,params:l,data:f,title:p,paramMap:g,queryParamMap:y}=e;return ff(Do(At(t,()=>r({params:l,data:f,queryParams:i,fragment:o,routeConfig:s,url:a,outlet:u,title:p,paramMap:g,queryParamMap:y}))))}function EV(n,e){return n.providers&&!n._injector&&(n._injector=wc(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Rn(n){return n.outlet||ae}function wV(n,e){let t=n.filter(r=>Rn(r)===e);return t.push(...n.filter(r=>Rn(r)!==e)),t}var Tv={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function IV(n,e,t,r,i,o){let s=PS(n,e,t);return s.matched?(r=EV(e,r),mV(r,e,t,i,o).pipe(Ve(a=>a===!0?s:L({},Tv)))):ge(s)}function PS(n,e,t){if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?L({},Tv):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||m2)(t,n,e);if(!i)return L({},Tv);let o={};Object.entries(i.posParams??{}).forEach(([a,u])=>{o[a]=u.path});let s=i.consumed.length>0?L(L({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function nS(n,e,t,r){return t.length>0&&DV(n,t,r)?{segmentGroup:new Se(e,bV(r,new Se(t,n.children))),slicedSegments:[]}:t.length===0&&TV(n,t,r)?{segmentGroup:new Se(n.segments,CV(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Se(n.segments,n.children),slicedSegments:t}}function CV(n,e,t,r){let i={};for(let o of t)if(bf(n,e,o)&&!r[Rn(o)]){let s=new Se([],{});i[Rn(o)]=s}return L(L({},r),i)}function bV(n,e){let t={};t[ae]=e;for(let r of n)if(r.path===""&&Rn(r)!==ae){let i=new Se([],{});t[Rn(r)]=i}return t}function DV(n,e,t){return t.some(r=>bf(n,e,r)&&Rn(r)!==ae)}function TV(n,e,t){return t.some(r=>bf(n,e,r))}function bf(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function SV(n,e,t){return e.length===0&&!n.children[t]}var Sv=class{};async function AV(n,e,t,r,i,o,s="emptyOnly",a){return new Av(n,e,t,r,i,s,o,a).recognize()}var xV=31,Av=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;abortSignal;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,r,i,o,s,a,u){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.abortSignal=u,this.applyRedirects=new Dv(this.urlSerializer,this.urlTree)}noMatchError(e){return new $(4002,`'${e.segmentGroup}'`)}async recognize(){let e=nS(this.urlTree.root,[],[],this.config).segmentGroup,{children:t,rootSnapshot:r}=await this.match(e),i=new Xt(r,t),o=new _f("",i),s=F2(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}async match(e){let t=new Ss([],Object.freeze({}),Object.freeze(L({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),ae,this.rootComponentType,null,{},this.injector);try{return{children:await this.processSegmentGroup(this.injector,this.config,e,ae,t),rootSnapshot:t}}catch(r){if(r instanceof Gc)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof xr?this.noMatchError(r):r}}async processSegmentGroup(e,t,r,i,o){if(r.segments.length===0&&r.hasChildren())return this.processChildren(e,t,r,o);let s=await this.processSegment(e,t,r,r.segments,i,!0,o);return s instanceof Xt?[s]:[]}async processChildren(e,t,r,i){let o=[];for(let u of Object.keys(r.children))u==="primary"?o.unshift(u):o.push(u);let s=[];for(let u of o){let l=r.children[u],f=wV(t,u),p=await this.processSegmentGroup(e,f,l,u,i);s.push(...p)}let a=OS(s);return RV(a),a}async processSegment(e,t,r,i,o,s,a){for(let u of t)try{return await this.processSegmentAgainstRoute(u._injector??e,t,u,r,i,o,s,a)}catch(l){if(l instanceof xr||xS(l))continue;throw l}if(SV(r,i,o))return new Sv;throw new xr(r)}async processSegmentAgainstRoute(e,t,r,i,o,s,a,u){if(Rn(r)!==s&&(s===ae||!bf(i,o,r)))throw new xr(i);if(r.redirectTo===void 0)return this.matchSegmentAgainstRoute(e,i,r,o,s,u);if(this.allowRedirects&&a)return this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s,u);throw new xr(i)}async expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s,a){let{matched:u,parameters:l,consumedSegments:f,positionalParamSegments:p,remainingSegments:g}=PS(t,i,o);if(!u)throw new xr(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>xV&&(this.allowRedirects=!1));let y=new Ss(o,l,Object.freeze(L({},this.urlTree.queryParams)),this.urlTree.fragment,rS(i),Rn(i),i.component??i._loadedComponent??null,i,iS(i),e),T=vf(y,a,this.paramsInheritanceStrategy);if(y.params=Object.freeze(T.params),y.data=Object.freeze(T.data),this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let P=await this.applyRedirects.applyRedirectCommands(f,i.redirectTo,p,y,e),N=await this.applyRedirects.lineralizeSegments(i,P);return this.processSegment(e,r,t,N.concat(g),s,!1,a)}async matchSegmentAgainstRoute(e,t,r,i,o,s){if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let a=await ff(IV(t,r,i,e,this.urlSerializer,this.abortSignal));if(r.path==="**"&&(t.children={}),!a?.matched)throw new xr(t);e=r._injector??e;let{routes:u}=await this.getChildConfig(e,r,i),l=r._loadedInjector??e,{parameters:f,consumedSegments:p,remainingSegments:g}=a,y=new Ss(p,f,Object.freeze(L({},this.urlTree.queryParams)),this.urlTree.fragment,rS(r),Rn(r),r.component??r._loadedComponent??null,r,iS(r),e),T=vf(y,s,this.paramsInheritanceStrategy);y.params=Object.freeze(T.params),y.data=Object.freeze(T.data);let{segmentGroup:P,slicedSegments:N}=nS(t,p,g,u);if(N.length===0&&P.hasChildren()){let re=await this.processChildren(l,u,P,y);return new Xt(y,re)}if(u.length===0&&N.length===0)return new Xt(y,[]);let j=Rn(r)===o,W=await this.processSegment(l,u,P,N,j?ae:o,!0,y);return new Xt(y,W instanceof Xt?[W]:[])}async getChildConfig(e,t,r){if(t.children)return{routes:t.children,injector:e};if(t.loadChildren){if(t._loadedRoutes!==void 0){let o=t._loadedNgModuleFactory;return o&&!t._loadedInjector&&(t._loadedInjector=o.create(e).injector),{routes:t._loadedRoutes,injector:t._loadedInjector}}if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);if(await ff(gV(e,t,r,this.urlSerializer,this.abortSignal))){let o=await this.configLoader.loadChildren(e,t);return t._loadedRoutes=o.routes,t._loadedInjector=o.injector,t._loadedNgModuleFactory=o.factory,o}throw vV(t)}return{routes:[],injector:e}}};function RV(n){n.sort((e,t)=>e.value.outlet===ae?-1:t.value.outlet===ae?1:e.value.outlet.localeCompare(t.value.outlet))}function MV(n){let e=n.value.routeConfig;return e&&e.path===""}function OS(n){let e=[],t=new Set;for(let r of n){if(!MV(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=OS(r.children);e.push(new Xt(r.value,i))}return e.filter(r=>!t.has(r))}function rS(n){return n.data||{}}function iS(n){return n.resolve||{}}function NV(n,e,t,r,i,o,s){return Lt(async a=>{let{state:u,tree:l}=await AV(n,e,t,r,a.extractedUrl,i,o,s);return ne(L({},a),{targetSnapshot:u,urlAfterRedirects:l})})}function PV(n){return Lt(e=>{let{targetSnapshot:t,guards:{canActivateChecks:r}}=e;if(!r.length)return ge(e);let i=new Set(r.map(a=>a.route)),o=new Set;for(let a of i)if(!o.has(a))for(let u of kS(a))o.add(u);let s=0;return Ze(o).pipe(Pl(a=>i.has(a)?OV(a,t,n):(a.data=vf(a,a.parent,n).resolve,ge(void 0))),Fn(()=>s++),Ol(1),Lt(a=>s===o.size?ge(e):_t))})}function kS(n){let e=n.children.map(t=>kS(t)).flat();return[n,...e]}function OV(n,e,t){let r=n.routeConfig,i=n._resolve;return r?.title!==void 0&&!CS(r)&&(i[Wc]=r.title),Ha(()=>(n.data=vf(n,n.parent,t).resolve,kV(i,n,e).pipe(Ve(o=>(n._resolvedData=o,n.data=L(L({},n.data),o),null)))))}function kV(n,e,t){let r=ov(n);if(r.length===0)return ge({});let i={};return Ze(r).pipe(Lt(o=>FV(n[o],e,t).pipe(fr(),Fn(s=>{if(s instanceof qc)throw Ef(new Co,s);i[o]=s}))),Ol(1),Ve(()=>i),$a(o=>xS(o)?_t:og(o)))}function FV(n,e,t){let r=e._environmentInjector,i=Fs(n,r),o=i.resolve?i.resolve(e,t):At(r,()=>i(e,t));return Do(o)}function oS(n){return hr(e=>{let t=n(e);return t?Ze(t).pipe(Ve(()=>e)):ge(e)})}var FS=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===ae);return r}getResolvedTitleForRoute(t){return t.data[Wc]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ee({token:n,factory:()=>V(LV),providedIn:"root"})}return n})(),LV=(()=>{class n extends FS{title;constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(ue(YT))};static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Df=new G("",{factory:()=>({})}),Tf=new G(""),LS=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=V(Ny);async loadComponent(t,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return Promise.resolve(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=(async()=>{try{let o=await aS(At(t,()=>r.loadComponent())),s=await US(VS(o));return this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s,s}finally{this.componentLoaders.delete(r)}})();return this.componentLoaders.set(r,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Promise.resolve({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let i=(async()=>{try{let o=await VV(r,this.compiler,t,this.onLoadEndListener);return r._loadedRoutes=o.routes,r._loadedInjector=o.injector,r._loadedNgModuleFactory=o.factory,o}finally{this.childrenLoaders.delete(r)}})();return this.childrenLoaders.set(r,i),i}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();async function VV(n,e,t,r){let i=await aS(At(t,()=>n.loadChildren())),o=await US(VS(i)),s;o instanceof Ud||Array.isArray(o)?s=o:s=await e.compileModuleAsync(o),r&&r(n);let a,u,l=!1,f;return Array.isArray(s)?(u=s,l=!0):(a=s.create(t).injector,f=s,u=a.get(Tf,[],{optional:!0,self:!0}).flat()),{routes:u.map(Mv),injector:a,factory:f}}function UV(n){return n&&typeof n=="object"&&"default"in n}function VS(n){return UV(n)?n.default:n}async function US(n){return n}var Nv=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=ee({token:n,factory:()=>V(jV),providedIn:"root"})}return n})(),jV=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),jS=new G("");var BV=()=>{},BS=new G(""),HS=(()=>{class n{currentNavigation=te(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=te(null);events=new at;transitionAbortWithErrorSubject=new at;configLoader=V(LS);environmentInjector=V(ct);destroyRef=V(Hn);urlSerializer=V(If);rootContexts=V(Kc);location=V(bs);inputBindingEnabled=V(Cf,{optional:!0})!==null;titleStrategy=V(FS);options=V(Df,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=V(Nv);createViewTransition=V(jS,{optional:!0});navigationErrorHandler=V(BS,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>ge(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=i=>this.events.next(new hv(i)),r=i=>this.events.next(new pv(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;dt(()=>{this.transitions?.next(ne(L({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,id:r}))})}setupNavigations(t){return this.transitions=new vt(null),this.transitions.pipe(lr(r=>r!==null),hr(r=>{let i=!1,o=new AbortController,s=()=>!i&&this.currentTransition?.id===r.id;return ge(r).pipe(hr(a=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",Bt.SupersededByNewNavigation),_t;this.currentTransition=r;let u=this.lastSuccessfulNavigation();this.currentNavigation.set({id:a.id,initialUrl:a.rawUrl,extractedUrl:a.extractedUrl,targetBrowserUrl:typeof a.extras.browserUrl=="string"?this.urlSerializer.parse(a.extras.browserUrl):a.extras.browserUrl,trigger:a.source,extras:a.extras,previousNavigation:u?ne(L({},u),{previousNavigation:null}):null,abort:()=>o.abort()});let l=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),f=a.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!l&&f!=="reload")return this.events.next(new hi(a.id,this.urlSerializer.serialize(a.rawUrl),"",gf.IgnoredSameUrlNavigation)),a.resolve(!1),_t;if(this.urlHandlingStrategy.shouldProcessUrl(a.rawUrl))return ge(a).pipe(hr(p=>(this.events.next(new Ms(p.id,this.urlSerializer.serialize(p.extractedUrl),p.source,p.restoredState)),p.id!==this.navigationId?_t:Promise.resolve(p))),NV(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy,o.signal),Fn(p=>{r.targetSnapshot=p.targetSnapshot,r.urlAfterRedirects=p.urlAfterRedirects,this.currentNavigation.update(y=>(y.finalUrl=p.urlAfterRedirects,y));let g=new $c(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(g)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(a.currentRawUrl)){let{id:p,extractedUrl:g,source:y,restoredState:T,extras:P}=a,N=new Ms(p,this.urlSerializer.serialize(g),y,T);this.events.next(N);let j=wS(this.rootComponentType,this.environmentInjector).snapshot;return this.currentTransition=r=ne(L({},a),{targetSnapshot:j,urlAfterRedirects:g,extras:ne(L({},P),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(W=>(W.finalUrl=g,W)),ge(r)}else return this.events.next(new hi(a.id,this.urlSerializer.serialize(a.extractedUrl),"",gf.IgnoredByUrlHandlingStrategy)),a.resolve(!1),_t}),Ve(a=>{let u=new uv(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);return this.events.next(u),this.currentTransition=r=ne(L({},a),{guards:Y2(a.targetSnapshot,a.currentSnapshot,this.rootContexts)}),r}),aV(a=>this.events.next(a)),hr(a=>{if(r.guardsResult=a.guardsResult,a.guardsResult&&typeof a.guardsResult!="boolean")throw Ef(this.urlSerializer,a.guardsResult);let u=new lv(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot,!!a.guardsResult);if(this.events.next(u),!s())return _t;if(!a.guardsResult)return this.cancelNavigationTransition(a,"",Bt.GuardRejected),_t;if(a.guards.canActivateChecks.length===0)return ge(a);let l=new dv(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);if(this.events.next(l),!s())return _t;let f=!1;return ge(a).pipe(PV(this.paramsInheritanceStrategy),Fn({next:()=>{f=!0;let p=new fv(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(p)},complete:()=>{f||this.cancelNavigationTransition(a,"",Bt.NoDataFromResolver)}}))}),oS(a=>{let u=f=>{let p=[];if(f.routeConfig?._loadedComponent)f.component=f.routeConfig?._loadedComponent;else if(f.routeConfig?.loadComponent){let g=f._environmentInjector;p.push(this.configLoader.loadComponent(g,f.routeConfig).then(y=>{f.component=y}))}for(let g of f.children)p.push(...u(g));return p},l=u(a.targetSnapshot.root);return l.length===0?ge(a):Ze(Promise.all(l).then(()=>a))}),oS(()=>this.afterPreactivation()),hr(()=>{let{currentSnapshot:a,targetSnapshot:u}=r,l=this.createViewTransition?.(this.environmentInjector,a.root,u.root);return l?Ze(l).pipe(Ve(()=>r)):ge(r)}),dr(1),Ve(a=>{let u=G2(t.routeReuseStrategy,a.targetSnapshot,a.currentRouterState);this.currentTransition=r=a=ne(L({},a),{targetRouterState:u}),this.currentNavigation.update(l=>(l.targetRouterState=u,l)),this.events.next(new Ps),s()&&(new bv(t.routeReuseStrategy,r.targetRouterState,r.currentRouterState,l=>this.events.next(l),this.inputBindingEnabled).activate(this.rootContexts),s()&&(i=!0,this.currentNavigation.update(l=>(l.abort=BV,l)),this.lastSuccessfulNavigation.set(dt(this.currentNavigation)),this.events.next(new fi(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects))),this.titleStrategy?.updateTitle(a.targetRouterState.snapshot),a.resolve(!0)))}),za(RS(o.signal).pipe(lr(()=>!i&&!r.targetRouterState),Fn(()=>{this.cancelNavigationTransition(r,o.signal.reason+"",Bt.Aborted)}))),Fn({complete:()=>{i=!0}}),za(this.transitionAbortWithErrorSubject.pipe(Fn(a=>{throw a}))),cg(()=>{o.abort(),i||this.cancelNavigationTransition(r,"",Bt.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),$a(a=>{if(i=!0,this.destroyed)return r.resolve(!1),_t;if(AS(a))this.events.next(new Mn(r.id,this.urlSerializer.serialize(r.extractedUrl),a.message,a.cancellationCode)),Q2(a)?this.events.next(new Os(a.url,a.navigationBehaviorOptions)):r.resolve(!1);else{let u=new Ns(r.id,this.urlSerializer.serialize(r.extractedUrl),a,r.targetSnapshot??void 0);try{let l=At(this.environmentInjector,()=>this.navigationErrorHandler?.(u));if(l instanceof qc){let{message:f,cancellationCode:p}=Ef(this.urlSerializer,l);this.events.next(new Mn(r.id,this.urlSerializer.serialize(r.extractedUrl),f,p)),this.events.next(new Os(l.redirectTo,l.navigationBehaviorOptions))}else throw this.events.next(u),a}catch(l){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(l)}}return _t}))}))}cancelNavigationTransition(t,r,i){let o=new Mn(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=dt(this.currentNavigation),i=r?.targetBrowserUrl??r?.extractedUrl;return t.toString()!==i?.toString()&&!r?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function HV(n){return n!==jc}var $S=new G("");var $V=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=ee({token:n,factory:()=>V(zV),providedIn:"root"})}return n})(),xv=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}shouldDestroyInjector(e){return!0}},zV=(()=>{class n extends xv{static \u0275fac=(()=>{let t;return function(i){return(t||(t=qn(n)))(i||n)}})();static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Pv=(()=>{class n{urlSerializer=V(If);options=V(Df,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=V(bs);urlHandlingStrategy=V(Nv);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Qn;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:r,targetBrowserUrl:i}){let o=t!==void 0?this.urlHandlingStrategy.merge(t,r):r,s=i??o;return s instanceof Qn?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:t,finalUrl:r,initialUrl:i}){r&&t?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=t):this.rawUrlTree=i}routerState=wS(null,V(ct));getRouterState(){return this.routerState}_stateMemento=this.createStateMemento();get stateMemento(){return this._stateMemento}updateStateMemento(){this._stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}restoredState(){return this.location.getState()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ee({token:n,factory:()=>V(qV),providedIn:"root"})}return n})(),qV=(()=>{class n extends Pv{currentPageId=0;lastSuccessfulId=-1;get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{t(r.url,r.state,"popstate")})})}handleRouterEvent(t,r){t instanceof Ms?this.updateStateMemento():t instanceof hi?this.commitTransition(r):t instanceof $c?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof Ps?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof Mn&&!ES(t)?this.restoreHistory(r):t instanceof Ns?this.restoreHistory(r,!0):t instanceof fi&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(t)||o){let a=this.browserPageId,u=L(L({},s),this.generateNgRouterState(i,a));this.location.replaceState(t,"",u)}else{let a=L(L({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(t,"",a)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===t.finalUrl&&o===0&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=qn(n)))(i||n)}})();static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function zS(n,e){n.events.pipe(lr(t=>t instanceof fi||t instanceof Mn||t instanceof Ns||t instanceof hi),Ve(t=>t instanceof fi||t instanceof hi?0:(t instanceof Mn?t.code===Bt.Redirect||t.code===Bt.SupersededByNewNavigation:!1)?2:1),lr(t=>t!==2),dr(1)).subscribe(()=>{e()})}var qS={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},GS={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Ov=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=V(Cy);stateManager=V(Pv);options=V(Df,{optional:!0})||{};pendingTasks=V(ii);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=V(HS);urlSerializer=V(If);location=V(bs);urlHandlingStrategy=V(Nv);injector=V(ct);_events=new at;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=V($V);injectorCleanup=V($S,{optional:!0});onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=V(Tf,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!V(Cf,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{}}),this.subscribeToNavigationEvents()}eventsSubscription=new yt;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=dt(this.navigationTransitions.currentNavigation);if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof Mn&&r.code!==Bt.Redirect&&r.code!==Bt.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof fi)this.navigated=!0,this.injectorCleanup?.(this.routeReuseStrategy,this.routerState,this.config);else if(r instanceof Os){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),u=L({scroll:i.extras.scroll,browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||HV(i.source)},s);this.scheduleNavigation(a,jc,null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}$2(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),jc,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r,i)=>{this.navigateToSyncWithBrowser(t,i,r)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let u=L({},i);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(o.state=u)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o).catch(u=>{this.disposed||this.injector.get(Dn)(u)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return dt(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(Mv),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription?.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0,this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:s,f=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":f=L(L({},this.currentUrlTree.queryParams),o);break;case"preserve":f=this.currentUrlTree.queryParams;break;default:f=o||null}f!==null&&(f=this.removeEmptyProps(f));let p;try{let g=i?i.snapshot:this.routerState.snapshot.root;p=mS(g)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),p=this.currentUrlTree.root}return yS(p,t,f,l??null,this.urlSerializer)}navigateByUrl(t,r={skipLocationChange:!1}){let i=Rs(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,jc,null,r)}navigate(t,r={skipLocationChange:!1}){return GV(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.console.warn(os(4018,!1)),this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=L({},qS):r===!1?i=L({},GS):i=r,Rs(t))return ZT(this.currentUrlTree,t,i);let o=this.parseUrl(t);return ZT(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,u,l;s?(a=s.resolve,u=s.reject,l=s.promise):l=new Promise((p,g)=>{a=p,u=g});let f=this.pendingTasks.add();return zS(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(f))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function GV(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new $(4008,!1)}var WV=new G("");function kv(n,...e){return as([{provide:Tf,multi:!0,useValue:n},[],{provide:bo,useFactory:KV},{provide:jd,multi:!0,useFactory:QV},e.map(t=>t.\u0275providers)])}function KV(){return V(Ov).routerState.root}function QV(){let n=V(on);return e=>{let t=n.get(po);if(e!==t.components[0])return;let r=n.get(Ov),i=n.get(YV);n.get(ZV)===1&&r.initialNavigation(),n.get(JV,null,{optional:!0})?.setUpPreloading(),n.get(WV,null,{optional:!0})?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var YV=new G("",{factory:()=>new at}),ZV=new G("",{factory:()=>1});var JV=new G("");var WS=[];var KS={providers:[fm(),kv(WS)]};var rA=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,r){this._renderer=t,this._elementRef=r}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(r){return new(r||n)(ve(ws),ve(Gn))};static \u0275dir=qe({type:n})}return n})(),iA=(()=>{class n extends rA{static \u0275fac=(()=>{let t;return function(i){return(t||(t=qn(n)))(i||n)}})();static \u0275dir=qe({type:n,features:[Qt]})}return n})(),Vv=new G("");var eU={provide:Vv,useExisting:sn(()=>kf),multi:!0};function tU(){let n=fn()?fn().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var nU=new G(""),kf=(()=>{class n extends rA{_compositionMode;_composing=!1;constructor(t,r,i){super(t,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!tU())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(r){return new(r||n)(ve(ws),ve(Gn),ve(nU,8))};static \u0275dir=qe({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&K("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[Dr([eU]),Qt]})}return n})();function rU(n){return n==null||iU(n)===0}function iU(n){return n==null?null:Array.isArray(n)||typeof n=="string"?n.length:n instanceof Set?n.size:null}var nu=new G(""),oA=new G("");function oU(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function sU(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}function aU(n){return rU(n.value)?{required:!0}:null}function QS(n){return null}function sA(n){return n!=null}function aA(n){return ui(n)?Ze(n):n}function cA(n){let e={};return n.forEach(t=>{e=t!=null?L(L({},e),t):e}),Object.keys(e).length===0?null:e}function uA(n,e){return e.map(t=>t(n))}function cU(n){return!n.validate}function lA(n){return n.map(e=>cU(e)?e:t=>e.validate(t))}function uU(n){if(!n)return null;let e=n.filter(sA);return e.length==0?null:function(t){return cA(uA(t,e))}}function Uv(n){return n!=null?uU(lA(n)):null}function lU(n){if(!n)return null;let e=n.filter(sA);return e.length==0?null:function(t){let r=uA(t,e).map(aA);return ag(r).pipe(Ve(cA))}}function jv(n){return n!=null?lU(lA(n)):null}function YS(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function dU(n){return n._rawValidators}function fU(n){return n._rawAsyncValidators}function Fv(n){return n?Array.isArray(n)?n:[n]:[]}function Af(n,e){return Array.isArray(n)?n.includes(e):n===e}function ZS(n,e){let t=Fv(e);return Fv(n).forEach(i=>{Af(t,i)||t.push(i)}),t}function JS(n,e){return Fv(e).filter(t=>!Af(n,t))}var xf=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Uv(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=jv(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},Us=class extends xf{name;get formDirective(){return null}get path(){return null}},tu=class extends xf{_parent=null;name=null;valueAccessor=null},Rf=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}};var dA=(()=>{class n extends Rf{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(ve(tu,2))};static \u0275dir=qe({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&et("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[Qt]})}return n})(),fA=(()=>{class n extends Rf{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(ve(Us,10))};static \u0275dir=qe({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["","formArray",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&et("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[Qt]})}return n})();var Yc="VALID",Sf="INVALID",Ls="PENDING",Zc="DISABLED",pi=class{},Mf=class extends pi{value;source;constructor(e,t){super(),this.value=e,this.source=t}},Xc=class extends pi{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},eu=class extends pi{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},Vs=class extends pi{status;source;constructor(e,t){super(),this.status=e,this.source=t}},Lv=class extends pi{source;constructor(e){super(),this.source=e}},Nf=class extends pi{source;constructor(e){super(),this.source=e}};function hA(n){return(Ff(n)?n.validators:n)||null}function hU(n){return Array.isArray(n)?Uv(n):n||null}function pA(n,e){return(Ff(e)?e.asyncValidators:n)||null}function pU(n){return Array.isArray(n)?jv(n):n||null}function Ff(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function gU(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new $(1e3,"");if(!r[t])throw new $(1001,"")}function mU(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new $(1002,"")})}var Pf=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return dt(this.statusReactive)}set status(e){dt(()=>this.statusReactive.set(e))}_status=jt(()=>this.statusReactive());statusReactive=te(void 0);get valid(){return this.status===Yc}get invalid(){return this.status===Sf}get pending(){return this.status==Ls}get disabled(){return this.status===Zc}get enabled(){return this.status!==Zc}errors;get pristine(){return dt(this.pristineReactive)}set pristine(e){dt(()=>this.pristineReactive.set(e))}_pristine=jt(()=>this.pristineReactive());pristineReactive=te(!0);get dirty(){return!this.pristine}get touched(){return dt(this.touchedReactive)}set touched(e){dt(()=>this.touchedReactive.set(e))}_touched=jt(()=>this.touchedReactive());touchedReactive=te(!1);get untouched(){return!this.touched}_events=new at;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(ZS(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(ZS(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(JS(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(JS(e,this._rawAsyncValidators))}hasValidator(e){return Af(this._rawValidators,e)}hasAsyncValidator(e){return Af(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(ne(L({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new eu(!0,r))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new eu(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(ne(L({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Xc(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new Xc(!0,r))}markAsPending(e={}){this.status=Ls;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Vs(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(ne(L({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Zc,this.errors=null,this._forEachChild(i=>{i.disable(ne(L({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Mf(this.value,r)),this._events.next(new Vs(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(ne(L({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Yc,this._forEachChild(r=>{r.enable(ne(L({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(ne(L({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Yc||this.status===Ls)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Mf(this.value,t)),this._events.next(new Vs(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(ne(L({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Zc:Yc}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=Ls,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1,shouldHaveEmitted:e!==!1};let r=aA(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new Vs(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new Je,this.statusChanges=new Je}_calculateStatus(){return this._allControlsDisabled()?Zc:this.errors?Sf:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ls)?Ls:this._anyControlsHaveStatus(Sf)?Sf:Yc}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new Xc(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new eu(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Ff(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=hU(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=pU(this._rawAsyncValidators)}},Of=class extends Pf{constructor(e,t,r){super(hA(t),pA(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){mU(this,!0,e),Object.keys(e).forEach(r=>{gU(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,ne(L({},t),{onlySelf:!0}))}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t),t?.emitEvent!==!1&&this._events.next(new Nf(this))}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var Bv=new G("",{factory:()=>Hv}),Hv="always";function yU(n,e){return[...e.path,n]}function gA(n,e,t=Hv){mA(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),_U(n,e),wU(n,e),EU(n,e),vU(n,e)}function XS(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function vU(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function mA(n,e){let t=dU(n);e.validator!==null?n.setValidators(YS(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=fU(n);e.asyncValidator!==null?n.setAsyncValidators(YS(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();XS(e._rawValidators,i),XS(e._rawAsyncValidators,i)}function _U(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&yA(n,e)})}function EU(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&yA(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function yA(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function wU(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function IU(n,e){n==null,mA(n,e)}function CU(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function bU(n){return Object.getPrototypeOf(n.constructor)===iA}function DU(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function TU(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(o=>{o.constructor===kf?t=o:bU(o)?r=o:i=o}),i||r||t||null}var SU={provide:Us,useExisting:sn(()=>$v)},Jc=Promise.resolve(),$v=(()=>{class n extends Us{callSetDisabledState;get submitted(){return dt(this.submittedReactive)}_submitted=jt(()=>this.submittedReactive());submittedReactive=te(!1);_directives=new Set;form;ngSubmit=new Je;options;constructor(t,r,i){super(),this.callSetDisabledState=i,this.form=new Of({},Uv(t),jv(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Jc.then(()=>{let r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),gA(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Jc.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Jc.then(()=>{let r=this._findContainer(t.path),i=new Of({});IU(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Jc.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){Jc.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),DU(this.form,this._directives),this.ngSubmit.emit(t),this.form._events.next(new Lv(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static \u0275fac=function(r){return new(r||n)(ve(nu,10),ve(oA,10),ve(Bv,8))};static \u0275dir=qe({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup","",3,"formArray",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&K("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[Dr([SU]),Qt]})}return n})();function eA(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function tA(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var AU=class extends Pf{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,r){super(hA(t),pA(r,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Ff(t)&&(t.nonNullable||t.initialValueIsDefault)&&(tA(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),t.overwriteDefaultValue&&(this.defaultValue=this.value),this._pendingChange=!1,t?.emitEvent!==!1&&this._events.next(new Nf(this))}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){eA(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){eA(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){tA(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var xU={provide:tu,useExisting:sn(()=>zv)},nA=Promise.resolve(),zv=(()=>{class n extends tu{_changeDetectorRef;callSetDisabledState;control=new AU;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new Je;constructor(t,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=TU(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),CU(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){gA(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){nA.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&$d(r);nA.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?yU(t,this._parent):[t]}static \u0275fac=function(r){return new(r||n)(ve(Us,9),ve(nu,10),ve(oA,10),ve(Vv,10),ve(Tc,8),ve(Bv,8))};static \u0275dir=qe({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[Dr([xU]),Qt,fo]})}return n})();var vA=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275dir=qe({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})(),RU={provide:Vv,useExisting:sn(()=>qv),multi:!0},qv=(()=>{class n extends iA{writeValue(t){let r=t??"";this.setProperty("value",r)}registerOnChange(t){this.onChange=r=>{t(r==""?null:parseFloat(r))}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=qn(n)))(i||n)}})();static \u0275dir=qe({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,i){r&1&&K("input",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},standalone:!1,features:[Dr([RU]),Qt]})}return n})();function _A(n){return typeof n=="number"?n:parseFloat(n)}var Gv=(()=>{class n{_validator=QS;_onChange;_enabled;ngOnChanges(t){if(this.inputName in t){let r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):QS,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static \u0275fac=function(r){return new(r||n)};static \u0275dir=qe({type:n,features:[fo]})}return n})(),MU={provide:nu,useExisting:sn(()=>Wv),multi:!0},Wv=(()=>{class n extends Gv{max;inputName="max";normalizeInput=t=>_A(t);createValidator=t=>sU(t);static \u0275fac=(()=>{let t;return function(i){return(t||(t=qn(n)))(i||n)}})();static \u0275dir=qe({type:n,selectors:[["input","type","number","max","","formControlName",""],["input","type","number","max","","formControl",""],["input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&li("max",i._enabled?i.max:null)},inputs:{max:"max"},standalone:!1,features:[Dr([MU]),Qt]})}return n})(),NU={provide:nu,useExisting:sn(()=>Kv),multi:!0},Kv=(()=>{class n extends Gv{min;inputName="min";normalizeInput=t=>_A(t);createValidator=t=>oU(t);static \u0275fac=(()=>{let t;return function(i){return(t||(t=qn(n)))(i||n)}})();static \u0275dir=qe({type:n,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&li("min",i._enabled?i.min:null)},inputs:{min:"min"},standalone:!1,features:[Dr([NU]),Qt]})}return n})(),PU={provide:nu,useExisting:sn(()=>Qv),multi:!0};var Qv=(()=>{class n extends Gv{required;inputName="required";normalizeInput=$d;createValidator=t=>aU;enabled(t){return t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=qn(n)))(i||n)}})();static \u0275dir=qe({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&li("required",i._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[Dr([PU]),Qt]})}return n})();var OU=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=ci({type:n});static \u0275inj=yr({})}return n})();var EA=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Bv,useValue:t.callSetDisabledState??Hv}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=ci({type:n});static \u0275inj=yr({imports:[OU]})}return n})();var js={production:!1,firebase:{apiKey:"AIzaSyCD3nmAW337IXqSLeOZhGhTITqzWhZSCr4",authDomain:"bankvocabulary.firebaseapp.com",projectId:"bankvocabulary",appId:"1:87768864379:web:70bfbcaaca6dd55dab74de"},requireEmailVerification:!0};var wA=()=>{};var bA=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},FU=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=n[t++],s=n[t++],a=n[t++],u=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let o=n[t++],s=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},DA={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let o=n[i],s=i+1<n.length,a=s?n[i+1]:0,u=i+2<n.length,l=u?n[i+2]:0,f=o>>2,p=(o&3)<<4|a>>4,g=(a&15)<<2|l>>6,y=l&63;u||(y=64,s||(g=64)),r.push(t[f],t[p],t[g],t[y])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(bA(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):FU(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let o=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let l=i<n.length?t[n.charAt(i)]:64;++i;let p=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||a==null||l==null||p==null)throw new Zv;let g=o<<2|a>>4;if(r.push(g),l!==64){let y=a<<4&240|l>>2;if(r.push(y),p!==64){let T=l<<6&192|p;r.push(T)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},Zv=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},LU=function(n){let e=bA(n);return DA.encodeByteArray(e,!0)},iu=function(n){return LU(n).replace(/\./g,"")},Vf=function(n){try{return DA.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function TA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var VU=()=>TA().__FIREBASE_DEFAULTS__,UU=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},jU=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&Vf(n[1]);return e&&JSON.parse(e)},Uf=()=>{try{return wA()||VU()||UU()||jU()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Xv=n=>{var e,t;return(t=(e=Uf())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},SA=n=>{let e=Xv(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},e_=()=>{var n;return(n=Uf())===null||n===void 0?void 0:n.config},t_=n=>{var e;return(e=Uf())===null||e===void 0?void 0:e[`_${n}`]};var Lf=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function gi(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function jf(n){return(await fetch(n,{credentials:"include"})).ok}function AA(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[iu(JSON.stringify(t)),iu(JSON.stringify(s)),""].join(".")}var ru={};function BU(){let n={prod:[],emulator:[]};for(let e of Object.keys(ru))ru[e]?n.emulator.push(e):n.prod.push(e);return n}function HU(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}var IA=!1;function Bf(n,e){if(typeof window>"u"||typeof document>"u"||!gi(window.location.host)||ru[n]===e||ru[n]||IA)return;ru[n]=e;function t(g){return`__firebase__banner__${g}`}let r="__firebase__banner",o=BU().prod.length>0;function s(){let g=document.getElementById(r);g&&g.remove()}function a(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function u(g,y){g.setAttribute("width","24"),g.setAttribute("id",y),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function l(){let g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{IA=!0,s()},g}function f(g,y){g.setAttribute("id",y),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function p(){let g=HU(r),y=t("text"),T=document.getElementById(y)||document.createElement("span"),P=t("learnmore"),N=document.getElementById(P)||document.createElement("a"),j=t("preprendIcon"),W=document.getElementById(j)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){let re=g.element;a(re),f(N,P);let Pe=l();u(W,j),re.append(W,T,N,Pe),document.body.appendChild(re)}o?(T.innerText="Preview backend disconnected.",W.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(W.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,T.innerText="Preview backend running in this workspace."),T.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function ht(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function xA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ht())}function $U(){var n;let e=(n=Uf())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function RA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function MA(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function NA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function PA(){let n=ht();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function OA(){return!$U()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function n_(){try{return typeof indexedDB=="object"}catch{return!1}}function kA(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(t){e(t)}})}var zU="FirebaseError",en=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=zU,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Rr.prototype.create)}},Rr=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?qU(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new en(i,a,r)}};function qU(n,e){return n.replace(GU,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var GU=/\{\$([^}]+)}/g;function FA(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Yn(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let o=n[i],s=e[i];if(CA(o)&&CA(s)){if(!Yn(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function CA(n){return n!==null&&typeof n=="object"}function ou(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Bs(n){let e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function Hs(n){let e=n.indexOf("?");if(!e)return"";let t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function LA(n,e){let t=new Jv(n,e);return t.subscribe.bind(t)}var Jv=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");WU(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=Yv),i.error===void 0&&(i.error=Yv),i.complete===void 0&&(i.complete=Yv);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function WU(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Yv(){}var Lte=14400*1e3;function He(n){return n&&n._delegate?n._delegate:n}var gn=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var To="[DEFAULT]";var r_=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new Lf;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(QU(e))try{this.getOrInitializeService({instanceIdentifier:To})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=To){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=To){return this.instances.has(e)}getOptions(e=To){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:KU(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=To){return this.component?this.component.multipleInstances?e:To:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function KU(n){return n===To?void 0:n}function QU(n){return n.instantiationMode==="EAGER"}var Hf=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new r_(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var YU=[],he=(function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n})(he||{}),ZU={debug:he.DEBUG,verbose:he.VERBOSE,info:he.INFO,warn:he.WARN,error:he.ERROR,silent:he.SILENT},JU=he.INFO,XU={[he.DEBUG]:"log",[he.VERBOSE]:"log",[he.INFO]:"info",[he.WARN]:"warn",[he.ERROR]:"error"},ej=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=XU[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},mi=class{constructor(e){this.name=e,this._logLevel=JU,this._logHandler=ej,this._userLogHandler=null,YU.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in he))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?ZU[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,he.DEBUG,...e),this._logHandler(this,he.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,he.VERBOSE,...e),this._logHandler(this,he.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,he.INFO,...e),this._logHandler(this,he.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,he.WARN,...e),this._logHandler(this,he.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,he.ERROR,...e),this._logHandler(this,he.ERROR,...e)}};var tj=(n,e)=>e.some(t=>n instanceof t),VA,UA;function nj(){return VA||(VA=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function rj(){return UA||(UA=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var jA=new WeakMap,o_=new WeakMap,BA=new WeakMap,i_=new WeakMap,a_=new WeakMap;function ij(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",s)},o=()=>{t(Zn(n.result)),i()},s=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",s)});return e.then(t=>{t instanceof IDBCursor&&jA.set(t,n)}).catch(()=>{}),a_.set(e,n),e}function oj(n){if(o_.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",s),n.removeEventListener("abort",s)},o=()=>{t(),i()},s=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",s),n.addEventListener("abort",s)});o_.set(n,e)}var s_={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return o_.get(n);if(e==="objectStoreNames")return n.objectStoreNames||BA.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Zn(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function HA(n){s_=n(s_)}function sj(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call($f(this),e,...t);return BA.set(r,e.sort?e.sort():[e]),Zn(r)}:rj().includes(n)?function(...e){return n.apply($f(this),e),Zn(jA.get(this))}:function(...e){return Zn(n.apply($f(this),e))}}function aj(n){return typeof n=="function"?sj(n):(n instanceof IDBTransaction&&oj(n),tj(n,nj())?new Proxy(n,s_):n)}function Zn(n){if(n instanceof IDBRequest)return ij(n);if(i_.has(n))return i_.get(n);let e=aj(n);return e!==n&&(i_.set(n,e),a_.set(e,n)),e}var $f=n=>a_.get(n);function zA(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(n,e),a=Zn(s);return r&&s.addEventListener("upgradeneeded",u=>{r(Zn(s.result),u.oldVersion,u.newVersion,Zn(s.transaction),u)}),t&&s.addEventListener("blocked",u=>t(u.oldVersion,u.newVersion,u)),a.then(u=>{o&&u.addEventListener("close",()=>o()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var cj=["get","getKey","getAll","getAllKeys","count"],uj=["put","add","delete","clear"],c_=new Map;function $A(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(c_.get(e))return c_.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=uj.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||cj.includes(t)))return;let o=async function(s,...a){let u=this.transaction(s,i?"readwrite":"readonly"),l=u.store;return r&&(l=l.index(a.shift())),(await Promise.all([l[t](...a),i&&u.done]))[0]};return c_.set(e,o),o}HA(n=>ne(L({},n),{get:(e,t,r)=>$A(e,t)||n.get(e,t,r),has:(e,t)=>!!$A(e,t)||n.has(e,t)}));var l_=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(lj(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function lj(n){let e=n.getComponent();return e?.type==="VERSION"}var d_="@firebase/app",qA="0.13.2";var Mr=new mi("@firebase/app"),dj="@firebase/app-compat",fj="@firebase/analytics-compat",hj="@firebase/analytics",pj="@firebase/app-check-compat",gj="@firebase/app-check",mj="@firebase/auth",yj="@firebase/auth-compat",vj="@firebase/database",_j="@firebase/data-connect",Ej="@firebase/database-compat",wj="@firebase/functions",Ij="@firebase/functions-compat",Cj="@firebase/installations",bj="@firebase/installations-compat",Dj="@firebase/messaging",Tj="@firebase/messaging-compat",Sj="@firebase/performance",Aj="@firebase/performance-compat",xj="@firebase/remote-config",Rj="@firebase/remote-config-compat",Mj="@firebase/storage",Nj="@firebase/storage-compat",Pj="@firebase/firestore",Oj="@firebase/ai",kj="@firebase/firestore-compat",Fj="firebase",Lj="11.10.0";var f_="[DEFAULT]",Vj={[d_]:"fire-core",[dj]:"fire-core-compat",[hj]:"fire-analytics",[fj]:"fire-analytics-compat",[gj]:"fire-app-check",[pj]:"fire-app-check-compat",[mj]:"fire-auth",[yj]:"fire-auth-compat",[vj]:"fire-rtdb",[_j]:"fire-data-connect",[Ej]:"fire-rtdb-compat",[wj]:"fire-fn",[Ij]:"fire-fn-compat",[Cj]:"fire-iid",[bj]:"fire-iid-compat",[Dj]:"fire-fcm",[Tj]:"fire-fcm-compat",[Sj]:"fire-perf",[Aj]:"fire-perf-compat",[xj]:"fire-rc",[Rj]:"fire-rc-compat",[Mj]:"fire-gcs",[Nj]:"fire-gcs-compat",[Pj]:"fire-fst",[kj]:"fire-fst-compat",[Oj]:"fire-vertex","fire-js":"fire-js",[Fj]:"fire-js-all"};var zf=new Map,Uj=new Map,h_=new Map;function GA(n,e){try{n.container.addComponent(e)}catch(t){Mr.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function vi(n){let e=n.name;if(h_.has(e))return Mr.debug(`There were multiple attempts to register component ${e}.`),!1;h_.set(e,n);for(let t of zf.values())GA(t,n);for(let t of Uj.values())GA(t,n);return!0}function au(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function tn(n){return n==null?!1:n.settings!==void 0}var jj={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},yi=new Rr("app","Firebase",jj);var p_=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new gn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw yi.create("app-deleted",{appName:this._name})}};var _i=Lj;function cu(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:f_,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw yi.create("bad-app-name",{appName:String(i)});if(t||(t=e_()),!t)throw yi.create("no-options");let o=zf.get(i);if(o){if(Yn(t,o.options)&&Yn(r,o.config))return o;throw yi.create("duplicate-app",{appName:i})}let s=new Hf(i);for(let u of h_.values())s.addComponent(u);let a=new p_(t,r,s);return zf.set(i,a),a}function $s(n=f_){let e=zf.get(n);if(!e&&n===f_&&e_())return cu();if(!e)throw yi.create("no-app",{appName:n});return e}function Nn(n,e,t){var r;let i=(r=Vj[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){let a=[`Unable to register library "${i}" with version "${e}":`];o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Mr.warn(a.join(" "));return}vi(new gn(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var Bj="firebase-heartbeat-database",Hj=1,su="firebase-heartbeat-store",u_=null;function YA(){return u_||(u_=zA(Bj,Hj,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(su)}catch(t){console.warn(t)}}}}).catch(n=>{throw yi.create("idb-open",{originalErrorMessage:n.message})})),u_}async function $j(n){try{let t=(await YA()).transaction(su),r=await t.objectStore(su).get(ZA(n));return await t.done,r}catch(e){if(e instanceof en)Mr.warn(e.message);else{let t=yi.create("idb-get",{originalErrorMessage:e?.message});Mr.warn(t.message)}}}async function WA(n,e){try{let r=(await YA()).transaction(su,"readwrite");await r.objectStore(su).put(e,ZA(n)),await r.done}catch(t){if(t instanceof en)Mr.warn(t.message);else{let r=yi.create("idb-set",{originalErrorMessage:t?.message});Mr.warn(r.message)}}}function ZA(n){return`${n.name}!${n.options.appId}`}var zj=1024,qj=30,g_=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new m_(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=KA();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>qj){let s=Wj(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Mr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=KA(),{heartbeatsToSend:r,unsentEntries:i}=Gj(this._heartbeatsCache.heartbeats),o=iu(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return Mr.warn(t),""}}};function KA(){return new Date().toISOString().substring(0,10)}function Gj(n,e=zj){let t=[],r=n.slice();for(let i of n){let o=t.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),QA(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),QA(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var m_=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return n_()?kA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){let t=await $j(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){let i=await this.read();return WA(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){let i=await this.read();return WA(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}};function QA(n){return iu(JSON.stringify({version:2,heartbeats:n})).length}function Wj(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function Kj(n){vi(new gn("platform-logger",e=>new l_(e),"PRIVATE")),vi(new gn("heartbeat",e=>new g_(e),"PRIVATE")),Nn(d_,qA,n),Nn(d_,qA,"esm2017"),Nn("fire-js","")}Kj("");var Qj="firebase",Yj="11.10.0";Nn(Qj,Yj,"app");function p1(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var g1=p1,m1=new Rr("auth","Firebase",p1());var Yf=new mi("@firebase/auth");function Zj(n,...e){Yf.logLevel<=he.WARN&&Yf.warn(`Auth (${_i}): ${n}`,...e)}function Gf(n,...e){Yf.logLevel<=he.ERROR&&Yf.error(`Auth (${_i}): ${n}`,...e)}function Xn(n,...e){throw j_(n,...e)}function So(n,...e){return j_(n,...e)}function y1(n,e,t){let r=Object.assign(Object.assign({},g1()),{[e]:t});return new Rr("auth","Firebase",r).create(e,{appName:n.name})}function Ii(n){return y1(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function j_(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return m1.create(n,...e)}function Q(n,e,...t){if(!n)throw j_(e,...t)}function Nr(n){let e="INTERNAL ASSERTION FAILED: "+n;throw Gf(e),new Error(e)}function Ci(n,e){n||Nr(e)}function E_(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function Jj(){return JA()==="http:"||JA()==="https:"}function JA(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function Xj(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Jj()||MA()||"connection"in navigator)?navigator.onLine:!0}function eB(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var Ao=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ci(t>e,"Short delay should be less than long delay!"),this.isMobile=xA()||NA()}get(){return Xj()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function B_(n,e){Ci(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var Zf=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Nr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Nr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Nr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var tB={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var nB=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],rB=new Ao(3e4,6e4);function bi(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function Or(n,e,t,r,i={}){return v1(n,i,async()=>{let o={},s={};r&&(e==="GET"?s=r:o={body:JSON.stringify(r)});let a=ou(Object.assign({key:n.config.apiKey},s)).slice(1),u=await n._getAdditionalHeaders();u["Content-Type"]="application/json",n.languageCode&&(u["X-Firebase-Locale"]=n.languageCode);let l=Object.assign({method:e,headers:u},o);return RA()||(l.referrerPolicy="no-referrer"),n.emulatorConfig&&gi(n.emulatorConfig.host)&&(l.credentials="include"),Zf.fetch()(await _1(n,n.config.apiHost,t,a),l)})}async function v1(n,e,t){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},tB),e);try{let i=new w_(n),o=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();let s=await o.json();if("needConfirmation"in s)throw qf(n,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw qf(n,"credential-already-in-use",s);if(u==="EMAIL_EXISTS")throw qf(n,"email-already-in-use",s);if(u==="USER_DISABLED")throw qf(n,"user-disabled",s);let f=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw y1(n,f,l);Xn(n,f)}}catch(i){if(i instanceof en)throw i;Xn(n,"network-request-failed",{message:String(i)})}}async function ch(n,e,t,r,i={}){let o=await Or(n,e,t,r,i);return"mfaPendingCredential"in o&&Xn(n,"multi-factor-auth-required",{_serverResponse:o}),o}async function _1(n,e,t,r){let i=`${e}${t}?${r}`,o=n,s=o.config.emulator?B_(n.config,i):`${n.config.apiScheme}://${i}`;return nB.includes(t)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s}function iB(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var w_=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(So(this.auth,"network-request-failed")),rB.get())})}};function qf(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=So(n,e,r);return i.customData._tokenResponse=t,i}function XA(n){return n!==void 0&&n.enterprise!==void 0}var I_=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return iB(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}};async function oB(n,e){return Or(n,"GET","/v2/recaptchaConfig",bi(n,e))}async function sB(n,e){return Or(n,"POST","/v1/accounts:delete",e)}async function Jf(n,e){return Or(n,"POST","/v1/accounts:lookup",e)}function lu(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function E1(n,e=!1){let t=He(n),r=await t.getIdToken(e),i=H_(r);Q(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:lu(y_(i.auth_time)),issuedAtTime:lu(y_(i.iat)),expirationTime:lu(y_(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}}function y_(n){return Number(n)*1e3}function H_(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Gf("JWT malformed, contained fewer than 3 sections"),null;try{let i=Vf(t);return i?JSON.parse(i):(Gf("Failed to decode base64 JWT payload"),null)}catch(i){return Gf("Caught error parsing JWT payload as JSON",i?.toString()),null}}function e1(n){let e=H_(n);return Q(e,"internal-error"),Q(typeof e.exp<"u","internal-error"),Q(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function fu(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof en&&aB(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function aB({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var C_=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}};var hu=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=lu(this.lastLoginAt),this.creationTime=lu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};async function Xf(n){var e;let t=n.auth,r=await n.getIdToken(),i=await fu(n,Jf(t,{idToken:r}));Q(i?.users.length,t,"internal-error");let o=i.users[0];n._notifyReloadListener(o);let s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?I1(o.providerUserInfo):[],a=cB(n.providerData,s),u=n.isAnonymous,l=!(n.email&&o.passwordHash)&&!a?.length,f=u?l:!1,p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new hu(o.createdAt,o.lastLoginAt),isAnonymous:f};Object.assign(n,p)}async function w1(n){let e=He(n);await Xf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function cB(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function I1(n){return n.map(e=>{var{providerId:t}=e,r=ig(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}async function uB(n,e){let t=await v1(n,{},async()=>{let r=ou({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,s=await _1(n,i,"/v1/token",`key=${o}`),a=await n._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let u={method:"POST",headers:a,body:r};return n.emulatorConfig&&gi(n.emulatorConfig.host)&&(u.credentials="include"),Zf.fetch()(s,u)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function lB(n,e){return Or(n,"POST","/v2/accounts:revokeToken",bi(n,e))}var du=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Q(e.idToken,"internal-error"),Q(typeof e.idToken<"u","internal-error"),Q(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):e1(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Q(e.length!==0,"internal-error");let t=e1(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Q(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){let{accessToken:r,refreshToken:i,expiresIn:o}=await uB(e,t);this.updateTokensAndExpiration(r,i,Number(o))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:o}=t,s=new n;return r&&(Q(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(Q(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(Q(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return Nr("not implemented")}};function Ei(n,e){Q(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var wi=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,o=ig(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new C_(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new hu(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){let t=await fu(this,this.stsTokenManager.getToken(this.auth,e));return Q(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return E1(this,e)}reload(){return w1(this)}_assign(e){this!==e&&(Q(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Q(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Xf(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(tn(this.auth.app))return Promise.reject(Ii(this.auth));let e=await this.getIdToken();return await fu(this,sB(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,o,s,a,u,l,f;let p=(r=t.displayName)!==null&&r!==void 0?r:void 0,g=(i=t.email)!==null&&i!==void 0?i:void 0,y=(o=t.phoneNumber)!==null&&o!==void 0?o:void 0,T=(s=t.photoURL)!==null&&s!==void 0?s:void 0,P=(a=t.tenantId)!==null&&a!==void 0?a:void 0,N=(u=t._redirectEventId)!==null&&u!==void 0?u:void 0,j=(l=t.createdAt)!==null&&l!==void 0?l:void 0,W=(f=t.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:re,emailVerified:Pe,isAnonymous:Pt,providerData:xe,stsTokenManager:C}=t;Q(re&&C,e,"internal-error");let v=du.fromJSON(this.name,C);Q(typeof re=="string",e,"internal-error"),Ei(p,e.name),Ei(g,e.name),Q(typeof Pe=="boolean",e,"internal-error"),Q(typeof Pt=="boolean",e,"internal-error"),Ei(y,e.name),Ei(T,e.name),Ei(P,e.name),Ei(N,e.name),Ei(j,e.name),Ei(W,e.name);let E=new n({uid:re,auth:e,email:g,emailVerified:Pe,displayName:p,isAnonymous:Pt,photoURL:T,phoneNumber:y,tenantId:P,stsTokenManager:v,createdAt:j,lastLoginAt:W});return xe&&Array.isArray(xe)&&(E.providerData=xe.map(I=>Object.assign({},I))),N&&(E._redirectEventId=N),E}static async _fromIdTokenResponse(e,t,r=!1){let i=new du;i.updateFromServerResponse(t);let o=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Xf(o),o}static async _fromGetAccountInfoResponse(e,t,r){let i=t.users[0];Q(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?I1(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new du;a.updateFromIdToken(r);let u=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new hu(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(u,l),u}};var t1=new Map;function Pr(n){Ci(n instanceof Function,"Expected a class definition");let e=t1.get(n);return e?(Ci(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,t1.set(n,e),e)}var dB=(()=>{class n{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,r){this.storage[t]=r}async _get(t){let r=this.storage[t];return r===void 0?null:r}async _remove(t){delete this.storage[t]}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),b_=dB;function Wf(n,e,t){return`firebase:${n}:${e}:${t}`}var eh=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=Wf(this.userKey,i.apiKey,o),this.fullPersistenceKey=Wf("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){let e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=await Jf(this.auth,{idToken:e}).catch(()=>{});return t?wi._fromGetAccountInfoResponse(this.auth,t,e):null}return wi._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;let t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new n(Pr(b_),e,r);let i=(await Promise.all(t.map(async l=>{if(await l._isAvailable())return l}))).filter(l=>l),o=i[0]||Pr(b_),s=Wf(r,e.config.apiKey,e.name),a=null;for(let l of t)try{let f=await l._get(s);if(f){let p;if(typeof f=="string"){let g=await Jf(e,{idToken:f}).catch(()=>{});if(!g)break;p=await wi._fromGetAccountInfoResponse(e,g,f)}else p=wi._fromJSON(e,f);l!==o&&(a=p),o=l;break}}catch{}let u=i.filter(l=>l._shouldAllowMigration);return!o._shouldAllowMigration||!u.length?new n(o,e,r):(o=u[0],a&&await o._set(s,a.toJSON()),await Promise.all(t.map(async l=>{if(l!==o)try{await l._remove(s)}catch{}})),new n(o,e,r))}};function n1(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(T1(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(C1(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(A1(e))return"Blackberry";if(x1(e))return"Webos";if(b1(e))return"Safari";if((e.includes("chrome/")||D1(e))&&!e.includes("edge/"))return"Chrome";if(S1(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function C1(n=ht()){return/firefox\//i.test(n)}function b1(n=ht()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function D1(n=ht()){return/crios\//i.test(n)}function T1(n=ht()){return/iemobile/i.test(n)}function S1(n=ht()){return/android/i.test(n)}function A1(n=ht()){return/blackberry/i.test(n)}function x1(n=ht()){return/webos/i.test(n)}function $_(n=ht()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function fB(n=ht()){var e;return $_(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function hB(){return PA()&&document.documentMode===10}function R1(n=ht()){return $_(n)||S1(n)||x1(n)||A1(n)||/windows phone/i.test(n)||T1(n)}function M1(n,e=[]){let t;switch(n){case"Browser":t=n1(ht());break;case"Worker":t=`${n1(ht())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${_i}/${r}`}var D_=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=o=>new Promise((s,a)=>{try{let u=e(o);s(u)}catch(u){a(u)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}};async function pB(n,e={}){return Or(n,"GET","/v2/passwordPolicy",bi(n,e))}var gB=6,T_=class{constructor(e){var t,r,i,o;let s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=s.minPasswordLength)!==null&&t!==void 0?t:gB,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,o,s,a;let u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(t=u.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsUppercaseLetter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(s=u.containsNumericCharacter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var S_=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new th(this),this.idTokenSubscription=new th(this),this.beforeStateQueue=new D_(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=m1,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Pr(t)),this._initializationPromise=this.queue(async()=>{var r,i,o;if(!this._deleted&&(this.persistenceManager=await eh.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;let e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{let t=await Jf(this,{idToken:e}),r=await wi._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(tn(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}let r=await this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();let s=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=i?._redirectEventId,u=await this.tryRedirectSignIn(e);(!s||s===a)&&u?.user&&(i=u.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Q(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Xf(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=eB()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(tn(this.app))return Promise.reject(Ii(this));let t=e?He(e):null;return t&&Q(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Q(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return tn(this.app)?Promise.reject(Ii(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return tn(this.app)?Promise.reject(Ii(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Pr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){let e=await pB(this),t=new T_(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Rr("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){let t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await lB(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){let r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){let t=e&&Pr(e)||this._popupRedirectResolver;Q(t,this,"argument-error"),this.redirectPersistenceManager=await eh.create(this,[Pr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let o=typeof t=="function"?t:t.next.bind(t),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Q(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof t=="function"){let u=e.addObserver(t,r,i);return()=>{s=!0,u()}}else{let u=e.addObserver(t);return()=>{s=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Q(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=M1(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);let i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;if(tn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t?.error&&Zj(`Error while retrieving App Check token: ${t.error}`),t?.token}};function zs(n){return He(n)}var th=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=LA(t=>this.observer=t)}get next(){return Q(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var uh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function mB(n){uh=n}function N1(n){return uh.loadJS(n)}function yB(){return uh.recaptchaEnterpriseScript}function vB(){return uh.gapiScript}function P1(n){return`__${n}${Math.floor(Math.random()*1e6)}`}var A_=class{constructor(){this.enterprise=new x_}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}},x_=class{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}};var _B="recaptcha-enterprise",O1="NO_RECAPTCHA",R_=class{constructor(e){this.type=_B,this.auth=zs(e)}async verify(e="verify",t=!1){async function r(o){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(s,a)=>{oB(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{let l=new I_(u);return o.tenantId==null?o._agentRecaptchaConfig=l:o._tenantRecaptchaConfigs[o.tenantId]=l,s(l.siteKey)}}).catch(u=>{a(u)})})}function i(o,s,a){let u=window.grecaptcha;XA(u)?u.enterprise.ready(()=>{u.enterprise.execute(o,{action:e}).then(l=>{s(l)}).catch(()=>{s(O1)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new A_().execute("siteKey",{action:"verify"}):new Promise((o,s)=>{r(this.auth).then(a=>{if(!t&&XA(window.grecaptcha))i(a,o,s);else{if(typeof window>"u"){s(new Error("RecaptchaVerifier is only supported in browser"));return}let u=yB();u.length!==0&&(u+=a),N1(u).then(()=>{i(a,o,s)}).catch(l=>{s(l)})}}).catch(a=>{s(a)})})}};async function uu(n,e,t,r=!1,i=!1){let o=new R_(n),s;if(i)s=O1;else try{s=await o.verify(t)}catch{s=await o.verify(t,!0)}let a=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){let u=a.phoneEnrollmentInfo.phoneNumber,l=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:l,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){let u=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function r1(n,e,t,r,i){var o,s;if(i==="EMAIL_PASSWORD_PROVIDER")if(!((o=n._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let a=await uu(n,e,t,t==="getOobCode");return r(n,a)}else return r(n,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let u=await uu(n,e,t,t==="getOobCode");return r(n,u)}else return Promise.reject(a)});else if(i==="PHONE_PROVIDER")if(!((s=n._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("PHONE_PROVIDER")){let a=await uu(n,e,t);return r(n,a).catch(async u=>{var l;if(((l=n._getRecaptchaConfig())===null||l===void 0?void 0:l.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(u.code==="auth/missing-recaptcha-token"||u.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${t} flow.`);let f=await uu(n,e,t,!1,!0);return r(n,f)}return Promise.reject(u)})}else{let a=await uu(n,e,t,!1,!0);return r(n,a)}else return Promise.reject(i+" provider is not supported.")}function k1(n,e){let t=au(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),o=t.getOptions();if(Yn(o,e??{}))return i;Xn(i,"already-initialized")}return t.initialize({options:e})}function EB(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Pr);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function F1(n,e,t){let r=zs(n);Q(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,o=L1(e),{host:s,port:a}=wB(e),u=a===null?"":`:${a}`,l={url:`${o}//${s}${u}/`},f=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){Q(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Q(Yn(l,r.config.emulator)&&Yn(f,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=l,r.emulatorConfig=f,r.settings.appVerificationDisabledForTesting=!0,gi(s)?(jf(`${o}//${s}${u}`),Bf("Auth",!0)):i||IB()}function L1(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function wB(n){let e=L1(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:i1(r.substr(o.length+1))}}else{let[o,s]=r.split(":");return{host:o,port:i1(s)}}}function i1(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function IB(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var pu=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Nr("not implemented")}_getIdTokenResponse(e){return Nr("not implemented")}_linkToIdToken(e,t){return Nr("not implemented")}_getReauthenticationResolver(e){return Nr("not implemented")}};async function CB(n,e){return Or(n,"POST","/v1/accounts:signUp",e)}async function bB(n,e){return ch(n,"POST","/v1/accounts:signInWithPassword",bi(n,e))}async function DB(n,e){return Or(n,"POST","/v1/accounts:sendOobCode",bi(n,e))}async function TB(n,e){return DB(n,e)}async function SB(n,e){return ch(n,"POST","/v1/accounts:signInWithEmailLink",bi(n,e))}async function AB(n,e){return ch(n,"POST","/v1/accounts:signInWithEmailLink",bi(n,e))}var gu=class n extends pu{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new n(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new n(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":let t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return r1(e,t,"signInWithPassword",bB,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return SB(e,{email:this._email,oobCode:this._password});default:Xn(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":let r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return r1(e,r,"signUpPassword",CB,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return AB(e,{idToken:t,email:this._email,oobCode:this._password});default:Xn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};async function v_(n,e){return ch(n,"POST","/v1/accounts:signInWithIdp",bi(n,e))}function xB(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function RB(n){let e=Bs(Hs(n)).link,t=e?Bs(Hs(e)).deep_link_id:null,r=Bs(Hs(n)).deep_link_id;return(r?Bs(Hs(r)).link:null)||r||t||e||n}var nh=class n{constructor(e){var t,r,i,o,s,a;let u=Bs(Hs(e)),l=(t=u.apiKey)!==null&&t!==void 0?t:null,f=(r=u.oobCode)!==null&&r!==void 0?r:null,p=xB((i=u.mode)!==null&&i!==void 0?i:null);Q(l&&f&&p,"argument-error"),this.apiKey=l,this.operation=p,this.code=f,this.continueUrl=(o=u.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(s=u.lang)!==null&&s!==void 0?s:null,this.tenantId=(a=u.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){let t=RB(e);try{return new n(t)}catch{return null}}};var V1=(()=>{class n{constructor(){this.providerId=n.PROVIDER_ID}static credential(t,r){return gu._fromEmailAndPassword(t,r)}static credentialWithLink(t,r){let i=nh.parseLink(r);return Q(i,"argument-error"),gu._fromEmailAndCode(t,i.code,i.tenantId)}}n.PROVIDER_ID="password",n.EMAIL_PASSWORD_SIGN_IN_METHOD="password",n.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return n})(),rh=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var M_=class extends rh{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var mu=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){let o=await wi._fromIdTokenResponse(e,r,i),s=o1(r);return new n({user:o,providerId:s,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);let i=o1(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})}};function o1(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var N_=class n extends en{constructor(e,t,r,i){var o;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function U1(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?N_._fromErrorAndOperation(n,o,e,r):o})}async function MB(n,e,t=!1){let r=await fu(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return mu._forOperation(n,"link",r)}async function NB(n,e,t=!1){let{auth:r}=n;if(tn(r.app))return Promise.reject(Ii(r));let i="reauthenticate";try{let o=await fu(n,U1(r,i,e,n),t);Q(o.idToken,r,"internal-error");let s=H_(o.idToken);Q(s,r,"internal-error");let{sub:a}=s;return Q(n.uid===a,r,"user-mismatch"),mu._forOperation(n,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&Xn(r,"user-mismatch"),o}}async function j1(n,e,t=!1){if(tn(n.app))return Promise.reject(Ii(n));let r="signIn",i=await U1(n,r,e),o=await mu._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(o.user),o}async function B1(n,e){return j1(zs(n),e)}function PB(n,e,t){var r;Q(((r=t.url)===null||r===void 0?void 0:r.length)>0,n,"invalid-continue-uri"),Q(typeof t.dynamicLinkDomain>"u"||t.dynamicLinkDomain.length>0,n,"invalid-dynamic-link-domain"),Q(typeof t.linkDomain>"u"||t.linkDomain.length>0,n,"invalid-hosting-link-domain"),e.continueUrl=t.url,e.dynamicLinkDomain=t.dynamicLinkDomain,e.linkDomain=t.linkDomain,e.canHandleCodeInApp=t.handleCodeInApp,t.iOS&&(Q(t.iOS.bundleId.length>0,n,"missing-ios-bundle-id"),e.iOSBundleId=t.iOS.bundleId),t.android&&(Q(t.android.packageName.length>0,n,"missing-android-pkg-name"),e.androidInstallApp=t.android.installApp,e.androidMinimumVersionCode=t.android.minimumVersion,e.androidPackageName=t.android.packageName)}async function OB(n){let e=zs(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function z_(n,e,t){return tn(n.app)?Promise.reject(Ii(n)):B1(He(n),V1.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&OB(n),r})}async function q_(n,e){let t=He(n),i={requestType:"VERIFY_EMAIL",idToken:await n.getIdToken()};e&&PB(t.auth,i,e);let{email:o}=await TB(t.auth,i);o!==n.email&&await n.reload()}function G_(n,e){return He(n).setPersistence(e)}function H1(n,e,t,r){return He(n).onIdTokenChanged(e,t,r)}function $1(n,e,t){return He(n).beforeAuthStateChanged(e,t)}function W_(n,e,t,r){return He(n).onAuthStateChanged(e,t,r)}function K_(n){return He(n).signOut()}var ih="__sak";var oh=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(ih,"1"),this.storage.removeItem(ih),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var kB=1e3,FB=10,LB=(()=>{class n extends oh{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=R1(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&t(r,o,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((a,u,l)=>{this.notifyListeners(a,l)});return}let i=t.key;r?this.detachListener():this.stopPolling();let o=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);hB()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(o,FB):o()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},kB)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,r){await super._set(t,r),this.localCache[t]=JSON.stringify(r)}async _get(t){let r=await super._get(t);return this.localCache[t]=JSON.stringify(r),r}async _remove(t){await super._remove(t),delete this.localCache[t]}}return n.type="LOCAL",n})(),lh=LB;var VB=(()=>{class n extends oh{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),Q_=VB;function UB(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}var jB=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(o=>o.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}async handleEvent(t){let r=t,{eventId:i,eventType:o,data:s}=r.data,a=this.handlersMap[o];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let u=Array.from(a).map(async f=>f(r.origin,s)),l=await UB(u);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:l})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function z1(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var P_=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,u)=>{let l=z1("",20);i.port1.start();let f=setTimeout(()=>{u(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(p){let g=p;if(g.data.eventId===l)switch(g.data.status){case"ack":clearTimeout(f),o=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(g.data.response);break;default:clearTimeout(f),clearTimeout(o),u(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}};function Jn(){return window}function BB(n){Jn().location.href=n}function q1(){return typeof Jn().WorkerGlobalScope<"u"&&typeof Jn().importScripts=="function"}async function HB(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function $B(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function zB(){return q1()?self:null}var G1="firebaseLocalStorageDb",qB=1,sh="firebaseLocalStorage",W1="fbase_key",xo=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function dh(n,e){return n.transaction([sh],e?"readwrite":"readonly").objectStore(sh)}function GB(){let n=indexedDB.deleteDatabase(G1);return new xo(n).toPromise()}function O_(){let n=indexedDB.open(G1,qB);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(sh,{keyPath:W1})}catch(i){t(i)}}),n.addEventListener("success",async()=>{let r=n.result;r.objectStoreNames.contains(sh)?e(r):(r.close(),await GB(),e(await O_()))})})}async function s1(n,e,t){let r=dh(n,!0).put({[W1]:e,value:t});return new xo(r).toPromise()}async function WB(n,e){let t=dh(n,!1).get(e),r=await new xo(t).toPromise();return r===void 0?null:r.value}function a1(n,e){let t=dh(n,!0).delete(e);return new xo(t).toPromise()}var KB=800,QB=3,YB=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await O_(),this.db)}async _withRetries(t){let r=0;for(;;)try{let i=await this._openDb();return await t(i)}catch(i){if(r++>QB)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return q1()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=jB._getInstance(zB()),this.receiver._subscribe("keyChanged",async(t,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(t,r)=>["keyChanged"])}async initializeSender(){var t,r;if(this.activeServiceWorker=await HB(),!this.activeServiceWorker)return;this.sender=new P_(this.activeServiceWorker);let i=await this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||$B()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;let t=await O_();return await s1(t,ih,"1"),await a1(t,ih),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,r){return this._withPendingWrite(async()=>(await this._withRetries(i=>s1(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)))}async _get(t){let r=await this._withRetries(i=>WB(i,t));return this.localCache[t]=r,r}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(r=>a1(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){let t=await this._withRetries(o=>{let s=dh(o,!1).getAll();return new xo(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:o,value:s}of t)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),KB)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),K1=YB;var dne=P1("rcb"),fne=new Ao(3e4,6e4);function ZB(n,e){return e?Pr(e):(Q(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var yu=class extends pu{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return v_(e,this._buildIdpRequest())}_linkToIdToken(e,t){return v_(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return v_(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function JB(n){return j1(n.auth,new yu(n),n.bypassAuthState)}function XB(n){let{auth:e,user:t}=n;return Q(t,e,"internal-error"),NB(t,new yu(n),n.bypassAuthState)}async function e3(n){let{auth:e,user:t}=n;return Q(t,e,"internal-error"),MB(t,new yu(n),n.bypassAuthState)}var k_=class{constructor(e,t,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){let{urlResponse:t,sessionId:r,postBody:i,tenantId:o,error:s,type:a}=e;if(s){this.reject(s);return}let u={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(u))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return JB;case"linkViaPopup":case"linkViaRedirect":return e3;case"reauthViaPopup":case"reauthViaRedirect":return XB;default:Xn(this.auth,"internal-error")}}resolve(e){Ci(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ci(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var hne=new Ao(2e3,1e4);var t3="pendingRedirect",Kf=new Map,F_=class extends k_{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Kf.get(this.auth._key());if(!e){try{let r=await n3(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Kf.set(this.auth._key(),e)}return this.bypassAuthState||Kf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}};async function n3(n,e){let t=o3(e),r=i3(n);if(!await r._isAvailable())return!1;let i=await r._get(t)==="true";return await r._remove(t),i}function r3(n,e){Kf.set(n._key(),e)}function i3(n){return Pr(n._redirectPersistence)}function o3(n){return Wf(t3,n.config.apiKey,n.name)}async function s3(n,e,t=!1){if(tn(n.app))return Promise.reject(Ii(n));let r=zs(n),i=ZB(r,e),s=await new F_(r,i,t).execute();return s&&!t&&(delete s.user._redirectEventId,await r._persistUserIfCurrent(s.user),await r._setRedirectUser(null,e)),s}var a3=600*1e3,L_=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!c3(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!Q1(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(So(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=a3&&this.cachedEventUids.clear(),this.cachedEventUids.has(c1(e))}saveEventToCache(e){this.cachedEventUids.add(c1(e)),this.lastProcessedEventTime=Date.now()}};function c1(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function Q1({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function c3(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Q1(n);default:return!1}}async function u3(n,e={}){return Or(n,"GET","/v1/projects",e)}var l3=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,d3=/^https?/;async function f3(n){if(n.config.emulator)return;let{authorizedDomains:e}=await u3(n);for(let t of e)try{if(h3(t))return}catch{}Xn(n,"unauthorized-domain")}function h3(n){let e=E_(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let s=new URL(n);return s.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&s.hostname===r}if(!d3.test(t))return!1;if(l3.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var p3=new Ao(3e4,6e4);function u1(){let n=Jn().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function g3(n){return new Promise((e,t)=>{var r,i,o;function s(){u1(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{u1(),t(So(n,"network-request-failed"))},timeout:p3.get()})}if(!((i=(r=Jn().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=Jn().gapi)===null||o===void 0)&&o.load)s();else{let a=P1("iframefcb");return Jn()[a]=()=>{gapi.load?s():t(So(n,"network-request-failed"))},N1(`${vB()}?onload=${a}`).catch(u=>t(u))}}).catch(e=>{throw Qf=null,e})}var Qf=null;function m3(n){return Qf=Qf||g3(n),Qf}var y3=new Ao(5e3,15e3),v3="__/auth/iframe",_3="emulator/auth/iframe",E3={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},w3=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function I3(n){let e=n.config;Q(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?B_(e,_3):`https://${n.config.authDomain}/${v3}`,r={apiKey:e.apiKey,appName:n.name,v:_i},i=w3.get(n.config.apiHost);i&&(r.eid=i);let o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${ou(r).slice(1)}`}async function C3(n){let e=await m3(n),t=Jn().gapi;return Q(t,n,"internal-error"),e.open({where:document.body,url:I3(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:E3,dontclear:!0},r=>new Promise(async(i,o)=>{await r.restyle({setHideOnLeave:!1});let s=So(n,"network-request-failed"),a=Jn().setTimeout(()=>{o(s)},y3.get());function u(){Jn().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{o(s)})}))}var b3={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},D3=500,T3=600,S3="_blank",A3="http://localhost",ah=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function x3(n,e,t,r=D3,i=T3){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",u=Object.assign(Object.assign({},b3),{width:r.toString(),height:i.toString(),top:o,left:s}),l=ht().toLowerCase();t&&(a=D1(l)?S3:t),C1(l)&&(e=e||A3,u.scrollbars="yes");let f=Object.entries(u).reduce((g,[y,T])=>`${g}${y}=${T},`,"");if(fB(l)&&a!=="_self")return R3(e||"",a),new ah(null);let p=window.open(e||"",a,f);Q(p,n,"popup-blocked");try{p.focus()}catch{}return new ah(p)}function R3(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var M3="__/auth/handler",N3="emulator/auth/handler",P3=encodeURIComponent("fac");async function l1(n,e,t,r,i,o){Q(n.config.authDomain,n,"auth-domain-config-required"),Q(n.config.apiKey,n,"invalid-api-key");let s={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:_i,eventId:i};if(e instanceof rh){e.setDefaultLanguage(n.languageCode),s.providerId=e.providerId||"",FA(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(let[f,p]of Object.entries(o||{}))s[f]=p}if(e instanceof M_){let f=e.getScopes().filter(p=>p!=="");f.length>0&&(s.scopes=f.join(","))}n.tenantId&&(s.tid=n.tenantId);let a=s;for(let f of Object.keys(a))a[f]===void 0&&delete a[f];let u=await n._getAppCheckToken(),l=u?`#${P3}=${encodeURIComponent(u)}`:"";return`${O3(n)}?${ou(a).slice(1)}${l}`}function O3({config:n}){return n.emulator?B_(n,N3):`https://${n.authDomain}/${M3}`}var __="webStorageSupport",V_=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Q_,this._completeRedirectFn=s3,this._overrideRedirectResult=r3}async _openPopup(e,t,r,i){var o;Ci((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");let s=await l1(e,t,r,E_(),i);return x3(e,s,z1())}async _openRedirect(e,t,r,i){await this._originValidation(e);let o=await l1(e,t,r,E_(),i);return BB(o),new Promise(()=>{})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:o}=this.eventManagers[t];return i?Promise.resolve(i):(Ci(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){let t=await C3(e),r=new L_(e);return t.register("authEvent",i=>(Q(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(__,{type:__},i=>{var o;let s=(o=i?.[0])===null||o===void 0?void 0:o[__];s!==void 0&&t(!!s),Xn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=f3(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return R1()||b1()||$_()}},Y1=V_;var d1="@firebase/auth",f1="1.10.8";var U_=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Q(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function k3(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function F3(n){vi(new gn("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;Q(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:s,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:M1(n)},l=new S_(r,i,o,u);return EB(l,t),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),vi(new gn("auth-internal",e=>{let t=zs(e.getProvider("auth").getImmediate());return(r=>new U_(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Nn(d1,f1,k3(n)),Nn(d1,f1,"esm2017")}var L3=300,V3=t_("authIdTokenMaxAge")||L3,h1=null,U3=n=>async e=>{let t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>V3)return;let i=t?.token;h1!==i&&(h1=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function Y_(n=$s()){let e=au(n,"auth");if(e.isInitialized())return e.getImmediate();let t=k1(n,{popupRedirectResolver:Y1,persistence:[K1,lh,Q_]}),r=t_("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let s=U3(o.toString());$1(t,s,()=>s(t.currentUser)),H1(t,a=>s(a))}}let i=Xv("auth");return i&&F1(t,`http://${i}`),t}function j3(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}mB({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let o=So("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",j3().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});F3("Browser");var fh=class n{app;auth;user=te(null);loading=te(!0);error=te(null);verifying=te(!1);constructor(){this.app=cu(js.firebase),this.auth=Y_(this.app),G_(this.auth,lh),W_(this.auth,e=>{this.user.set(e),this.loading.set(!1)}),oi(()=>{this.error()})}async signIn(e,t){this.error.set(null),await z_(this.auth,e,t)}async sendVerification(){let e=this.auth.currentUser;if(e){this.verifying.set(!0);try{await q_(e)}finally{this.verifying.set(!1)}}}async logout(){await K_(this.auth)}static \u0275fac=function(t){return new(t||n)};static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})};var Z1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},J1={};var kr,Z_;(function(){var n;function e(C,v){function E(){}E.prototype=v.prototype,C.D=v.prototype,C.prototype=new E,C.prototype.constructor=C,C.C=function(I,b,A){for(var _=Array(arguments.length-2),ar=2;ar<arguments.length;ar++)_[ar-2]=arguments[ar];return v.prototype[b].apply(I,_)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(C,v,E){E||(E=0);var I=Array(16);if(typeof v=="string")for(var b=0;16>b;++b)I[b]=v.charCodeAt(E++)|v.charCodeAt(E++)<<8|v.charCodeAt(E++)<<16|v.charCodeAt(E++)<<24;else for(b=0;16>b;++b)I[b]=v[E++]|v[E++]<<8|v[E++]<<16|v[E++]<<24;v=C.g[0],E=C.g[1],b=C.g[2];var A=C.g[3],_=v+(A^E&(b^A))+I[0]+3614090360&4294967295;v=E+(_<<7&4294967295|_>>>25),_=A+(b^v&(E^b))+I[1]+3905402710&4294967295,A=v+(_<<12&4294967295|_>>>20),_=b+(E^A&(v^E))+I[2]+606105819&4294967295,b=A+(_<<17&4294967295|_>>>15),_=E+(v^b&(A^v))+I[3]+3250441966&4294967295,E=b+(_<<22&4294967295|_>>>10),_=v+(A^E&(b^A))+I[4]+4118548399&4294967295,v=E+(_<<7&4294967295|_>>>25),_=A+(b^v&(E^b))+I[5]+1200080426&4294967295,A=v+(_<<12&4294967295|_>>>20),_=b+(E^A&(v^E))+I[6]+2821735955&4294967295,b=A+(_<<17&4294967295|_>>>15),_=E+(v^b&(A^v))+I[7]+4249261313&4294967295,E=b+(_<<22&4294967295|_>>>10),_=v+(A^E&(b^A))+I[8]+1770035416&4294967295,v=E+(_<<7&4294967295|_>>>25),_=A+(b^v&(E^b))+I[9]+2336552879&4294967295,A=v+(_<<12&4294967295|_>>>20),_=b+(E^A&(v^E))+I[10]+4294925233&4294967295,b=A+(_<<17&4294967295|_>>>15),_=E+(v^b&(A^v))+I[11]+2304563134&4294967295,E=b+(_<<22&4294967295|_>>>10),_=v+(A^E&(b^A))+I[12]+1804603682&4294967295,v=E+(_<<7&4294967295|_>>>25),_=A+(b^v&(E^b))+I[13]+4254626195&4294967295,A=v+(_<<12&4294967295|_>>>20),_=b+(E^A&(v^E))+I[14]+2792965006&4294967295,b=A+(_<<17&4294967295|_>>>15),_=E+(v^b&(A^v))+I[15]+1236535329&4294967295,E=b+(_<<22&4294967295|_>>>10),_=v+(b^A&(E^b))+I[1]+4129170786&4294967295,v=E+(_<<5&4294967295|_>>>27),_=A+(E^b&(v^E))+I[6]+3225465664&4294967295,A=v+(_<<9&4294967295|_>>>23),_=b+(v^E&(A^v))+I[11]+643717713&4294967295,b=A+(_<<14&4294967295|_>>>18),_=E+(A^v&(b^A))+I[0]+3921069994&4294967295,E=b+(_<<20&4294967295|_>>>12),_=v+(b^A&(E^b))+I[5]+3593408605&4294967295,v=E+(_<<5&4294967295|_>>>27),_=A+(E^b&(v^E))+I[10]+38016083&4294967295,A=v+(_<<9&4294967295|_>>>23),_=b+(v^E&(A^v))+I[15]+3634488961&4294967295,b=A+(_<<14&4294967295|_>>>18),_=E+(A^v&(b^A))+I[4]+3889429448&4294967295,E=b+(_<<20&4294967295|_>>>12),_=v+(b^A&(E^b))+I[9]+568446438&4294967295,v=E+(_<<5&4294967295|_>>>27),_=A+(E^b&(v^E))+I[14]+3275163606&4294967295,A=v+(_<<9&4294967295|_>>>23),_=b+(v^E&(A^v))+I[3]+4107603335&4294967295,b=A+(_<<14&4294967295|_>>>18),_=E+(A^v&(b^A))+I[8]+1163531501&4294967295,E=b+(_<<20&4294967295|_>>>12),_=v+(b^A&(E^b))+I[13]+2850285829&4294967295,v=E+(_<<5&4294967295|_>>>27),_=A+(E^b&(v^E))+I[2]+4243563512&4294967295,A=v+(_<<9&4294967295|_>>>23),_=b+(v^E&(A^v))+I[7]+1735328473&4294967295,b=A+(_<<14&4294967295|_>>>18),_=E+(A^v&(b^A))+I[12]+2368359562&4294967295,E=b+(_<<20&4294967295|_>>>12),_=v+(E^b^A)+I[5]+4294588738&4294967295,v=E+(_<<4&4294967295|_>>>28),_=A+(v^E^b)+I[8]+2272392833&4294967295,A=v+(_<<11&4294967295|_>>>21),_=b+(A^v^E)+I[11]+1839030562&4294967295,b=A+(_<<16&4294967295|_>>>16),_=E+(b^A^v)+I[14]+4259657740&4294967295,E=b+(_<<23&4294967295|_>>>9),_=v+(E^b^A)+I[1]+2763975236&4294967295,v=E+(_<<4&4294967295|_>>>28),_=A+(v^E^b)+I[4]+1272893353&4294967295,A=v+(_<<11&4294967295|_>>>21),_=b+(A^v^E)+I[7]+4139469664&4294967295,b=A+(_<<16&4294967295|_>>>16),_=E+(b^A^v)+I[10]+3200236656&4294967295,E=b+(_<<23&4294967295|_>>>9),_=v+(E^b^A)+I[13]+681279174&4294967295,v=E+(_<<4&4294967295|_>>>28),_=A+(v^E^b)+I[0]+3936430074&4294967295,A=v+(_<<11&4294967295|_>>>21),_=b+(A^v^E)+I[3]+3572445317&4294967295,b=A+(_<<16&4294967295|_>>>16),_=E+(b^A^v)+I[6]+76029189&4294967295,E=b+(_<<23&4294967295|_>>>9),_=v+(E^b^A)+I[9]+3654602809&4294967295,v=E+(_<<4&4294967295|_>>>28),_=A+(v^E^b)+I[12]+3873151461&4294967295,A=v+(_<<11&4294967295|_>>>21),_=b+(A^v^E)+I[15]+530742520&4294967295,b=A+(_<<16&4294967295|_>>>16),_=E+(b^A^v)+I[2]+3299628645&4294967295,E=b+(_<<23&4294967295|_>>>9),_=v+(b^(E|~A))+I[0]+4096336452&4294967295,v=E+(_<<6&4294967295|_>>>26),_=A+(E^(v|~b))+I[7]+1126891415&4294967295,A=v+(_<<10&4294967295|_>>>22),_=b+(v^(A|~E))+I[14]+2878612391&4294967295,b=A+(_<<15&4294967295|_>>>17),_=E+(A^(b|~v))+I[5]+4237533241&4294967295,E=b+(_<<21&4294967295|_>>>11),_=v+(b^(E|~A))+I[12]+1700485571&4294967295,v=E+(_<<6&4294967295|_>>>26),_=A+(E^(v|~b))+I[3]+2399980690&4294967295,A=v+(_<<10&4294967295|_>>>22),_=b+(v^(A|~E))+I[10]+4293915773&4294967295,b=A+(_<<15&4294967295|_>>>17),_=E+(A^(b|~v))+I[1]+2240044497&4294967295,E=b+(_<<21&4294967295|_>>>11),_=v+(b^(E|~A))+I[8]+1873313359&4294967295,v=E+(_<<6&4294967295|_>>>26),_=A+(E^(v|~b))+I[15]+4264355552&4294967295,A=v+(_<<10&4294967295|_>>>22),_=b+(v^(A|~E))+I[6]+2734768916&4294967295,b=A+(_<<15&4294967295|_>>>17),_=E+(A^(b|~v))+I[13]+1309151649&4294967295,E=b+(_<<21&4294967295|_>>>11),_=v+(b^(E|~A))+I[4]+4149444226&4294967295,v=E+(_<<6&4294967295|_>>>26),_=A+(E^(v|~b))+I[11]+3174756917&4294967295,A=v+(_<<10&4294967295|_>>>22),_=b+(v^(A|~E))+I[2]+718787259&4294967295,b=A+(_<<15&4294967295|_>>>17),_=E+(A^(b|~v))+I[9]+3951481745&4294967295,C.g[0]=C.g[0]+v&4294967295,C.g[1]=C.g[1]+(b+(_<<21&4294967295|_>>>11))&4294967295,C.g[2]=C.g[2]+b&4294967295,C.g[3]=C.g[3]+A&4294967295}r.prototype.u=function(C,v){v===void 0&&(v=C.length);for(var E=v-this.blockSize,I=this.B,b=this.h,A=0;A<v;){if(b==0)for(;A<=E;)i(this,C,A),A+=this.blockSize;if(typeof C=="string"){for(;A<v;)if(I[b++]=C.charCodeAt(A++),b==this.blockSize){i(this,I),b=0;break}}else for(;A<v;)if(I[b++]=C[A++],b==this.blockSize){i(this,I),b=0;break}}this.h=b,this.o+=v},r.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var v=1;v<C.length-8;++v)C[v]=0;var E=8*this.o;for(v=C.length-8;v<C.length;++v)C[v]=E&255,E/=256;for(this.u(C),C=Array(16),v=E=0;4>v;++v)for(var I=0;32>I;I+=8)C[E++]=this.g[v]>>>I&255;return C};function o(C,v){var E=a;return Object.prototype.hasOwnProperty.call(E,C)?E[C]:E[C]=v(C)}function s(C,v){this.h=v;for(var E=[],I=!0,b=C.length-1;0<=b;b--){var A=C[b]|0;I&&A==v||(E[b]=A,I=!1)}this.g=E}var a={};function u(C){return-128<=C&&128>C?o(C,function(v){return new s([v|0],0>v?-1:0)}):new s([C|0],0>C?-1:0)}function l(C){if(isNaN(C)||!isFinite(C))return p;if(0>C)return N(l(-C));for(var v=[],E=1,I=0;C>=E;I++)v[I]=C/E|0,E*=4294967296;return new s(v,0)}function f(C,v){if(C.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(C.charAt(0)=="-")return N(f(C.substring(1),v));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var E=l(Math.pow(v,8)),I=p,b=0;b<C.length;b+=8){var A=Math.min(8,C.length-b),_=parseInt(C.substring(b,b+A),v);8>A?(A=l(Math.pow(v,A)),I=I.j(A).add(l(_))):(I=I.j(E),I=I.add(l(_)))}return I}var p=u(0),g=u(1),y=u(16777216);n=s.prototype,n.m=function(){if(P(this))return-N(this).m();for(var C=0,v=1,E=0;E<this.g.length;E++){var I=this.i(E);C+=(0<=I?I:4294967296+I)*v,v*=4294967296}return C},n.toString=function(C){if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(T(this))return"0";if(P(this))return"-"+N(this).toString(C);for(var v=l(Math.pow(C,6)),E=this,I="";;){var b=Pe(E,v).g;E=j(E,b.j(v));var A=((0<E.g.length?E.g[0]:E.h)>>>0).toString(C);if(E=b,T(E))return A+I;for(;6>A.length;)A="0"+A;I=A+I}},n.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h};function T(C){if(C.h!=0)return!1;for(var v=0;v<C.g.length;v++)if(C.g[v]!=0)return!1;return!0}function P(C){return C.h==-1}n.l=function(C){return C=j(this,C),P(C)?-1:T(C)?0:1};function N(C){for(var v=C.g.length,E=[],I=0;I<v;I++)E[I]=~C.g[I];return new s(E,~C.h).add(g)}n.abs=function(){return P(this)?N(this):this},n.add=function(C){for(var v=Math.max(this.g.length,C.g.length),E=[],I=0,b=0;b<=v;b++){var A=I+(this.i(b)&65535)+(C.i(b)&65535),_=(A>>>16)+(this.i(b)>>>16)+(C.i(b)>>>16);I=_>>>16,A&=65535,_&=65535,E[b]=_<<16|A}return new s(E,E[E.length-1]&-2147483648?-1:0)};function j(C,v){return C.add(N(v))}n.j=function(C){if(T(this)||T(C))return p;if(P(this))return P(C)?N(this).j(N(C)):N(N(this).j(C));if(P(C))return N(this.j(N(C)));if(0>this.l(y)&&0>C.l(y))return l(this.m()*C.m());for(var v=this.g.length+C.g.length,E=[],I=0;I<2*v;I++)E[I]=0;for(I=0;I<this.g.length;I++)for(var b=0;b<C.g.length;b++){var A=this.i(I)>>>16,_=this.i(I)&65535,ar=C.i(b)>>>16,ya=C.i(b)&65535;E[2*I+2*b]+=_*ya,W(E,2*I+2*b),E[2*I+2*b+1]+=A*ya,W(E,2*I+2*b+1),E[2*I+2*b+1]+=_*ar,W(E,2*I+2*b+1),E[2*I+2*b+2]+=A*ar,W(E,2*I+2*b+2)}for(I=0;I<v;I++)E[I]=E[2*I+1]<<16|E[2*I];for(I=v;I<2*v;I++)E[I]=0;return new s(E,0)};function W(C,v){for(;(C[v]&65535)!=C[v];)C[v+1]+=C[v]>>>16,C[v]&=65535,v++}function re(C,v){this.g=C,this.h=v}function Pe(C,v){if(T(v))throw Error("division by zero");if(T(C))return new re(p,p);if(P(C))return v=Pe(N(C),v),new re(N(v.g),N(v.h));if(P(v))return v=Pe(C,N(v)),new re(N(v.g),v.h);if(30<C.g.length){if(P(C)||P(v))throw Error("slowDivide_ only works with positive integers.");for(var E=g,I=v;0>=I.l(C);)E=Pt(E),I=Pt(I);var b=xe(E,1),A=xe(I,1);for(I=xe(I,2),E=xe(E,2);!T(I);){var _=A.add(I);0>=_.l(C)&&(b=b.add(E),A=_),I=xe(I,1),E=xe(E,1)}return v=j(C,b.j(v)),new re(b,v)}for(b=p;0<=C.l(v);){for(E=Math.max(1,Math.floor(C.m()/v.m())),I=Math.ceil(Math.log(E)/Math.LN2),I=48>=I?1:Math.pow(2,I-48),A=l(E),_=A.j(v);P(_)||0<_.l(C);)E-=I,A=l(E),_=A.j(v);T(A)&&(A=g),b=b.add(A),C=j(C,_)}return new re(b,C)}n.A=function(C){return Pe(this,C).h},n.and=function(C){for(var v=Math.max(this.g.length,C.g.length),E=[],I=0;I<v;I++)E[I]=this.i(I)&C.i(I);return new s(E,this.h&C.h)},n.or=function(C){for(var v=Math.max(this.g.length,C.g.length),E=[],I=0;I<v;I++)E[I]=this.i(I)|C.i(I);return new s(E,this.h|C.h)},n.xor=function(C){for(var v=Math.max(this.g.length,C.g.length),E=[],I=0;I<v;I++)E[I]=this.i(I)^C.i(I);return new s(E,this.h^C.h)};function Pt(C){for(var v=C.g.length+1,E=[],I=0;I<v;I++)E[I]=C.i(I)<<1|C.i(I-1)>>>31;return new s(E,C.h)}function xe(C,v){var E=v>>5;v%=32;for(var I=C.g.length-E,b=[],A=0;A<I;A++)b[A]=0<v?C.i(A+E)>>>v|C.i(A+E+1)<<32-v:C.i(A+E);return new s(b,C.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Z_=J1.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=f,kr=J1.Integer=s}).apply(typeof Z1<"u"?Z1:typeof self<"u"?self:typeof window<"u"?window:{});var hh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Fr={};var J_,B3,qs,X_,vu,ph,e0,t0,n0;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,d,h){return c==Array.prototype||c==Object.prototype||(c[d]=h.value),c};function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof hh=="object"&&hh];for(var d=0;d<c.length;++d){var h=c[d];if(h&&h.Math==Math)return h}throw Error("Cannot find global object")}var r=t(this);function i(c,d){if(d)e:{var h=r;c=c.split(".");for(var m=0;m<c.length-1;m++){var S=c[m];if(!(S in h))break e;h=h[S]}c=c[c.length-1],m=h[c],d=d(m),d!=m&&d!=null&&e(h,c,{configurable:!0,writable:!0,value:d})}}function o(c,d){c instanceof String&&(c+="");var h=0,m=!1,S={next:function(){if(!m&&h<c.length){var R=h++;return{value:d(R,c[R]),done:!1}}return m=!0,{done:!0,value:void 0}}};return S[Symbol.iterator]=function(){return S},S}i("Array.prototype.values",function(c){return c||function(){return o(this,function(d,h){return h})}});var s=s||{},a=this||self;function u(c){var d=typeof c;return d=d!="object"?d:c?Array.isArray(c)?"array":d:"null",d=="array"||d=="object"&&typeof c.length=="number"}function l(c){var d=typeof c;return d=="object"&&c!=null||d=="function"}function f(c,d,h){return c.call.apply(c.bind,arguments)}function p(c,d,h){if(!c)throw Error();if(2<arguments.length){var m=Array.prototype.slice.call(arguments,2);return function(){var S=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(S,m),c.apply(d,S)}}return function(){return c.apply(d,arguments)}}function g(c,d,h){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:p,g.apply(null,arguments)}function y(c,d){var h=Array.prototype.slice.call(arguments,1);return function(){var m=h.slice();return m.push.apply(m,arguments),c.apply(this,m)}}function T(c,d){function h(){}h.prototype=d.prototype,c.aa=d.prototype,c.prototype=new h,c.prototype.constructor=c,c.Qb=function(m,S,R){for(var U=Array(arguments.length-2),Oe=2;Oe<arguments.length;Oe++)U[Oe-2]=arguments[Oe];return d.prototype[S].apply(m,U)}}function P(c){let d=c.length;if(0<d){let h=Array(d);for(let m=0;m<d;m++)h[m]=c[m];return h}return[]}function N(c,d){for(let h=1;h<arguments.length;h++){let m=arguments[h];if(u(m)){let S=c.length||0,R=m.length||0;c.length=S+R;for(let U=0;U<R;U++)c[S+U]=m[U]}else c.push(m)}}class j{constructor(d,h){this.i=d,this.j=h,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function W(c){return/^[\s\xa0]*$/.test(c)}function re(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function Pe(c){return Pe[" "](c),c}Pe[" "]=function(){};var Pt=re().indexOf("Gecko")!=-1&&!(re().toLowerCase().indexOf("webkit")!=-1&&re().indexOf("Edge")==-1)&&!(re().indexOf("Trident")!=-1||re().indexOf("MSIE")!=-1)&&re().indexOf("Edge")==-1;function xe(c,d,h){for(let m in c)d.call(h,c[m],m,c)}function C(c,d){for(let h in c)d.call(void 0,c[h],h,c)}function v(c){let d={};for(let h in c)d[h]=c[h];return d}let E="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function I(c,d){let h,m;for(let S=1;S<arguments.length;S++){m=arguments[S];for(h in m)c[h]=m[h];for(let R=0;R<E.length;R++)h=E[R],Object.prototype.hasOwnProperty.call(m,h)&&(c[h]=m[h])}}function b(c){var d=1;c=c.split(":");let h=[];for(;0<d&&c.length;)h.push(c.shift()),d--;return c.length&&h.push(c.join(":")),h}function A(c){a.setTimeout(()=>{throw c},0)}function _(){var c=lp;let d=null;return c.g&&(d=c.g,c.g=c.g.next,c.g||(c.h=null),d.next=null),d}class ar{constructor(){this.h=this.g=null}add(d,h){let m=ya.get();m.set(d,h),this.h?this.h.next=m:this.g=m,this.h=m}}var ya=new j(()=>new vM,c=>c.reset());class vM{constructor(){this.next=this.g=this.h=null}set(d,h){this.h=d,this.g=h,this.next=null}reset(){this.next=this.g=this.h=null}}let va,_a=!1,lp=new ar,bw=()=>{let c=a.Promise.resolve(void 0);va=()=>{c.then(_M)}};var _M=()=>{for(var c;c=_();){try{c.h.call(c.g)}catch(h){A(h)}var d=ya;d.j(c),100>d.h&&(d.h++,c.next=d.g,d.g=c)}_a=!1};function zr(){this.s=this.s,this.C=this.C}zr.prototype.s=!1,zr.prototype.ma=function(){this.s||(this.s=!0,this.N())},zr.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ct(c,d){this.type=c,this.g=this.target=d,this.defaultPrevented=!1}Ct.prototype.h=function(){this.defaultPrevented=!0};var EM=(function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,d=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let h=()=>{};a.addEventListener("test",h,d),a.removeEventListener("test",h,d)}catch{}return c})();function Ea(c,d){if(Ct.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var h=this.type=c.type,m=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=d,d=c.relatedTarget){if(Pt){e:{try{Pe(d.nodeName);var S=!0;break e}catch{}S=!1}S||(d=null)}}else h=="mouseover"?d=c.fromElement:h=="mouseout"&&(d=c.toElement);this.relatedTarget=d,m?(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:wM[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Ea.aa.h.call(this)}}T(Ea,Ct);var wM={2:"touch",3:"pen",4:"mouse"};Ea.prototype.h=function(){Ea.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var wa="closure_listenable_"+(1e6*Math.random()|0),IM=0;function CM(c,d,h,m,S){this.listener=c,this.proxy=null,this.src=d,this.type=h,this.capture=!!m,this.ha=S,this.key=++IM,this.da=this.fa=!1}function $u(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function zu(c){this.src=c,this.g={},this.h=0}zu.prototype.add=function(c,d,h,m,S){var R=c.toString();c=this.g[R],c||(c=this.g[R]=[],this.h++);var U=fp(c,d,m,S);return-1<U?(d=c[U],h||(d.fa=!1)):(d=new CM(d,this.src,R,!!m,S),d.fa=h,c.push(d)),d};function dp(c,d){var h=d.type;if(h in c.g){var m=c.g[h],S=Array.prototype.indexOf.call(m,d,void 0),R;(R=0<=S)&&Array.prototype.splice.call(m,S,1),R&&($u(d),c.g[h].length==0&&(delete c.g[h],c.h--))}}function fp(c,d,h,m){for(var S=0;S<c.length;++S){var R=c[S];if(!R.da&&R.listener==d&&R.capture==!!h&&R.ha==m)return S}return-1}var hp="closure_lm_"+(1e6*Math.random()|0),pp={};function Dw(c,d,h,m,S){if(m&&m.once)return Sw(c,d,h,m,S);if(Array.isArray(d)){for(var R=0;R<d.length;R++)Dw(c,d[R],h,m,S);return null}return h=vp(h),c&&c[wa]?c.K(d,h,l(m)?!!m.capture:!!m,S):Tw(c,d,h,!1,m,S)}function Tw(c,d,h,m,S,R){if(!d)throw Error("Invalid event type");var U=l(S)?!!S.capture:!!S,Oe=mp(c);if(Oe||(c[hp]=Oe=new zu(c)),h=Oe.add(d,h,m,U,R),h.proxy)return h;if(m=bM(),h.proxy=m,m.src=c,m.listener=h,c.addEventListener)EM||(S=U),S===void 0&&(S=!1),c.addEventListener(d.toString(),m,S);else if(c.attachEvent)c.attachEvent(xw(d.toString()),m);else if(c.addListener&&c.removeListener)c.addListener(m);else throw Error("addEventListener and attachEvent are unavailable.");return h}function bM(){function c(h){return d.call(c.src,c.listener,h)}let d=DM;return c}function Sw(c,d,h,m,S){if(Array.isArray(d)){for(var R=0;R<d.length;R++)Sw(c,d[R],h,m,S);return null}return h=vp(h),c&&c[wa]?c.L(d,h,l(m)?!!m.capture:!!m,S):Tw(c,d,h,!0,m,S)}function Aw(c,d,h,m,S){if(Array.isArray(d))for(var R=0;R<d.length;R++)Aw(c,d[R],h,m,S);else m=l(m)?!!m.capture:!!m,h=vp(h),c&&c[wa]?(c=c.i,d=String(d).toString(),d in c.g&&(R=c.g[d],h=fp(R,h,m,S),-1<h&&($u(R[h]),Array.prototype.splice.call(R,h,1),R.length==0&&(delete c.g[d],c.h--)))):c&&(c=mp(c))&&(d=c.g[d.toString()],c=-1,d&&(c=fp(d,h,m,S)),(h=-1<c?d[c]:null)&&gp(h))}function gp(c){if(typeof c!="number"&&c&&!c.da){var d=c.src;if(d&&d[wa])dp(d.i,c);else{var h=c.type,m=c.proxy;d.removeEventListener?d.removeEventListener(h,m,c.capture):d.detachEvent?d.detachEvent(xw(h),m):d.addListener&&d.removeListener&&d.removeListener(m),(h=mp(d))?(dp(h,c),h.h==0&&(h.src=null,d[hp]=null)):$u(c)}}}function xw(c){return c in pp?pp[c]:pp[c]="on"+c}function DM(c,d){if(c.da)c=!0;else{d=new Ea(d,this);var h=c.listener,m=c.ha||c.src;c.fa&&gp(c),c=h.call(m,d)}return c}function mp(c){return c=c[hp],c instanceof zu?c:null}var yp="__closure_events_fn_"+(1e9*Math.random()>>>0);function vp(c){return typeof c=="function"?c:(c[yp]||(c[yp]=function(d){return c.handleEvent(d)}),c[yp])}function bt(){zr.call(this),this.i=new zu(this),this.M=this,this.F=null}T(bt,zr),bt.prototype[wa]=!0,bt.prototype.removeEventListener=function(c,d,h,m){Aw(this,c,d,h,m)};function Ot(c,d){var h,m=c.F;if(m)for(h=[];m;m=m.F)h.push(m);if(c=c.M,m=d.type||d,typeof d=="string")d=new Ct(d,c);else if(d instanceof Ct)d.target=d.target||c;else{var S=d;d=new Ct(m,c),I(d,S)}if(S=!0,h)for(var R=h.length-1;0<=R;R--){var U=d.g=h[R];S=qu(U,m,!0,d)&&S}if(U=d.g=c,S=qu(U,m,!0,d)&&S,S=qu(U,m,!1,d)&&S,h)for(R=0;R<h.length;R++)U=d.g=h[R],S=qu(U,m,!1,d)&&S}bt.prototype.N=function(){if(bt.aa.N.call(this),this.i){var c=this.i,d;for(d in c.g){for(var h=c.g[d],m=0;m<h.length;m++)$u(h[m]);delete c.g[d],c.h--}}this.F=null},bt.prototype.K=function(c,d,h,m){return this.i.add(String(c),d,!1,h,m)},bt.prototype.L=function(c,d,h,m){return this.i.add(String(c),d,!0,h,m)};function qu(c,d,h,m){if(d=c.i.g[String(d)],!d)return!0;d=d.concat();for(var S=!0,R=0;R<d.length;++R){var U=d[R];if(U&&!U.da&&U.capture==h){var Oe=U.listener,mt=U.ha||U.src;U.fa&&dp(c.i,U),S=Oe.call(mt,m)!==!1&&S}}return S&&!m.defaultPrevented}function Rw(c,d,h){if(typeof c=="function")h&&(c=g(c,h));else if(c&&typeof c.handleEvent=="function")c=g(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(c,d||0)}function Mw(c){c.g=Rw(()=>{c.g=null,c.i&&(c.i=!1,Mw(c))},c.l);let d=c.h;c.h=null,c.m.apply(null,d)}class TM extends zr{constructor(d,h){super(),this.m=d,this.l=h,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:Mw(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ia(c){zr.call(this),this.h=c,this.g={}}T(Ia,zr);var Nw=[];function Pw(c){xe(c.g,function(d,h){this.g.hasOwnProperty(h)&&gp(d)},c),c.g={}}Ia.prototype.N=function(){Ia.aa.N.call(this),Pw(this)},Ia.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var _p=a.JSON.stringify,SM=a.JSON.parse,AM=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function Ep(){}Ep.prototype.h=null;function Ow(c){return c.h||(c.h=c.i())}function kw(){}var Ca={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function wp(){Ct.call(this,"d")}T(wp,Ct);function Ip(){Ct.call(this,"c")}T(Ip,Ct);var Fi={},Fw=null;function Gu(){return Fw=Fw||new bt}Fi.La="serverreachability";function Lw(c){Ct.call(this,Fi.La,c)}T(Lw,Ct);function ba(c){let d=Gu();Ot(d,new Lw(d))}Fi.STAT_EVENT="statevent";function Vw(c,d){Ct.call(this,Fi.STAT_EVENT,c),this.stat=d}T(Vw,Ct);function kt(c){let d=Gu();Ot(d,new Vw(d,c))}Fi.Ma="timingevent";function Uw(c,d){Ct.call(this,Fi.Ma,c),this.size=d}T(Uw,Ct);function Da(c,d){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},d)}function Ta(){this.g=!0}Ta.prototype.xa=function(){this.g=!1};function xM(c,d,h,m,S,R){c.info(function(){if(c.g)if(R)for(var U="",Oe=R.split("&"),mt=0;mt<Oe.length;mt++){var _e=Oe[mt].split("=");if(1<_e.length){var Dt=_e[0];_e=_e[1];var Tt=Dt.split("_");U=2<=Tt.length&&Tt[1]=="type"?U+(Dt+"="+_e+"&"):U+(Dt+"=redacted&")}}else U=null;else U=R;return"XMLHTTP REQ ("+m+") [attempt "+S+"]: "+d+`
`+h+`
`+U})}function RM(c,d,h,m,S,R,U){c.info(function(){return"XMLHTTP RESP ("+m+") [ attempt "+S+"]: "+d+`
`+h+`
`+R+" "+U})}function zo(c,d,h,m){c.info(function(){return"XMLHTTP TEXT ("+d+"): "+NM(c,h)+(m?" "+m:"")})}function MM(c,d){c.info(function(){return"TIMEOUT: "+d})}Ta.prototype.info=function(){};function NM(c,d){if(!c.g)return d;if(!d)return null;try{var h=JSON.parse(d);if(h){for(c=0;c<h.length;c++)if(Array.isArray(h[c])){var m=h[c];if(!(2>m.length)){var S=m[1];if(Array.isArray(S)&&!(1>S.length)){var R=S[0];if(R!="noop"&&R!="stop"&&R!="close")for(var U=1;U<S.length;U++)S[U]=""}}}}return _p(h)}catch{return d}}var Wu={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},jw={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Cp;function Ku(){}T(Ku,Ep),Ku.prototype.g=function(){return new XMLHttpRequest},Ku.prototype.i=function(){return{}},Cp=new Ku;function qr(c,d,h,m){this.j=c,this.i=d,this.l=h,this.R=m||1,this.U=new Ia(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Bw}function Bw(){this.i=null,this.g="",this.h=!1}var Hw={},bp={};function Dp(c,d,h){c.L=1,c.v=Ju(cr(d)),c.m=h,c.P=!0,$w(c,null)}function $w(c,d){c.F=Date.now(),Qu(c),c.A=cr(c.v);var h=c.A,m=c.R;Array.isArray(m)||(m=[String(m)]),rI(h.i,"t",m),c.C=0,h=c.j.J,c.h=new Bw,c.g=wI(c.j,h?d:null,!c.m),0<c.O&&(c.M=new TM(g(c.Y,c,c.g),c.O)),d=c.U,h=c.g,m=c.ca;var S="readystatechange";Array.isArray(S)||(S&&(Nw[0]=S.toString()),S=Nw);for(var R=0;R<S.length;R++){var U=Dw(h,S[R],m||d.handleEvent,!1,d.h||d);if(!U)break;d.g[U.key]=U}d=c.H?v(c.H):{},c.m?(c.u||(c.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,d)):(c.u="GET",c.g.ea(c.A,c.u,null,d)),ba(),xM(c.i,c.u,c.A,c.l,c.R,c.m)}qr.prototype.ca=function(c){c=c.target;let d=this.M;d&&ur(c)==3?d.j():this.Y(c)},qr.prototype.Y=function(c){try{if(c==this.g)e:{let Tt=ur(this.g);var d=this.g.Ba();let Wo=this.g.Z();if(!(3>Tt)&&(Tt!=3||this.g&&(this.h.h||this.g.oa()||lI(this.g)))){this.J||Tt!=4||d==7||(d==8||0>=Wo?ba(3):ba(2)),Tp(this);var h=this.g.Z();this.X=h;t:if(zw(this)){var m=lI(this.g);c="";var S=m.length,R=ur(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Li(this),Sa(this);var U="";break t}this.h.i=new a.TextDecoder}for(d=0;d<S;d++)this.h.h=!0,c+=this.h.i.decode(m[d],{stream:!(R&&d==S-1)});m.length=0,this.h.g+=c,this.C=0,U=this.h.g}else U=this.g.oa();if(this.o=h==200,RM(this.i,this.u,this.A,this.l,this.R,Tt,h),this.o){if(this.T&&!this.K){t:{if(this.g){var Oe,mt=this.g;if((Oe=mt.g?mt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!W(Oe)){var _e=Oe;break t}}_e=null}if(h=_e)zo(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Sp(this,h);else{this.o=!1,this.s=3,kt(12),Li(this),Sa(this);break e}}if(this.P){h=!0;let _n;for(;!this.J&&this.C<U.length;)if(_n=PM(this,U),_n==bp){Tt==4&&(this.s=4,kt(14),h=!1),zo(this.i,this.l,null,"[Incomplete Response]");break}else if(_n==Hw){this.s=4,kt(15),zo(this.i,this.l,U,"[Invalid Chunk]"),h=!1;break}else zo(this.i,this.l,_n,null),Sp(this,_n);if(zw(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Tt!=4||U.length!=0||this.h.h||(this.s=1,kt(16),h=!1),this.o=this.o&&h,!h)zo(this.i,this.l,U,"[Invalid Chunked Response]"),Li(this),Sa(this);else if(0<U.length&&!this.W){this.W=!0;var Dt=this.j;Dt.g==this&&Dt.ba&&!Dt.M&&(Dt.j.info("Great, no buffering proxy detected. Bytes received: "+U.length),Pp(Dt),Dt.M=!0,kt(11))}}else zo(this.i,this.l,U,null),Sp(this,U);Tt==4&&Li(this),this.o&&!this.J&&(Tt==4?yI(this.j,this):(this.o=!1,Qu(this)))}else YM(this.g),h==400&&0<U.indexOf("Unknown SID")?(this.s=3,kt(12)):(this.s=0,kt(13)),Li(this),Sa(this)}}}catch{}};function zw(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function PM(c,d){var h=c.C,m=d.indexOf(`
`,h);return m==-1?bp:(h=Number(d.substring(h,m)),isNaN(h)?Hw:(m+=1,m+h>d.length?bp:(d=d.slice(m,m+h),c.C=m+h,d)))}qr.prototype.cancel=function(){this.J=!0,Li(this)};function Qu(c){c.S=Date.now()+c.I,qw(c,c.I)}function qw(c,d){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Da(g(c.ba,c),d)}function Tp(c){c.B&&(a.clearTimeout(c.B),c.B=null)}qr.prototype.ba=function(){this.B=null;let c=Date.now();0<=c-this.S?(MM(this.i,this.A),this.L!=2&&(ba(),kt(17)),Li(this),this.s=2,Sa(this)):qw(this,this.S-c)};function Sa(c){c.j.G==0||c.J||yI(c.j,c)}function Li(c){Tp(c);var d=c.M;d&&typeof d.ma=="function"&&d.ma(),c.M=null,Pw(c.U),c.g&&(d=c.g,c.g=null,d.abort(),d.ma())}function Sp(c,d){try{var h=c.j;if(h.G!=0&&(h.g==c||Ap(h.h,c))){if(!c.K&&Ap(h.h,c)&&h.G==3){try{var m=h.Da.g.parse(d)}catch{m=null}if(Array.isArray(m)&&m.length==3){var S=m;if(S[0]==0){e:if(!h.u){if(h.g)if(h.g.F+3e3<c.F)rl(h),tl(h);else break e;Np(h),kt(18)}}else h.za=S[1],0<h.za-h.T&&37500>S[2]&&h.F&&h.v==0&&!h.C&&(h.C=Da(g(h.Za,h),6e3));if(1>=Kw(h.h)&&h.ca){try{h.ca()}catch{}h.ca=void 0}}else Ui(h,11)}else if((c.K||h.g==c)&&rl(h),!W(d))for(S=h.Da.g.parse(d),d=0;d<S.length;d++){let _e=S[d];if(h.T=_e[0],_e=_e[1],h.G==2)if(_e[0]=="c"){h.K=_e[1],h.ia=_e[2];let Dt=_e[3];Dt!=null&&(h.la=Dt,h.j.info("VER="+h.la));let Tt=_e[4];Tt!=null&&(h.Aa=Tt,h.j.info("SVER="+h.Aa));let Wo=_e[5];Wo!=null&&typeof Wo=="number"&&0<Wo&&(m=1.5*Wo,h.L=m,h.j.info("backChannelRequestTimeoutMs_="+m)),m=h;let _n=c.g;if(_n){let ol=_n.g?_n.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ol){var R=m.h;R.g||ol.indexOf("spdy")==-1&&ol.indexOf("quic")==-1&&ol.indexOf("h2")==-1||(R.j=R.l,R.g=new Set,R.h&&(xp(R,R.h),R.h=null))}if(m.D){let Op=_n.g?_n.g.getResponseHeader("X-HTTP-Session-Id"):null;Op&&(m.ya=Op,Le(m.I,m.D,Op))}}h.G=3,h.l&&h.l.ua(),h.ba&&(h.R=Date.now()-c.F,h.j.info("Handshake RTT: "+h.R+"ms")),m=h;var U=c;if(m.qa=EI(m,m.J?m.ia:null,m.W),U.K){Qw(m.h,U);var Oe=U,mt=m.L;mt&&(Oe.I=mt),Oe.B&&(Tp(Oe),Qu(Oe)),m.g=U}else gI(m);0<h.i.length&&nl(h)}else _e[0]!="stop"&&_e[0]!="close"||Ui(h,7);else h.G==3&&(_e[0]=="stop"||_e[0]=="close"?_e[0]=="stop"?Ui(h,7):Mp(h):_e[0]!="noop"&&h.l&&h.l.ta(_e),h.v=0)}}ba(4)}catch{}}var OM=class{constructor(c,d){this.g=c,this.map=d}};function Gw(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ww(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Kw(c){return c.h?1:c.g?c.g.size:0}function Ap(c,d){return c.h?c.h==d:c.g?c.g.has(d):!1}function xp(c,d){c.g?c.g.add(d):c.h=d}function Qw(c,d){c.h&&c.h==d?c.h=null:c.g&&c.g.has(d)&&c.g.delete(d)}Gw.prototype.cancel=function(){if(this.i=Yw(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function Yw(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let d=c.i;for(let h of c.g.values())d=d.concat(h.D);return d}return P(c.i)}function kM(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(u(c)){for(var d=[],h=c.length,m=0;m<h;m++)d.push(c[m]);return d}d=[],h=0;for(m in c)d[h++]=c[m];return d}function FM(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||typeof c=="string"){var d=[];c=c.length;for(var h=0;h<c;h++)d.push(h);return d}d=[],h=0;for(let m in c)d[h++]=m;return d}}}function Zw(c,d){if(c.forEach&&typeof c.forEach=="function")c.forEach(d,void 0);else if(u(c)||typeof c=="string")Array.prototype.forEach.call(c,d,void 0);else for(var h=FM(c),m=kM(c),S=m.length,R=0;R<S;R++)d.call(void 0,m[R],h&&h[R],c)}var Jw=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function LM(c,d){if(c){c=c.split("&");for(var h=0;h<c.length;h++){var m=c[h].indexOf("="),S=null;if(0<=m){var R=c[h].substring(0,m);S=c[h].substring(m+1)}else R=c[h];d(R,S?decodeURIComponent(S.replace(/\+/g," ")):"")}}}function Vi(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Vi){this.h=c.h,Yu(this,c.j),this.o=c.o,this.g=c.g,Zu(this,c.s),this.l=c.l;var d=c.i,h=new Ra;h.i=d.i,d.g&&(h.g=new Map(d.g),h.h=d.h),Xw(this,h),this.m=c.m}else c&&(d=String(c).match(Jw))?(this.h=!1,Yu(this,d[1]||"",!0),this.o=Aa(d[2]||""),this.g=Aa(d[3]||"",!0),Zu(this,d[4]),this.l=Aa(d[5]||"",!0),Xw(this,d[6]||"",!0),this.m=Aa(d[7]||"")):(this.h=!1,this.i=new Ra(null,this.h))}Vi.prototype.toString=function(){var c=[],d=this.j;d&&c.push(xa(d,eI,!0),":");var h=this.g;return(h||d=="file")&&(c.push("//"),(d=this.o)&&c.push(xa(d,eI,!0),"@"),c.push(encodeURIComponent(String(h)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h=this.s,h!=null&&c.push(":",String(h))),(h=this.l)&&(this.g&&h.charAt(0)!="/"&&c.push("/"),c.push(xa(h,h.charAt(0)=="/"?jM:UM,!0))),(h=this.i.toString())&&c.push("?",h),(h=this.m)&&c.push("#",xa(h,HM)),c.join("")};function cr(c){return new Vi(c)}function Yu(c,d,h){c.j=h?Aa(d,!0):d,c.j&&(c.j=c.j.replace(/:$/,""))}function Zu(c,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);c.s=d}else c.s=null}function Xw(c,d,h){d instanceof Ra?(c.i=d,$M(c.i,c.h)):(h||(d=xa(d,BM)),c.i=new Ra(d,c.h))}function Le(c,d,h){c.i.set(d,h)}function Ju(c){return Le(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Aa(c,d){return c?d?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function xa(c,d,h){return typeof c=="string"?(c=encodeURI(c).replace(d,VM),h&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function VM(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var eI=/[#\/\?@]/g,UM=/[#\?:]/g,jM=/[#\?]/g,BM=/[#\?@]/g,HM=/#/g;function Ra(c,d){this.h=this.g=null,this.i=c||null,this.j=!!d}function Gr(c){c.g||(c.g=new Map,c.h=0,c.i&&LM(c.i,function(d,h){c.add(decodeURIComponent(d.replace(/\+/g," ")),h)}))}n=Ra.prototype,n.add=function(c,d){Gr(this),this.i=null,c=qo(this,c);var h=this.g.get(c);return h||this.g.set(c,h=[]),h.push(d),this.h+=1,this};function tI(c,d){Gr(c),d=qo(c,d),c.g.has(d)&&(c.i=null,c.h-=c.g.get(d).length,c.g.delete(d))}function nI(c,d){return Gr(c),d=qo(c,d),c.g.has(d)}n.forEach=function(c,d){Gr(this),this.g.forEach(function(h,m){h.forEach(function(S){c.call(d,S,m,this)},this)},this)},n.na=function(){Gr(this);let c=Array.from(this.g.values()),d=Array.from(this.g.keys()),h=[];for(let m=0;m<d.length;m++){let S=c[m];for(let R=0;R<S.length;R++)h.push(d[m])}return h},n.V=function(c){Gr(this);let d=[];if(typeof c=="string")nI(this,c)&&(d=d.concat(this.g.get(qo(this,c))));else{c=Array.from(this.g.values());for(let h=0;h<c.length;h++)d=d.concat(c[h])}return d},n.set=function(c,d){return Gr(this),this.i=null,c=qo(this,c),nI(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[d]),this.h+=1,this},n.get=function(c,d){return c?(c=this.V(c),0<c.length?String(c[0]):d):d};function rI(c,d,h){tI(c,d),0<h.length&&(c.i=null,c.g.set(qo(c,d),P(h)),c.h+=h.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],d=Array.from(this.g.keys());for(var h=0;h<d.length;h++){var m=d[h];let R=encodeURIComponent(String(m)),U=this.V(m);for(m=0;m<U.length;m++){var S=R;U[m]!==""&&(S+="="+encodeURIComponent(String(U[m]))),c.push(S)}}return this.i=c.join("&")};function qo(c,d){return d=String(d),c.j&&(d=d.toLowerCase()),d}function $M(c,d){d&&!c.j&&(Gr(c),c.i=null,c.g.forEach(function(h,m){var S=m.toLowerCase();m!=S&&(tI(this,m),rI(this,S,h))},c)),c.j=d}function zM(c,d){let h=new Ta;if(a.Image){let m=new Image;m.onload=y(Wr,h,"TestLoadImage: loaded",!0,d,m),m.onerror=y(Wr,h,"TestLoadImage: error",!1,d,m),m.onabort=y(Wr,h,"TestLoadImage: abort",!1,d,m),m.ontimeout=y(Wr,h,"TestLoadImage: timeout",!1,d,m),a.setTimeout(function(){m.ontimeout&&m.ontimeout()},1e4),m.src=c}else d(!1)}function qM(c,d){let h=new Ta,m=new AbortController,S=setTimeout(()=>{m.abort(),Wr(h,"TestPingServer: timeout",!1,d)},1e4);fetch(c,{signal:m.signal}).then(R=>{clearTimeout(S),R.ok?Wr(h,"TestPingServer: ok",!0,d):Wr(h,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(S),Wr(h,"TestPingServer: error",!1,d)})}function Wr(c,d,h,m,S){try{S&&(S.onload=null,S.onerror=null,S.onabort=null,S.ontimeout=null),m(h)}catch{}}function GM(){this.g=new AM}function WM(c,d,h){let m=h||"";try{Zw(c,function(S,R){let U=S;l(S)&&(U=_p(S)),d.push(m+R+"="+encodeURIComponent(U))})}catch(S){throw d.push(m+"type="+encodeURIComponent("_badmap")),S}}function Ma(c){this.l=c.Ub||null,this.j=c.eb||!1}T(Ma,Ep),Ma.prototype.g=function(){return new Xu(this.l,this.j)},Ma.prototype.i=(function(c){return function(){return c}})({});function Xu(c,d){bt.call(this),this.D=c,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}T(Xu,bt),n=Xu.prototype,n.open=function(c,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=d,this.readyState=1,Pa(this)},n.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(d.body=c),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Na(this)),this.readyState=0},n.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Pa(this)),this.g&&(this.readyState=3,Pa(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;iI(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function iI(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}n.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var d=c.value?c.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!c.done}))&&(this.response=this.responseText+=d)}c.done?Na(this):Pa(this),this.readyState==3&&iI(this)}},n.Ra=function(c){this.g&&(this.response=this.responseText=c,Na(this))},n.Qa=function(c){this.g&&(this.response=c,Na(this))},n.ga=function(){this.g&&Na(this)};function Na(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Pa(c)}n.setRequestHeader=function(c,d){this.u.append(c,d)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],d=this.h.entries();for(var h=d.next();!h.done;)h=h.value,c.push(h[0]+": "+h[1]),h=d.next();return c.join(`\r
`)};function Pa(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Xu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function oI(c){let d="";return xe(c,function(h,m){d+=m,d+=":",d+=h,d+=`\r
`}),d}function Rp(c,d,h){e:{for(m in h){var m=!1;break e}m=!0}m||(h=oI(h),typeof c=="string"?h!=null&&encodeURIComponent(String(h)):Le(c,d,h))}function $e(c){bt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}T($e,bt);var KM=/^https?$/i,QM=["POST","PUT"];n=$e.prototype,n.Ha=function(c){this.J=c},n.ea=function(c,d,h,m){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);d=d?d.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Cp.g(),this.v=this.o?Ow(this.o):Ow(Cp),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(d,String(c),!0),this.B=!1}catch(R){sI(this,R);return}if(c=h||"",h=new Map(this.headers),m)if(Object.getPrototypeOf(m)===Object.prototype)for(var S in m)h.set(S,m[S]);else if(typeof m.keys=="function"&&typeof m.get=="function")for(let R of m.keys())h.set(R,m.get(R));else throw Error("Unknown input type for opt_headers: "+String(m));m=Array.from(h.keys()).find(R=>R.toLowerCase()=="content-type"),S=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(QM,d,void 0))||m||S||h.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[R,U]of h)this.g.setRequestHeader(R,U);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{uI(this),this.u=!0,this.g.send(c),this.u=!1}catch(R){sI(this,R)}};function sI(c,d){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=d,c.m=5,aI(c),el(c)}function aI(c){c.A||(c.A=!0,Ot(c,"complete"),Ot(c,"error"))}n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Ot(this,"complete"),Ot(this,"abort"),el(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),el(this,!0)),$e.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?cI(this):this.bb())},n.bb=function(){cI(this)};function cI(c){if(c.h&&typeof s<"u"&&(!c.v[1]||ur(c)!=4||c.Z()!=2)){if(c.u&&ur(c)==4)Rw(c.Ea,0,c);else if(Ot(c,"readystatechange"),ur(c)==4){c.h=!1;try{let U=c.Z();e:switch(U){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var h;if(!(h=d)){var m;if(m=U===0){var S=String(c.D).match(Jw)[1]||null;!S&&a.self&&a.self.location&&(S=a.self.location.protocol.slice(0,-1)),m=!KM.test(S?S.toLowerCase():"")}h=m}if(h)Ot(c,"complete"),Ot(c,"success");else{c.m=6;try{var R=2<ur(c)?c.g.statusText:""}catch{R=""}c.l=R+" ["+c.Z()+"]",aI(c)}}finally{el(c)}}}}function el(c,d){if(c.g){uI(c);let h=c.g,m=c.v[0]?()=>{}:null;c.g=null,c.v=null,d||Ot(c,"ready");try{h.onreadystatechange=m}catch{}}}function uI(c){c.I&&(a.clearTimeout(c.I),c.I=null)}n.isActive=function(){return!!this.g};function ur(c){return c.g?c.g.readyState:0}n.Z=function(){try{return 2<ur(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(c){if(this.g){var d=this.g.responseText;return c&&d.indexOf(c)==0&&(d=d.substring(c.length)),SM(d)}};function lI(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function YM(c){let d={};c=(c.g&&2<=ur(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let m=0;m<c.length;m++){if(W(c[m]))continue;var h=b(c[m]);let S=h[0];if(h=h[1],typeof h!="string")continue;h=h.trim();let R=d[S]||[];d[S]=R,R.push(h)}C(d,function(m){return m.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Oa(c,d,h){return h&&h.internalChannelParams&&h.internalChannelParams[c]||d}function dI(c){this.Aa=0,this.i=[],this.j=new Ta,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Oa("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Oa("baseRetryDelayMs",5e3,c),this.cb=Oa("retryDelaySeedMs",1e4,c),this.Wa=Oa("forwardChannelMaxRetries",2,c),this.wa=Oa("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new Gw(c&&c.concurrentRequestLimit),this.Da=new GM,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=dI.prototype,n.la=8,n.G=1,n.connect=function(c,d,h,m){kt(0),this.W=c,this.H=d||{},h&&m!==void 0&&(this.H.OSID=h,this.H.OAID=m),this.F=this.X,this.I=EI(this,null,this.W),nl(this)};function Mp(c){if(fI(c),c.G==3){var d=c.U++,h=cr(c.I);if(Le(h,"SID",c.K),Le(h,"RID",d),Le(h,"TYPE","terminate"),ka(c,h),d=new qr(c,c.j,d),d.L=2,d.v=Ju(cr(h)),h=!1,a.navigator&&a.navigator.sendBeacon)try{h=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!h&&a.Image&&(new Image().src=d.v,h=!0),h||(d.g=wI(d.j,null),d.g.ea(d.v)),d.F=Date.now(),Qu(d)}_I(c)}function tl(c){c.g&&(Pp(c),c.g.cancel(),c.g=null)}function fI(c){tl(c),c.u&&(a.clearTimeout(c.u),c.u=null),rl(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function nl(c){if(!Ww(c.h)&&!c.s){c.s=!0;var d=c.Ga;va||bw(),_a||(va(),_a=!0),lp.add(d,c),c.B=0}}function ZM(c,d){return Kw(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=d.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Da(g(c.Ga,c,d),vI(c,c.B)),c.B++,!0)}n.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;let S=new qr(this,this.j,c),R=this.o;if(this.S&&(R?(R=v(R),I(R,this.S)):R=this.S),this.m!==null||this.O||(S.H=R,R=null),this.P)e:{for(var d=0,h=0;h<this.i.length;h++){t:{var m=this.i[h];if("__data__"in m.map&&(m=m.map.__data__,typeof m=="string")){m=m.length;break t}m=void 0}if(m===void 0)break;if(d+=m,4096<d){d=h;break e}if(d===4096||h===this.i.length-1){d=h+1;break e}}d=1e3}else d=1e3;d=pI(this,S,d),h=cr(this.I),Le(h,"RID",c),Le(h,"CVER",22),this.D&&Le(h,"X-HTTP-Session-Id",this.D),ka(this,h),R&&(this.O?d="headers="+encodeURIComponent(String(oI(R)))+"&"+d:this.m&&Rp(h,this.m,R)),xp(this.h,S),this.Ua&&Le(h,"TYPE","init"),this.P?(Le(h,"$req",d),Le(h,"SID","null"),S.T=!0,Dp(S,h,null)):Dp(S,h,d),this.G=2}}else this.G==3&&(c?hI(this,c):this.i.length==0||Ww(this.h)||hI(this))};function hI(c,d){var h;d?h=d.l:h=c.U++;let m=cr(c.I);Le(m,"SID",c.K),Le(m,"RID",h),Le(m,"AID",c.T),ka(c,m),c.m&&c.o&&Rp(m,c.m,c.o),h=new qr(c,c.j,h,c.B+1),c.m===null&&(h.H=c.o),d&&(c.i=d.D.concat(c.i)),d=pI(c,h,1e3),h.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),xp(c.h,h),Dp(h,m,d)}function ka(c,d){c.H&&xe(c.H,function(h,m){Le(d,m,h)}),c.l&&Zw({},function(h,m){Le(d,m,h)})}function pI(c,d,h){h=Math.min(c.i.length,h);var m=c.l?g(c.l.Na,c.l,c):null;e:{var S=c.i;let R=-1;for(;;){let U=["count="+h];R==-1?0<h?(R=S[0].g,U.push("ofs="+R)):R=0:U.push("ofs="+R);let Oe=!0;for(let mt=0;mt<h;mt++){let _e=S[mt].g,Dt=S[mt].map;if(_e-=R,0>_e)R=Math.max(0,S[mt].g-100),Oe=!1;else try{WM(Dt,U,"req"+_e+"_")}catch{m&&m(Dt)}}if(Oe){m=U.join("&");break e}}}return c=c.i.splice(0,h),d.D=c,m}function gI(c){if(!c.g&&!c.u){c.Y=1;var d=c.Fa;va||bw(),_a||(va(),_a=!0),lp.add(d,c),c.v=0}}function Np(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Da(g(c.Fa,c),vI(c,c.v)),c.v++,!0)}n.Fa=function(){if(this.u=null,mI(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Da(g(this.ab,this),c)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,kt(10),tl(this),mI(this))};function Pp(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function mI(c){c.g=new qr(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var d=cr(c.qa);Le(d,"RID","rpc"),Le(d,"SID",c.K),Le(d,"AID",c.T),Le(d,"CI",c.F?"0":"1"),!c.F&&c.ja&&Le(d,"TO",c.ja),Le(d,"TYPE","xmlhttp"),ka(c,d),c.m&&c.o&&Rp(d,c.m,c.o),c.L&&(c.g.I=c.L);var h=c.g;c=c.ia,h.L=1,h.v=Ju(cr(d)),h.m=null,h.P=!0,$w(h,c)}n.Za=function(){this.C!=null&&(this.C=null,tl(this),Np(this),kt(19))};function rl(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function yI(c,d){var h=null;if(c.g==d){rl(c),Pp(c),c.g=null;var m=2}else if(Ap(c.h,d))h=d.D,Qw(c.h,d),m=1;else return;if(c.G!=0){if(d.o)if(m==1){h=d.m?d.m.length:0,d=Date.now()-d.F;var S=c.B;m=Gu(),Ot(m,new Uw(m,h)),nl(c)}else gI(c);else if(S=d.s,S==3||S==0&&0<d.X||!(m==1&&ZM(c,d)||m==2&&Np(c)))switch(h&&0<h.length&&(d=c.h,d.i=d.i.concat(h)),S){case 1:Ui(c,5);break;case 4:Ui(c,10);break;case 3:Ui(c,6);break;default:Ui(c,2)}}}function vI(c,d){let h=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(h*=2),h*d}function Ui(c,d){if(c.j.info("Error code "+d),d==2){var h=g(c.fb,c),m=c.Xa;let S=!m;m=new Vi(m||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Yu(m,"https"),Ju(m),S?zM(m.toString(),h):qM(m.toString(),h)}else kt(2);c.G=0,c.l&&c.l.sa(d),_I(c),fI(c)}n.fb=function(c){c?(this.j.info("Successfully pinged google.com"),kt(2)):(this.j.info("Failed to ping google.com"),kt(1))};function _I(c){if(c.G=0,c.ka=[],c.l){let d=Yw(c.h);(d.length!=0||c.i.length!=0)&&(N(c.ka,d),N(c.ka,c.i),c.h.i.length=0,P(c.i),c.i.length=0),c.l.ra()}}function EI(c,d,h){var m=h instanceof Vi?cr(h):new Vi(h);if(m.g!="")d&&(m.g=d+"."+m.g),Zu(m,m.s);else{var S=a.location;m=S.protocol,d=d?d+"."+S.hostname:S.hostname,S=+S.port;var R=new Vi(null);m&&Yu(R,m),d&&(R.g=d),S&&Zu(R,S),h&&(R.l=h),m=R}return h=c.D,d=c.ya,h&&d&&Le(m,h,d),Le(m,"VER",c.la),ka(c,m),m}function wI(c,d,h){if(d&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=c.Ca&&!c.pa?new $e(new Ma({eb:h})):new $e(c.pa),d.Ha(c.J),d}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function II(){}n=II.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function il(){}il.prototype.g=function(c,d){return new zt(c,d)};function zt(c,d){bt.call(this),this.g=new dI(d),this.l=c,this.h=d&&d.messageUrlParams||null,c=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(c?c["X-WebChannel-Content-Type"]=d.messageContentType:c={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(c?c["X-WebChannel-Client-Profile"]=d.va:c={"X-WebChannel-Client-Profile":d.va}),this.g.S=c,(c=d&&d.Sb)&&!W(c)&&(this.g.m=c),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!W(d)&&(this.g.D=d,c=this.h,c!==null&&d in c&&(c=this.h,d in c&&delete c[d])),this.j=new Go(this)}T(zt,bt),zt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},zt.prototype.close=function(){Mp(this.g)},zt.prototype.o=function(c){var d=this.g;if(typeof c=="string"){var h={};h.__data__=c,c=h}else this.u&&(h={},h.__data__=_p(c),c=h);d.i.push(new OM(d.Ya++,c)),d.G==3&&nl(d)},zt.prototype.N=function(){this.g.l=null,delete this.j,Mp(this.g),delete this.g,zt.aa.N.call(this)};function CI(c){wp.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var d=c.__sm__;if(d){e:{for(let h in d){c=h;break e}c=void 0}(this.i=c)&&(c=this.i,d=d!==null&&c in d?d[c]:void 0),this.data=d}else this.data=c}T(CI,wp);function bI(){Ip.call(this),this.status=1}T(bI,Ip);function Go(c){this.g=c}T(Go,II),Go.prototype.ua=function(){Ot(this.g,"a")},Go.prototype.ta=function(c){Ot(this.g,new CI(c))},Go.prototype.sa=function(c){Ot(this.g,new bI)},Go.prototype.ra=function(){Ot(this.g,"b")},il.prototype.createWebChannel=il.prototype.g,zt.prototype.send=zt.prototype.o,zt.prototype.open=zt.prototype.m,zt.prototype.close=zt.prototype.close,n0=Fr.createWebChannelTransport=function(){return new il},t0=Fr.getStatEventTarget=function(){return Gu()},e0=Fr.Event=Fi,ph=Fr.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Wu.NO_ERROR=0,Wu.TIMEOUT=8,Wu.HTTP_ERROR=6,vu=Fr.ErrorCode=Wu,jw.COMPLETE="complete",X_=Fr.EventType=jw,kw.EventType=Ca,Ca.OPEN="a",Ca.CLOSE="b",Ca.ERROR="c",Ca.MESSAGE="d",bt.prototype.listen=bt.prototype.K,qs=Fr.WebChannel=kw,B3=Fr.FetchXmlHttpFactory=Ma,$e.prototype.listenOnce=$e.prototype.L,$e.prototype.getLastError=$e.prototype.Ka,$e.prototype.getLastErrorCode=$e.prototype.Ba,$e.prototype.getStatus=$e.prototype.Z,$e.prototype.getResponseJson=$e.prototype.Oa,$e.prototype.getResponseText=$e.prototype.oa,$e.prototype.send=$e.prototype.ea,$e.prototype.setWithCredentials=$e.prototype.Ha,J_=Fr.XhrIo=$e}).apply(typeof hh<"u"?hh:typeof self<"u"?self:typeof window<"u"?window:{});var X1="@firebase/firestore",ex="4.8.0";var pt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};pt.UNAUTHENTICATED=new pt(null),pt.GOOGLE_CREDENTIALS=new pt("google-credentials-uid"),pt.FIRST_PARTY=new pt("first-party-uid"),pt.MOCK_USER=new pt("mock-user");var da="11.10.0";var ko=new mi("@firebase/firestore");function Gs(){return ko.logLevel}function H(n,...e){if(ko.logLevel<=he.DEBUG){let t=e.map(GE);ko.debug(`Firestore (${da}): ${n}`,...t)}}function Vr(n,...e){if(ko.logLevel<=he.ERROR){let t=e.map(GE);ko.error(`Firestore (${da}): ${n}`,...t)}}function xi(n,...e){if(ko.logLevel<=he.WARN){let t=e.map(GE);ko.warn(`Firestore (${da}): ${n}`,...t)}}function GE(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function X(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,Gx(n,r,t)}function Gx(n,e,t){let r=`FIRESTORE (${da}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Vr(r),new Error(r)}function Ae(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||Gx(e,i,r)}function oe(n,e){return n}var O={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},B=class extends en{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var er=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var wh=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},a0=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(pt.UNAUTHENTICATED))}shutdown(){}},c0=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},u0=class{constructor(e){this.t=e,this.currentUser=pt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ae(this.o===void 0,42304);let r=this.i,i=u=>this.i!==r?(r=this.i,t(u)):Promise.resolve(),o=new er;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new er,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},a=u=>{H("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):(H("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new er)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(H("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ae(typeof r.accessToken=="string",31837,{l:r}),new wh(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return Ae(e===null||typeof e=="string",2055,{h:e}),new pt(e)}},l0=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=pt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},d0=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new l0(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(pt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Ih=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},f0=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,tn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Ae(this.o===void 0,3512);let r=o=>{o.error!=null&&H("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.m;return this.m=o.token,H("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{H("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):H("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Ih(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ae(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Ih(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function H3(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}function Wx(){return new TextEncoder}var bu=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=H3(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%62))}return r}};function fe(n,e){return n<e?-1:n>e?1:0}function h0(n,e){let t=0;for(;t<n.length&&t<e.length;){let r=n.codePointAt(t),i=e.codePointAt(t);if(r!==i){if(r<128&&i<128)return fe(r,i);{let o=Wx(),s=$3(o.encode(tx(n,t)),o.encode(tx(e,t)));return s!==0?s:fe(r,i)}}t+=r>65535?2:1}return fe(n.length,e.length)}function tx(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function $3(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return fe(n[t],e[t]);return fe(n.length,e.length)}function Xs(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var nx="__name__",Ch=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&X(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&X(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=n.compareSegments(e.get(i),t.get(i));if(o!==0)return o}return fe(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):h0(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return kr.fromString(e.substring(4,e.length-2))}},Be=class n extends Ch{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new B(O.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},z3=/^[_a-zA-Z][_a-zA-Z0-9]*$/,rn=class n extends Ch{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return z3.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===nx}static keyField(){return new n([nx])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new B(O.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new B(O.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new B(O.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new B(O.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var Y=class n{constructor(e){this.path=e}static fromPath(e){return new n(Be.fromString(e))}static fromName(e){return new n(Be.fromString(e).popFirst(5))}static empty(){return new n(Be.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Be.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Be.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new Be(e.slice()))}};function Kx(n,e,t){if(!t)throw new B(O.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function q3(n,e,t,r){if(e===!0&&r===!0)throw new B(O.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function rx(n){if(!Y.isDocumentKey(n))throw new B(O.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function ix(n){if(Y.isDocumentKey(n))throw new B(O.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Qx(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function tp(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":X(12329,{type:typeof n})}function tr(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new B(O.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=tp(n);throw new B(O.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function ot(n,e){let t={typeString:n};return e&&(t.value=e),t}function Lu(n,e){if(!Qx(n))throw new B(O.INVALID_ARGUMENT,"JSON must be an object");let t;for(let r in e)if(e[r]){let i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}let s=n[r];if(i&&typeof s!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&s!==o.value){t=`Expected '${r}' field to equal '${o.value}'`;break}}if(t)throw new B(O.INVALID_ARGUMENT,t);return!0}var ox=-62135596800,sx=1e6,st=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*sx);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new B(O.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new B(O.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<ox)throw new B(O.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new B(O.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/sx}_compareTo(e){return this.seconds===e.seconds?fe(this.nanoseconds,e.nanoseconds):fe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Lu(e,n._jsonSchema))return new n(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-ox;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};st._jsonSchemaVersion="firestore/timestamp/1.0",st._jsonSchema={type:ot("string",st._jsonSchemaVersion),seconds:ot("number"),nanoseconds:ot("number")};var ce=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new st(0,0))}static max(){return new n(new st(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Du=-1,p0=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};p0.UNKNOWN_ID=-1;function G3(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=ce.fromTimestamp(r===1e9?new st(t+1,0):new st(t,r));return new Fo(i,Y.empty(),e)}function W3(n){return new Fo(n.readTime,n.key,Du)}var Fo=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(ce.min(),Y.empty(),Du)}static max(){return new n(ce.max(),Y.empty(),Du)}};function K3(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Y.comparator(n.documentKey,e.documentKey),t!==0?t:fe(n.largestBatchId,e.largestBatchId))}var Q3="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",g0=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};async function fa(n){if(n.code!==O.FAILED_PRECONDITION||n.message!==Q3)throw n;H("LocalStore","Unexpectedly lost primary lease")}var F=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&X(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},u=>r(u))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let u=0;u<o;u++){let l=u;t(e[l]).next(f=>{s[l]=f,++a,a===o&&r(s)},f=>i(f))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};function Y3(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function ha(n){return n.name==="IndexedDbTransactionError"}var WE=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this._e(i),this.ae=i=>r.writeSequenceNumber(i))}_e(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ae&&this.ae(t),t}}n.ue=-1;return n})(),KE=-1;function np(n){return n==null}function Tu(n){return n===0&&1/n==-1/0}function Z3(n){return typeof n=="number"&&Number.isInteger(n)&&!Tu(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var Yx="";function J3(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=ax(e)),e=X3(n.get(t),e);return ax(e)}function X3(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case Yx:t+="";break;default:t+=o}}return t}function ax(n){return n+Yx+""}var e4="remoteDocuments",Zx="owner";var Jx="mutationQueues";var Xx="mutations";var eR="documentMutations",t4="remoteDocumentsV14";var tR="remoteDocumentGlobal";var nR="targets";var rR="targetDocuments";var iR="targetGlobal",oR="collectionParents";var sR="clientMetadata";var aR="bundles";var cR="namedQueries";var n4="indexConfiguration";var r4="indexState";var i4="indexEntries";var uR="documentOverlays";var o4="globals";var s4=[Jx,Xx,eR,e4,nR,Zx,iR,rR,sR,tR,oR,aR,cR],Zre=[...s4,uR],a4=[Jx,Xx,eR,t4,nR,Zx,iR,rR,sR,tR,oR,aR,cR,uR],c4=a4,u4=[...c4,n4,r4,i4];var Jre=[...u4,o4];function cx(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ki(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function lR(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Ge=class n{constructor(e,t){this.comparator=e,this.root=t||nr.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,nr.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,nr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ys(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ys(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ys(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ys(this.root,e,this.comparator,!0)}},Ys=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},nr=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw X(43730,{key:this.key,value:this.value});if(this.right.isRed())throw X(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw X(27949);return e+(this.isRed()?0:1)}};nr.EMPTY=null,nr.RED=!0,nr.BLACK=!1;nr.EMPTY=new class{constructor(){this.size=0}get key(){throw X(57766)}get value(){throw X(16141)}get color(){throw X(16727)}get left(){throw X(29726)}get right(){throw X(36894)}copy(e,t,r,i,o){return this}insert(e,t,r){return new nr(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var gt=class n{constructor(e){this.comparator=e,this.data=new Ge(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new bh(this.data.getIterator())}getIteratorFrom(e){return new bh(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},bh=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var yn=class n{constructor(e){this.fields=e,e.sort(rn.comparator)}static empty(){return new n([])}unionWith(e){let t=new gt(rn.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Xs(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var Dh=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Nt=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=(function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Dh("Invalid base64 string: "+o):o}})(e);return new n(t)}static fromUint8Array(e){let t=(function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o})(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return fe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Nt.EMPTY_BYTE_STRING=new Nt("");var l4=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ur(n){if(Ae(!!n,39018),typeof n=="string"){let e=0,t=l4.exec(n);if(Ae(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:je(n.seconds),nanos:je(n.nanos)}}function je(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function jr(n){return typeof n=="string"?Nt.fromBase64String(n):Nt.fromUint8Array(n)}var dR="server_timestamp",fR="__type__",hR="__previous_value__",pR="__local_write_time__";function QE(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[fR])===null||t===void 0?void 0:t.stringValue)===dR}function rp(n){let e=n.mapValue.fields[hR];return QE(e)?rp(e):e}function Su(n){let e=Ur(n.mapValue.fields[pR].timestampValue);return new st(e.seconds,e.nanos)}var m0=class{constructor(e,t,r,i,o,s,a,u,l,f){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l,this.isUsingEmulator=f}},Th="(default)",Sh=class n{constructor(e,t){this.projectId=e,this.database=t||Th}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===Th}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var YE="__type__",gR="__max__",gh={mapValue:{fields:{__type__:{stringValue:gR}}}},ZE="__vector__",ea="value";function Ri(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?QE(n)?4:yR(n)?9007199254740991:mR(n)?10:11:X(28295,{value:n})}function or(n,e){if(n===e)return!0;let t=Ri(n);if(t!==Ri(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Su(n).isEqual(Su(e));case 3:return(function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=Ur(i.timestampValue),a=Ur(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,o){return jr(i.bytesValue).isEqual(jr(o.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,o){return je(i.geoPointValue.latitude)===je(o.geoPointValue.latitude)&&je(i.geoPointValue.longitude)===je(o.geoPointValue.longitude)})(n,e);case 2:return(function(i,o){if("integerValue"in i&&"integerValue"in o)return je(i.integerValue)===je(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=je(i.doubleValue),a=je(o.doubleValue);return s===a?Tu(s)===Tu(a):isNaN(s)&&isNaN(a)}return!1})(n,e);case 9:return Xs(n.arrayValue.values||[],e.arrayValue.values||[],or);case 10:case 11:return(function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(cx(s)!==cx(a))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(a[u]===void 0||!or(s[u],a[u])))return!1;return!0})(n,e);default:return X(52216,{left:n})}}function Au(n,e){return(n.values||[]).find(t=>or(t,e))!==void 0}function ta(n,e){if(n===e)return 0;let t=Ri(n),r=Ri(e);if(t!==r)return fe(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return fe(n.booleanValue,e.booleanValue);case 2:return(function(o,s){let a=je(o.integerValue||o.doubleValue),u=je(s.integerValue||s.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1})(n,e);case 3:return ux(n.timestampValue,e.timestampValue);case 4:return ux(Su(n),Su(e));case 5:return h0(n.stringValue,e.stringValue);case 6:return(function(o,s){let a=jr(o),u=jr(s);return a.compareTo(u)})(n.bytesValue,e.bytesValue);case 7:return(function(o,s){let a=o.split("/"),u=s.split("/");for(let l=0;l<a.length&&l<u.length;l++){let f=fe(a[l],u[l]);if(f!==0)return f}return fe(a.length,u.length)})(n.referenceValue,e.referenceValue);case 8:return(function(o,s){let a=fe(je(o.latitude),je(s.latitude));return a!==0?a:fe(je(o.longitude),je(s.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return lx(n.arrayValue,e.arrayValue);case 10:return(function(o,s){var a,u,l,f;let p=o.fields||{},g=s.fields||{},y=(a=p[ea])===null||a===void 0?void 0:a.arrayValue,T=(u=g[ea])===null||u===void 0?void 0:u.arrayValue,P=fe(((l=y?.values)===null||l===void 0?void 0:l.length)||0,((f=T?.values)===null||f===void 0?void 0:f.length)||0);return P!==0?P:lx(y,T)})(n.mapValue,e.mapValue);case 11:return(function(o,s){if(o===gh.mapValue&&s===gh.mapValue)return 0;if(o===gh.mapValue)return 1;if(s===gh.mapValue)return-1;let a=o.fields||{},u=Object.keys(a),l=s.fields||{},f=Object.keys(l);u.sort(),f.sort();for(let p=0;p<u.length&&p<f.length;++p){let g=h0(u[p],f[p]);if(g!==0)return g;let y=ta(a[u[p]],l[f[p]]);if(y!==0)return y}return fe(u.length,f.length)})(n.mapValue,e.mapValue);default:throw X(23264,{le:t})}}function ux(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return fe(n,e);let t=Ur(n),r=Ur(e),i=fe(t.seconds,r.seconds);return i!==0?i:fe(t.nanos,r.nanos)}function lx(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=ta(t[i],r[i]);if(o)return o}return fe(t.length,r.length)}function na(n){return y0(n)}function y0(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){let r=Ur(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return jr(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Y.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=y0(o);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${y0(t.fields[s])}`;return i+"}"})(n.mapValue):X(61005,{value:n})}function vh(n){switch(Ri(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=rp(n);return e?16+vh(e):16;case 5:return 2*n.stringValue.length;case 6:return jr(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce((i,o)=>i+vh(o),0)})(n.arrayValue);case 10:case 11:return(function(r){let i=0;return ki(r.fields,(o,s)=>{i+=o.length+vh(s)}),i})(n.mapValue);default:throw X(13486,{value:n})}}function dx(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function v0(n){return!!n&&"integerValue"in n}function JE(n){return!!n&&"arrayValue"in n}function fx(n){return!!n&&"nullValue"in n}function hx(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function _h(n){return!!n&&"mapValue"in n}function mR(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[YE])===null||t===void 0?void 0:t.stringValue)===ZE}function Eu(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return ki(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Eu(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Eu(n.arrayValue.values[t]);return e}return Object.assign({},n)}function yR(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===gR}var eie={mapValue:{fields:{[YE]:{stringValue:ZE},[ea]:{arrayValue:{}}}}};var nn=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!_h(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Eu(t)}setAll(e){let t=rn.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){let u=this.getFieldsMap(t);this.applyChanges(u,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=Eu(s):i.push(a.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());_h(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return or(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];_h(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){ki(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(Eu(this.value))}};function vR(n){let e=[];return ki(n.fields,(t,r)=>{let i=new rn([t]);if(_h(r)){let o=vR(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new yn(e)}var Pn=class n{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new n(e,0,ce.min(),ce.min(),ce.min(),nn.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,ce.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,ce.min(),ce.min(),nn.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,ce.min(),ce.min(),nn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ce.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=nn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=nn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ce.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var ra=class{constructor(e,t){this.position=e,this.inclusive=t}};function px(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=Y.comparator(Y.fromName(s.referenceValue),t.key):r=ta(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function gx(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!or(n.position[t],e.position[t]))return!1;return!0}var Lo=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function d4(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Ah=class{},it=class n extends Ah{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new E0(e,t,r):t==="array-contains"?new C0(e,r):t==="in"?new b0(e,r):t==="not-in"?new D0(e,r):t==="array-contains-any"?new T0(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new w0(e,r):new I0(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(ta(t,this.value)):t!==null&&Ri(this.value)===Ri(t)&&this.matchesComparison(ta(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return X(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},On=class n extends Ah{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new n(e,t)}matches(e){return _R(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}};function _R(n){return n.op==="and"}function ER(n){return f4(n)&&_R(n)}function f4(n){for(let e of n.filters)if(e instanceof On)return!1;return!0}function _0(n){if(n instanceof it)return n.field.canonicalString()+n.op.toString()+na(n.value);if(ER(n))return n.filters.map(e=>_0(e)).join(",");{let e=n.filters.map(t=>_0(t)).join(",");return`${n.op}(${e})`}}function wR(n,e){return n instanceof it?(function(r,i){return i instanceof it&&r.op===i.op&&r.field.isEqual(i.field)&&or(r.value,i.value)})(n,e):n instanceof On?(function(r,i){return i instanceof On&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&wR(s,i.filters[a]),!0):!1})(n,e):void X(19439)}function IR(n){return n instanceof it?(function(t){return`${t.field.canonicalString()} ${t.op} ${na(t.value)}`})(n):n instanceof On?(function(t){return t.op.toString()+" {"+t.getFilters().map(IR).join(" ,")+"}"})(n):"Filter"}var E0=class extends it{constructor(e,t,r){super(e,t,r),this.key=Y.fromName(r.referenceValue)}matches(e){let t=Y.comparator(e.key,this.key);return this.matchesComparison(t)}},w0=class extends it{constructor(e,t){super(e,"in",t),this.keys=CR("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},I0=class extends it{constructor(e,t){super(e,"not-in",t),this.keys=CR("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function CR(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>Y.fromName(r.referenceValue))}var C0=class extends it{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return JE(t)&&Au(t.arrayValue,this.value)}},b0=class extends it{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&Au(this.value.arrayValue,t)}},D0=class extends it{constructor(e,t){super(e,"not-in",t)}matches(e){if(Au(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Au(this.value.arrayValue,t)}},T0=class extends it{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!JE(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Au(this.value.arrayValue,r))}};var S0=class{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.Pe=null}};function mx(n,e=null,t=[],r=[],i=null,o=null,s=null){return new S0(n,e,t,r,i,o,s)}function XE(n){let e=oe(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>_0(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>(function(o){return o.field.canonicalString()+o.dir})(r)).join(","),np(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>na(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>na(r)).join(",")),e.Pe=t}return e.Pe}function ew(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!d4(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!wR(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!gx(n.startAt,e.startAt)&&gx(n.endAt,e.endAt)}function A0(n){return Y.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var Mi=class{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=u,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}};function h4(n,e,t,r,i,o,s,a){return new Mi(n,e,t,r,i,o,s,a)}function tw(n){return new Mi(n)}function yx(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function bR(n){return n.collectionGroup!==null}function wu(n){let e=oe(n);if(e.Te===null){e.Te=[];let t=new Set;for(let o of e.explicitOrderBy)e.Te.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new gt(rn.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.Te.push(new Lo(o,r))}),t.has(rn.keyField().canonicalString())||e.Te.push(new Lo(rn.keyField(),r))}return e.Te}function rr(n){let e=oe(n);return e.Ie||(e.Ie=p4(e,wu(n))),e.Ie}function p4(n,e){if(n.limitType==="F")return mx(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new Lo(i.field,o)});let t=n.endAt?new ra(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new ra(n.startAt.position,n.startAt.inclusive):null;return mx(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function x0(n,e){let t=n.filters.concat([e]);return new Mi(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function R0(n,e,t){return new Mi(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function ip(n,e){return ew(rr(n),rr(e))&&n.limitType===e.limitType}function DR(n){return`${XE(rr(n))}|lt:${n.limitType}`}function Ws(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>IR(i)).join(", ")}]`),np(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>(function(s){return`${s.field.canonicalString()} (${s.dir})`})(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>na(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>na(i)).join(",")),`Target(${r})`})(rr(n))}; limitType=${n.limitType})`}function op(n,e){return e.isFoundDocument()&&(function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):Y.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)})(n,e)&&(function(r,i){for(let o of wu(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(s,a,u){let l=px(s,a,u);return s.inclusive?l<=0:l<0})(r.startAt,wu(r),i)||r.endAt&&!(function(s,a,u){let l=px(s,a,u);return s.inclusive?l>=0:l>0})(r.endAt,wu(r),i))})(n,e)}function g4(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function TR(n){return(e,t)=>{let r=!1;for(let i of wu(n)){let o=m4(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function m4(n,e,t){let r=n.field.isKeyField()?Y.comparator(e.key,t.key):(function(o,s,a){let u=s.data.field(o),l=a.data.field(o);return u!==null&&l!==null?ta(u,l):X(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return X(19790,{direction:n.dir})}}var Br=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ki(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return lR(this.inner)}size(){return this.innerSize}};var y4=new Ge(Y.comparator);function Hr(){return y4}var SR=new Ge(Y.comparator);function _u(...n){let e=SR;for(let t of n)e=e.insert(t.key,t);return e}function AR(n){let e=SR;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Ro(){return Iu()}function xR(){return Iu()}function Iu(){return new Br(n=>n.toString(),(n,e)=>n.isEqual(e))}var v4=new Ge(Y.comparator),_4=new gt(Y.comparator);function pe(...n){let e=_4;for(let t of n)e=e.add(t);return e}var E4=new gt(fe);function w4(){return E4}function nw(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Tu(e)?"-0":e}}function RR(n){return{integerValue:""+n}}function I4(n,e){return Z3(e)?RR(e):nw(n,e)}var ia=class{constructor(){this._=void 0}};function C4(n,e,t){return n instanceof oa?(function(i,o){let s={fields:{[fR]:{stringValue:dR},[pR]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&QE(o)&&(o=rp(o)),o&&(s.fields[hR]=o),{mapValue:s}})(t,e):n instanceof Vo?NR(n,e):n instanceof Uo?PR(n,e):(function(i,o){let s=MR(i,o),a=vx(s)+vx(i.Ee);return v0(s)&&v0(i.Ee)?RR(a):nw(i.serializer,a)})(n,e)}function b4(n,e,t){return n instanceof Vo?NR(n,e):n instanceof Uo?PR(n,e):t}function MR(n,e){return n instanceof sa?(function(r){return v0(r)||(function(o){return!!o&&"doubleValue"in o})(r)})(e)?e:{integerValue:0}:null}var oa=class extends ia{},Vo=class extends ia{constructor(e){super(),this.elements=e}};function NR(n,e){let t=OR(e);for(let r of n.elements)t.some(i=>or(i,r))||t.push(r);return{arrayValue:{values:t}}}var Uo=class extends ia{constructor(e){super(),this.elements=e}};function PR(n,e){let t=OR(e);for(let r of n.elements)t=t.filter(i=>!or(i,r));return{arrayValue:{values:t}}}var sa=class extends ia{constructor(e,t){super(),this.serializer=e,this.Ee=t}};function vx(n){return je(n.integerValue||n.doubleValue)}function OR(n){return JE(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function D4(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof Vo&&i instanceof Vo||r instanceof Uo&&i instanceof Uo?Xs(r.elements,i.elements,or):r instanceof sa&&i instanceof sa?or(r.Ee,i.Ee):r instanceof oa&&i instanceof oa})(n.transform,e.transform)}var M0=class{constructor(e,t){this.version=e,this.transformResults=t}},Lr=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Eh(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var aa=class{};function kR(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new xu(n.key,Lr.none()):new jo(n.key,n.data,Lr.none());{let t=n.data,r=nn.empty(),i=new gt(rn.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new sr(n.key,r,new yn(i.toArray()),Lr.none())}}function T4(n,e,t){n instanceof jo?(function(i,o,s){let a=i.value.clone(),u=Ex(i.fieldTransforms,o,s.transformResults);a.setAll(u),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()})(n,e,t):n instanceof sr?(function(i,o,s){if(!Eh(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=Ex(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(FR(i)),u.setAll(a),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()})(n,e,t):(function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()})(0,e,t)}function Cu(n,e,t,r){return n instanceof jo?(function(o,s,a,u){if(!Eh(o.precondition,s))return a;let l=o.value.clone(),f=wx(o.fieldTransforms,u,s);return l.setAll(f),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null})(n,e,t,r):n instanceof sr?(function(o,s,a,u){if(!Eh(o.precondition,s))return a;let l=wx(o.fieldTransforms,u,s),f=s.data;return f.setAll(FR(o)),f.setAll(l),s.convertToFoundDocument(s.version,f).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))})(n,e,t,r):(function(o,s,a){return Eh(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a})(n,e,t)}function S4(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=MR(r.transform,i||null);o!=null&&(t===null&&(t=nn.empty()),t.set(r.field,o))}return t||null}function _x(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Xs(r,i,(o,s)=>D4(o,s))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var jo=class extends aa{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},sr=class extends aa{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function FR(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function Ex(n,e,t){let r=new Map;Ae(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,b4(s,a,t[i]))}return r}function wx(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,C4(o,s,e))}return r}var xu=class extends aa{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},N0=class extends aa{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var P0=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&T4(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=Cu(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=Cu(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=xR();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;let u=kR(s,a);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(ce.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),pe())}isEqual(e){return this.batchId===e.batchId&&Xs(this.mutations,e.mutations,(t,r)=>_x(t,r))&&Xs(this.baseMutations,e.baseMutations,(t,r)=>_x(t,r))}},O0=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Ae(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=(function(){return v4})(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var k0=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var F0=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var nt,me;function A4(n){switch(n){case O.OK:return X(64938);case O.CANCELLED:case O.UNKNOWN:case O.DEADLINE_EXCEEDED:case O.RESOURCE_EXHAUSTED:case O.INTERNAL:case O.UNAVAILABLE:case O.UNAUTHENTICATED:return!1;case O.INVALID_ARGUMENT:case O.NOT_FOUND:case O.ALREADY_EXISTS:case O.PERMISSION_DENIED:case O.FAILED_PRECONDITION:case O.ABORTED:case O.OUT_OF_RANGE:case O.UNIMPLEMENTED:case O.DATA_LOSS:return!0;default:return X(15467,{code:n})}}function LR(n){if(n===void 0)return Vr("GRPC error has no .code"),O.UNKNOWN;switch(n){case nt.OK:return O.OK;case nt.CANCELLED:return O.CANCELLED;case nt.UNKNOWN:return O.UNKNOWN;case nt.DEADLINE_EXCEEDED:return O.DEADLINE_EXCEEDED;case nt.RESOURCE_EXHAUSTED:return O.RESOURCE_EXHAUSTED;case nt.INTERNAL:return O.INTERNAL;case nt.UNAVAILABLE:return O.UNAVAILABLE;case nt.UNAUTHENTICATED:return O.UNAUTHENTICATED;case nt.INVALID_ARGUMENT:return O.INVALID_ARGUMENT;case nt.NOT_FOUND:return O.NOT_FOUND;case nt.ALREADY_EXISTS:return O.ALREADY_EXISTS;case nt.PERMISSION_DENIED:return O.PERMISSION_DENIED;case nt.FAILED_PRECONDITION:return O.FAILED_PRECONDITION;case nt.ABORTED:return O.ABORTED;case nt.OUT_OF_RANGE:return O.OUT_OF_RANGE;case nt.UNIMPLEMENTED:return O.UNIMPLEMENTED;case nt.DATA_LOSS:return O.DATA_LOSS;default:return X(39323,{code:n})}}(me=nt||(nt={}))[me.OK=0]="OK",me[me.CANCELLED=1]="CANCELLED",me[me.UNKNOWN=2]="UNKNOWN",me[me.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",me[me.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",me[me.NOT_FOUND=5]="NOT_FOUND",me[me.ALREADY_EXISTS=6]="ALREADY_EXISTS",me[me.PERMISSION_DENIED=7]="PERMISSION_DENIED",me[me.UNAUTHENTICATED=16]="UNAUTHENTICATED",me[me.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",me[me.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",me[me.ABORTED=10]="ABORTED",me[me.OUT_OF_RANGE=11]="OUT_OF_RANGE",me[me.UNIMPLEMENTED=12]="UNIMPLEMENTED",me[me.INTERNAL=13]="INTERNAL",me[me.UNAVAILABLE=14]="UNAVAILABLE",me[me.DATA_LOSS=15]="DATA_LOSS";var Ix=null;var x4=new kr([4294967295,4294967295],0);function Cx(n){let e=Wx().encode(n),t=new Z_;return t.update(e),new Uint8Array(t.digest())}function bx(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new kr([t,r],0),new kr([i,o],0)]}var L0=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Mo(`Invalid padding: ${t}`);if(r<0)throw new Mo(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Mo(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Mo(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=kr.fromNumber(this.fe)}pe(e,t,r){let i=e.add(t.multiply(kr.fromNumber(r)));return i.compare(x4)===1&&(i=new kr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;let t=Cx(e),[r,i]=bx(t);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);if(!this.ye(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.fe===0)return;let t=Cx(e),[r,i]=bx(t);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);this.we(s)}}we(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},Mo=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var xh=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,Ru.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(ce.min(),i,new Ge(fe),Hr(),pe())}},Ru=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,pe(),pe(),pe())}};var Zs=class{constructor(e,t,r,i){this.Se=e,this.removedTargetIds=t,this.key=r,this.be=i}},Rh=class{constructor(e,t){this.targetId=e,this.De=t}},Mh=class{constructor(e,t,r=Nt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},Nh=class{constructor(){this.ve=0,this.Ce=Dx(),this.Fe=Nt.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=pe(),t=pe(),r=pe();return this.Ce.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:X(38017,{changeType:o})}}),new Ru(this.Fe,this.Me,e,t,r)}ke(){this.xe=!1,this.Ce=Dx()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,Ae(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}},V0=class{constructor(e){this.We=e,this.Ge=new Map,this.ze=Hr(),this.je=mh(),this.Je=mh(),this.He=new Ge(fe)}Ye(e){for(let t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(let t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,t=>{let r=this.tt(t);switch(e.state){case 0:this.nt(t)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),r.Be(e.resumeToken));break;default:X(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach((r,i)=>{this.nt(i)&&t(i)})}it(e){let t=e.targetId,r=e.De.count,i=this.st(t);if(i){let o=i.target;if(A0(o))if(r===0){let s=new Y(o.path);this.Xe(t,s,Pn.newNoDocument(s,ce.min()))}else Ae(r===1,20013,{expectedCount:r});else{let s=this.ot(t);if(s!==r){let a=this._t(e),u=a?this.ut(a,e,s):1;if(u!==0){this.rt(t);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,l)}Ix?.ct((function(f,p,g,y,T){var P,N,j,W,re,Pe;let Pt={localCacheCount:f,existenceFilterCount:p.count,databaseId:g.database,projectId:g.projectId},xe=p.unchangedNames;return xe&&(Pt.bloomFilter={applied:T===0,hashCount:(P=xe?.hashCount)!==null&&P!==void 0?P:0,bitmapLength:(W=(j=(N=xe?.bits)===null||N===void 0?void 0:N.bitmap)===null||j===void 0?void 0:j.length)!==null&&W!==void 0?W:0,padding:(Pe=(re=xe?.bits)===null||re===void 0?void 0:re.padding)!==null&&Pe!==void 0?Pe:0,mightContain:C=>{var v;return(v=y?.mightContain(C))!==null&&v!==void 0&&v}}),Pt})(s,e.De,this.We.lt(),a,u))}}}}_t(e){let t=e.De.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,a;try{s=jr(r).toUint8Array()}catch(u){if(u instanceof Dh)return xi("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new L0(s,i,o)}catch(u){return xi(u instanceof Mo?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.fe===0?null:a}ut(e,t,r){return t.De.count===r-this.ht(e,t.targetId)?0:2}ht(e,t){let r=this.We.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.We.lt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Xe(t,o,null),i++)}),i}Pt(e){let t=new Map;this.Ge.forEach((o,s)=>{let a=this.st(s);if(a){if(o.current&&A0(a.target)){let u=new Y(a.target.path);this.Tt(u).has(s)||this.It(s,u)||this.Xe(s,u,Pn.newNoDocument(u,e))}o.Ne&&(t.set(s,o.Le()),o.ke())}});let r=pe();this.Je.forEach((o,s)=>{let a=!0;s.forEachWhile(u=>{let l=this.st(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ze.forEach((o,s)=>s.setReadTime(e));let i=new xh(e,t,this.He,this.ze,r);return this.ze=Hr(),this.je=mh(),this.Je=mh(),this.He=new Ge(fe),i}Ze(e,t){if(!this.nt(e))return;let r=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,r),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,r){if(!this.nt(e))return;let i=this.tt(e);this.It(e,t)?i.qe(t,1):i.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),r&&(this.ze=this.ze.insert(t,r))}removeTarget(e){this.Ge.delete(e)}ot(e){let t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new Nh,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new gt(fe),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new gt(fe),this.je=this.je.insert(e,t)),t}nt(e){let t=this.st(e)!==null;return t||H("WatchChangeAggregator","Detected inactive target",e),t}st(e){let t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new Nh),this.We.getRemoteKeysForTarget(e).forEach(t=>{this.Xe(e,t,null)})}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}};function mh(){return new Ge(Y.comparator)}function Dx(){return new Ge(Y.comparator)}var R4={asc:"ASCENDING",desc:"DESCENDING"},M4={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},N4={and:"AND",or:"OR"},U0=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function j0(n,e){return n.useProto3Json||np(e)?e:{value:e}}function Ph(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function VR(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function P4(n,e){return Ph(n,e.toTimestamp())}function ir(n){return Ae(!!n,49232),ce.fromTimestamp((function(t){let r=Ur(t);return new st(r.seconds,r.nanos)})(n))}function rw(n,e){return B0(n,e).canonicalString()}function B0(n,e){let t=(function(i){return new Be(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function UR(n){let e=Be.fromString(n);return Ae(zR(e),10190,{key:e.toString()}),e}function H0(n,e){return rw(n.databaseId,e.path)}function r0(n,e){let t=UR(e);if(t.get(1)!==n.databaseId.projectId)throw new B(O.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new B(O.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Y(BR(t))}function jR(n,e){return rw(n.databaseId,e)}function O4(n){let e=UR(n);return e.length===4?Be.emptyPath():BR(e)}function $0(n){return new Be(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function BR(n){return Ae(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function Tx(n,e,t){return{name:H0(n,e),fields:t.value.mapValue.fields}}function k4(n,e){let t;if("targetChange"in e){e.targetChange;let r=(function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:X(39313,{state:l})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=(function(l,f){return l.useProto3Json?(Ae(f===void 0||typeof f=="string",58123),Nt.fromBase64String(f||"")):(Ae(f===void 0||f instanceof Buffer||f instanceof Uint8Array,16193),Nt.fromUint8Array(f||new Uint8Array))})(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&(function(l){let f=l.code===void 0?O.UNKNOWN:LR(l.code);return new B(f,l.message||"")})(s);t=new Mh(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=r0(n,r.document.name),o=ir(r.document.updateTime),s=r.document.createTime?ir(r.document.createTime):ce.min(),a=new nn({mapValue:{fields:r.document.fields}}),u=Pn.newFoundDocument(i,o,s,a),l=r.targetIds||[],f=r.removedTargetIds||[];t=new Zs(l,f,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=r0(n,r.document),o=r.readTime?ir(r.readTime):ce.min(),s=Pn.newNoDocument(i,o),a=r.removedTargetIds||[];t=new Zs([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=r0(n,r.document),o=r.removedTargetIds||[];t=new Zs([],o,i,null)}else{if(!("filter"in e))return X(11601,{At:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new F0(i,o),a=r.targetId;t=new Rh(a,s)}}return t}function F4(n,e){let t;if(e instanceof jo)t={update:Tx(n,e.key,e.value)};else if(e instanceof xu)t={delete:H0(n,e.key)};else if(e instanceof sr)t={update:Tx(n,e.key,e.data),updateMask:q4(e.fieldMask)};else{if(!(e instanceof N0))return X(16599,{Rt:e.type});t={verify:H0(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>(function(o,s){let a=s.transform;if(a instanceof oa)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Vo)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Uo)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof sa)return{fieldPath:s.field.canonicalString(),increment:a.Ee};throw X(20930,{transform:s.transform})})(0,r))),e.precondition.isNone||(t.currentDocument=(function(i,o){return o.updateTime!==void 0?{updateTime:P4(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:X(27497)})(n,e.precondition)),t}function L4(n,e){return n&&n.length>0?(Ae(e!==void 0,14353),n.map(t=>(function(i,o){let s=i.updateTime?ir(i.updateTime):ir(o);return s.isEqual(ce.min())&&(s=ir(o)),new M0(s,i.transformResults||[])})(t,e))):[]}function V4(n,e){return{documents:[jR(n,e.path)]}}function U4(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=jR(n,i);let o=(function(l){if(l.length!==0)return $R(On.create(l,"and"))})(e.filters);o&&(t.structuredQuery.where=o);let s=(function(l){if(l.length!==0)return l.map(f=>(function(g){return{field:Ks(g.field),direction:H4(g.dir)}})(f))})(e.orderBy);s&&(t.structuredQuery.orderBy=s);let a=j0(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=(function(l){return{before:l.inclusive,values:l.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(l){return{before:!l.inclusive,values:l.position}})(e.endAt)),{Vt:t,parent:i}}function j4(n){let e=O4(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){Ae(r===1,65062);let f=t.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let o=[];t.where&&(o=(function(p){let g=HR(p);return g instanceof On&&ER(g)?g.getFilters():[g]})(t.where));let s=[];t.orderBy&&(s=(function(p){return p.map(g=>(function(T){return new Lo(Qs(T.field),(function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(T.direction))})(g))})(t.orderBy));let a=null;t.limit&&(a=(function(p){let g;return g=typeof p=="object"?p.value:p,np(g)?null:g})(t.limit));let u=null;t.startAt&&(u=(function(p){let g=!!p.before,y=p.values||[];return new ra(y,g)})(t.startAt));let l=null;return t.endAt&&(l=(function(p){let g=!p.before,y=p.values||[];return new ra(y,g)})(t.endAt)),h4(e,i,s,o,a,"F",u,l)}function B4(n,e){let t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return X(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function HR(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=Qs(t.unaryFilter.field);return it.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Qs(t.unaryFilter.field);return it.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=Qs(t.unaryFilter.field);return it.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=Qs(t.unaryFilter.field);return it.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return X(61313);default:return X(60726)}})(n):n.fieldFilter!==void 0?(function(t){return it.create(Qs(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return X(58110);default:return X(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return On.create(t.compositeFilter.filters.map(r=>HR(r)),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return X(1026)}})(t.compositeFilter.op))})(n):X(30097,{filter:n})}function H4(n){return R4[n]}function $4(n){return M4[n]}function z4(n){return N4[n]}function Ks(n){return{fieldPath:n.canonicalString()}}function Qs(n){return rn.fromServerFormat(n.fieldPath)}function $R(n){return n instanceof it?(function(t){if(t.op==="=="){if(hx(t.value))return{unaryFilter:{field:Ks(t.field),op:"IS_NAN"}};if(fx(t.value))return{unaryFilter:{field:Ks(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(hx(t.value))return{unaryFilter:{field:Ks(t.field),op:"IS_NOT_NAN"}};if(fx(t.value))return{unaryFilter:{field:Ks(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ks(t.field),op:$4(t.op),value:t.value}}})(n):n instanceof On?(function(t){let r=t.getFilters().map(i=>$R(i));return r.length===1?r[0]:{compositeFilter:{op:z4(t.op),filters:r}}})(n):X(54877,{filter:n})}function q4(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function zR(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Mu=class n{constructor(e,t,r,i,o=ce.min(),s=ce.min(),a=Nt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var z0=class{constructor(e){this.gt=e}};function G4(n){let e=j4({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?R0(e,e.limit,"L"):e}var Oh=class{constructor(){}bt(e,t){this.Dt(e,t),t.vt()}Dt(e,t){if("nullValue"in e)this.Ct(t,5);else if("booleanValue"in e)this.Ct(t,10),t.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(t,15),t.Ft(je(e.integerValue));else if("doubleValue"in e){let r=je(e.doubleValue);isNaN(r)?this.Ct(t,13):(this.Ct(t,15),Tu(r)?t.Ft(0):t.Ft(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ct(t,20),typeof r=="string"&&(r=Ur(r)),t.Mt(`${r.seconds||""}`),t.Ft(r.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,t),this.Ot(t);else if("bytesValue"in e)this.Ct(t,30),t.Nt(jr(e.bytesValue)),this.Ot(t);else if("referenceValue"in e)this.Bt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ct(t,45),t.Ft(r.latitude||0),t.Ft(r.longitude||0)}else"mapValue"in e?yR(e)?this.Ct(t,Number.MAX_SAFE_INTEGER):mR(e)?this.Lt(e.mapValue,t):(this.kt(e.mapValue,t),this.Ot(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Ot(t)):X(19022,{Qt:e})}xt(e,t){this.Ct(t,25),this.$t(e,t)}$t(e,t){t.Mt(e)}kt(e,t){let r=e.fields||{};this.Ct(t,55);for(let i of Object.keys(r))this.xt(i,t),this.Dt(r[i],t)}Lt(e,t){var r,i;let o=e.fields||{};this.Ct(t,53);let s=ea,a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Ct(t,15),t.Ft(je(a)),this.xt(s,t),this.Dt(o[s],t)}qt(e,t){let r=e.values||[];this.Ct(t,50);for(let i of r)this.Dt(i,t)}Bt(e,t){this.Ct(t,37),Y.fromName(e).path.forEach(r=>{this.Ct(t,60),this.$t(r,t)})}Ct(e,t){e.Ft(t)}Ot(e){e.Ft(2)}};Oh.Ut=new Oh;var q0=class{constructor(){this.Dn=new G0}addToCollectionParentIndex(e,t){return this.Dn.add(t),F.resolve()}getCollectionParents(e,t){return F.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return F.resolve()}deleteFieldIndex(e,t){return F.resolve()}deleteAllFieldIndexes(e){return F.resolve()}createTargetIndexes(e,t){return F.resolve()}getDocumentsMatchingTarget(e,t){return F.resolve(null)}getIndexType(e,t){return F.resolve(0)}getFieldIndexes(e,t){return F.resolve([])}getNextCollectionGroupToUpdate(e){return F.resolve(null)}getMinOffset(e,t){return F.resolve(Fo.min())}getMinOffsetFromCollectionGroup(e,t){return F.resolve(Fo.min())}updateCollectionGroup(e,t,r){return F.resolve()}updateIndexEntries(e,t){return F.resolve()}},G0=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new gt(Be.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new gt(Be.comparator)).toArray()}};var tie=new Uint8Array(0);var Sx={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},qR=41943040,mn=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};mn.DEFAULT_COLLECTION_PERCENTILE=10,mn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,mn.DEFAULT=new mn(qR,mn.DEFAULT_COLLECTION_PERCENTILE,mn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),mn.DISABLED=new mn(-1,0,0);var Nu=class n{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new n(0)}static ur(){return new n(-1)}};var Ax="LruGarbageCollector",W4=1048576;function xx([n,e],[t,r]){let i=fe(n,t);return i===0?fe(e,r):i}var W0=class{constructor(e){this.Tr=e,this.buffer=new gt(xx),this.Ir=0}dr(){return++this.Ir}Er(e){let t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();xx(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},K0=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){H(Ax,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){ha(t)?H(Ax,"Ignoring IndexedDB error during garbage collection: ",t):await fa(t)}await this.Rr(3e5)})}},Q0=class{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return F.resolve(WE.ue);let r=new W0(t);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(H("LruGarbageCollector","Garbage collection skipped; disabled"),F.resolve(Sx)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(H("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Sx):this.pr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let r,i,o,s,a,u,l,f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(H("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,t))).next(p=>(o=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(l=Date.now(),Gs()<=he.DEBUG&&H("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-f}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(u-a)+`ms
	Removed ${p} documents in `+(l-u)+`ms
Total Duration: ${l-f}ms`),F.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}};function K4(n,e){return new Q0(n,e)}var Y0=class{constructor(){this.changes=new Br(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Pn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?F.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Z0=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var J0=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Cu(r.mutation,i,yn.empty(),st.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,pe()).next(()=>r))}getLocalViewOfDocuments(e,t,r=pe()){let i=Ro();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=_u();return o.forEach((a,u)=>{s=s.insert(a,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=Ro();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,pe()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=Hr(),s=Iu(),a=(function(){return Iu()})();return t.forEach((u,l)=>{let f=r.get(l.key);i.has(l.key)&&(f===void 0||f.mutation instanceof sr)?o=o.insert(l.key,l):f!==void 0?(s.set(l.key,f.mutation.getFieldMask()),Cu(f.mutation,l,f.mutation.getFieldMask(),st.now())):s.set(l.key,yn.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((l,f)=>s.set(l,f)),t.forEach((l,f)=>{var p;return a.set(l,new Z0(f,(p=s.get(l))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,t){let r=Iu(),i=new Ge((s,a)=>s-a),o=pe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let a of s)a.keys().forEach(u=>{let l=t.get(u);if(l===null)return;let f=r.get(u)||yn.empty();f=a.applyToLocalView(l,f),r.set(u,f);let p=(i.get(a.batchId)||pe()).add(u);i=i.insert(a.batchId,p)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),l=u.key,f=u.value,p=xR();f.forEach(g=>{if(!o.has(g)){let y=kR(t.get(g),r.get(g));y!==null&&p.set(g,y),o=o.add(g)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,p))}return F.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return(function(s){return Y.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):bR(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):F.resolve(Ro()),a=Du,u=o;return s.next(l=>F.forEach(l,(f,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),o.get(f)?F.resolve():this.remoteDocumentCache.getEntry(e,f).next(g=>{u=u.insert(f,g)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,u,l,pe())).next(f=>({batchId:a,changes:AR(f)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Y(t)).next(r=>{let i=_u();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=_u();return this.indexManager.getCollectionParents(e,o).next(a=>F.forEach(a,u=>{let l=(function(p,g){return new Mi(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)})(t,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(f=>{f.forEach((p,g)=>{s=s.insert(p,g)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((u,l)=>{let f=l.getKey();s.get(f)===null&&(s=s.insert(f,Pn.newInvalidDocument(f)))});let a=_u();return s.forEach((u,l)=>{let f=o.get(u);f!==void 0&&Cu(f.mutation,l,yn.empty(),st.now()),op(t,l)&&(a=a.insert(u,l))}),a})}};var X0=class{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return F.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:ir(i.createTime)}})(t)),F.resolve()}getNamedQuery(e,t){return F.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,(function(i){return{name:i.name,query:G4(i.bundledQuery),readTime:ir(i.readTime)}})(t)),F.resolve()}};var eE=class{constructor(){this.overlays=new Ge(Y.comparator),this.kr=new Map}getOverlay(e,t){return F.resolve(this.overlays.get(t))}getOverlays(e,t){let r=Ro();return F.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.wt(e,t,o)}),F.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.kr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.kr.delete(r)),F.resolve()}getOverlaysForCollection(e,t,r){let i=Ro(),o=t.length+1,s=new Y(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let u=a.getNext().value,l=u.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return F.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new Ge((l,f)=>l-f),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let f=o.get(l.largestBatchId);f===null&&(f=Ro(),o=o.insert(l.largestBatchId,f)),f.set(l.getKey(),l)}}let a=Ro(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,f)=>a.set(l,f)),!(a.size()>=i)););return F.resolve(a)}wt(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new k0(t,r));let o=this.kr.get(t);o===void 0&&(o=pe(),this.kr.set(t,o)),this.kr.set(t,o.add(r.key))}};var tE=class{constructor(){this.sessionToken=Nt.EMPTY_BYTE_STRING}getSessionToken(e){return F.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,F.resolve()}};var Pu=class{constructor(){this.qr=new gt(rt.Qr),this.$r=new gt(rt.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){let r=new rt(e,t);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Wr(new rt(e,t))}Gr(e,t){e.forEach(r=>this.removeReference(r,t))}zr(e){let t=new Y(new Be([])),r=new rt(t,e),i=new rt(t,e+1),o=[];return this.$r.forEachInRange([r,i],s=>{this.Wr(s),o.push(s.key)}),o}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){let t=new Y(new Be([])),r=new rt(t,e),i=new rt(t,e+1),o=pe();return this.$r.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new rt(e,0),r=this.qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},rt=class{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return Y.comparator(e.key,t.key)||fe(e.Hr,t.Hr)}static Ur(e,t){return fe(e.Hr,t.Hr)||Y.comparator(e.key,t.key)}};var nE=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new gt(rt.Qr)}checkEmpty(e){return F.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new P0(o,t,r,i);this.mutationQueue.push(s);for(let a of i)this.Yr=this.Yr.add(new rt(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return F.resolve(s)}lookupMutationBatch(e,t){return F.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.Xr(r),o=i<0?0:i;return F.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return F.resolve(this.mutationQueue.length===0?KE:this.er-1)}getAllMutationBatches(e){return F.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new rt(t,0),i=new rt(t,Number.POSITIVE_INFINITY),o=[];return this.Yr.forEachInRange([r,i],s=>{let a=this.Zr(s.Hr);o.push(a)}),F.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new gt(fe);return t.forEach(i=>{let o=new rt(i,0),s=new rt(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([o,s],a=>{r=r.add(a.Hr)})}),F.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;Y.isDocumentKey(o)||(o=o.child(""));let s=new rt(new Y(o),0),a=new gt(fe);return this.Yr.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.Hr)),!0)},s),F.resolve(this.ei(a))}ei(e){let t=[];return e.forEach(r=>{let i=this.Zr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){Ae(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return F.forEach(t.mutations,i=>{let o=new rt(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,t){let r=new rt(t,0),i=this.Yr.firstAfterOrEqual(r);return F.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,F.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){let t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var rE=class{constructor(e){this.ni=e,this.docs=(function(){return new Ge(Y.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.ni(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return F.resolve(r?r.document.mutableCopy():Pn.newInvalidDocument(t))}getEntries(e,t){let r=Hr();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Pn.newInvalidDocument(i))}),F.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=Hr(),s=t.path,a=new Y(s.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:l,value:{document:f}}=u.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||K3(W3(f),r)<=0||(i.has(f.key)||op(t,f))&&(o=o.insert(f.key,f.mutableCopy()))}return F.resolve(o)}getAllFromCollectionGroup(e,t,r,i){X(9500)}ri(e,t){return F.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new iE(this)}getSize(e){return F.resolve(this.size)}},iE=class extends Y0{constructor(e){super(),this.Or=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),F.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}};var oE=class{constructor(e){this.persistence=e,this.ii=new Br(t=>XE(t),ew),this.lastRemoteSnapshotVersion=ce.min(),this.highestTargetId=0,this.si=0,this.oi=new Pu,this.targetCount=0,this._i=Nu.ar()}forEachTarget(e,t){return this.ii.forEach((r,i)=>t(i)),F.resolve()}getLastRemoteSnapshotVersion(e){return F.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return F.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),F.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.si&&(this.si=t),F.resolve()}hr(e){this.ii.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this._i=new Nu(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,F.resolve()}updateTargetData(e,t){return this.hr(t),F.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,F.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.ii.forEach((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.ii.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),F.waitFor(o).next(()=>i)}getTargetCount(e){return F.resolve(this.targetCount)}getTargetData(e,t){let r=this.ii.get(t)||null;return F.resolve(r)}addMatchingKeys(e,t,r){return this.oi.Kr(t,r),F.resolve()}removeMatchingKeys(e,t,r){this.oi.Gr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),F.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),F.resolve()}getMatchingKeysForTargetId(e,t){let r=this.oi.Jr(t);return F.resolve(r)}containsKey(e,t){return F.resolve(this.oi.containsKey(t))}};var kh=class{constructor(e,t){this.ai={},this.overlays={},this.ui=new WE(0),this.ci=!1,this.ci=!0,this.li=new tE,this.referenceDelegate=e(this),this.hi=new oE(this),this.indexManager=new q0,this.remoteDocumentCache=(function(i){return new rE(i)})(r=>this.referenceDelegate.Pi(r)),this.serializer=new z0(t),this.Ti=new X0(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new eE,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ai[e.toKey()];return r||(r=new nE(t,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,r){H("MemoryPersistence","Starting transaction:",e);let i=new sE(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ei(e,t){return F.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,t)))}},sE=class extends g0{constructor(e){super(),this.currentSequenceNumber=e}},aE=class n{constructor(e){this.persistence=e,this.Ai=new Pu,this.Ri=null}static Vi(e){return new n(e)}get mi(){if(this.Ri)return this.Ri;throw X(60996)}addReference(e,t,r){return this.Ai.addReference(r,t),this.mi.delete(r.toString()),F.resolve()}removeReference(e,t,r){return this.Ai.removeReference(r,t),this.mi.add(r.toString()),F.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),F.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach(i=>this.mi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.mi.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Ii(){this.Ri=new Set}di(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return F.forEach(this.mi,r=>{let i=Y.fromPath(r);return this.fi(e,i).next(o=>{o||t.removeEntry(i,ce.min())})}).next(()=>(this.Ri=null,t.apply(e)))}updateLimboDocument(e,t){return this.fi(e,t).next(r=>{r?this.mi.delete(t.toString()):this.mi.add(t.toString())})}Pi(e){return 0}fi(e,t){return F.or([()=>F.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}},Fh=class n{constructor(e,t){this.persistence=e,this.gi=new Br(r=>J3(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=K4(this,t)}static Vi(e,t){return new n(e,t)}Ii(){}di(e){return F.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){let t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}yr(e){let t=0;return this.gr(e,r=>{t++}).next(()=>t)}gr(e,t){return F.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(o=>o?F.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ri(e,s=>this.Sr(e,s,t).next(a=>{a||(r++,o.removeEntry(s,ce.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),F.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),F.resolve()}removeReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),F.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),F.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=vh(e.data.value)),t}Sr(e,t,r){return F.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.gi.get(t);return F.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var cE=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Is=r,this.ds=i}static Es(e,t){let r=pe(),i=pe();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var uE=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var lE=class{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return OA()?8:Y3(ht())>0?6:4})()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.ps(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ys(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new uE;return this.ws(e,t,s).next(a=>{if(o.result=a,this.Rs)return this.Ss(e,t,s,a.size)})}).next(()=>o.result)}Ss(e,t,r,i){return r.documentReadCount<this.Vs?(Gs()<=he.DEBUG&&H("QueryEngine","SDK will not create cache indexes for query:",Ws(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),F.resolve()):(Gs()<=he.DEBUG&&H("QueryEngine","Query:",Ws(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(Gs()<=he.DEBUG&&H("QueryEngine","The SDK decides to create cache indexes for query:",Ws(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,rr(t))):F.resolve())}ps(e,t){if(yx(t))return F.resolve(null);let r=rr(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=R0(t,null,"F"),r=rr(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=pe(...o);return this.gs.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.bs(t,a);return this.Ds(t,l,s,u.readTime)?this.ps(e,R0(t,null,"F")):this.vs(e,l,t,u)}))})))}ys(e,t,r,i){return yx(t)||i.isEqual(ce.min())?F.resolve(null):this.gs.getDocuments(e,r).next(o=>{let s=this.bs(t,o);return this.Ds(t,s,r,i)?F.resolve(null):(Gs()<=he.DEBUG&&H("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ws(t)),this.vs(e,s,t,G3(i,Du)).next(a=>a))})}bs(e,t){let r=new gt(TR(e));return t.forEach((i,o)=>{op(e,o)&&(r=r.add(o))}),r}Ds(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}ws(e,t,r){return Gs()<=he.DEBUG&&H("QueryEngine","Using full collection scan to execute query:",Ws(t)),this.gs.getDocumentsMatchingQuery(e,t,Fo.min(),r)}vs(e,t,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var iw="LocalStore",Q4=3e8,dE=class{constructor(e,t,r,i){this.persistence=e,this.Cs=t,this.serializer=i,this.Fs=new Ge(fe),this.Ms=new Br(o=>XE(o),ew),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new J0(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Fs))}};function Y4(n,e,t,r){return new dE(n,e,t,r)}async function GR(n,e){let t=oe(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.Ns(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],u=pe();for(let l of i){s.push(l.batchId);for(let f of l.mutations)u=u.add(f.key)}for(let l of o){a.push(l.batchId);for(let f of l.mutations)u=u.add(f.key)}return t.localDocuments.getDocuments(r,u).next(l=>({Bs:l,removedBatchIds:s,addedBatchIds:a}))})})}function Z4(n,e){let t=oe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.Os.newChangeBuffer({trackRemovals:!0});return(function(a,u,l,f){let p=l.batch,g=p.keys(),y=F.resolve();return g.forEach(T=>{y=y.next(()=>f.getEntry(u,T)).next(P=>{let N=l.docVersions.get(T);Ae(N!==null,48541),P.version.compareTo(N)<0&&(p.applyToRemoteDocument(P,l),P.isValidDocument()&&(P.setReadTime(l.commitVersion),f.addEntry(P)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(u,p))})(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(a){let u=pe();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u})(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function WR(n){let e=oe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.hi.getLastRemoteSnapshotVersion(t))}function J4(n,e){let t=oe(n),r=e.snapshotVersion,i=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.Os.newChangeBuffer({trackRemovals:!0});i=t.Fs;let a=[];e.targetChanges.forEach((f,p)=>{let g=i.get(p);if(!g)return;a.push(t.hi.removeMatchingKeys(o,f.removedDocuments,p).next(()=>t.hi.addMatchingKeys(o,f.addedDocuments,p)));let y=g.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(Nt.EMPTY_BYTE_STRING,ce.min()).withLastLimboFreeSnapshotVersion(ce.min()):f.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(f.resumeToken,r)),i=i.insert(p,y),(function(P,N,j){return P.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=Q4?!0:j.addedDocuments.size+j.modifiedDocuments.size+j.removedDocuments.size>0})(g,y,f)&&a.push(t.hi.updateTargetData(o,y))});let u=Hr(),l=pe();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,f))}),a.push(X4(o,s,e.documentUpdates).next(f=>{u=f.Ls,l=f.ks})),!r.isEqual(ce.min())){let f=t.hi.getLastRemoteSnapshotVersion(o).next(p=>t.hi.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(f)}return F.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,u,l)).next(()=>u)}).then(o=>(t.Fs=i,o))}function X4(n,e,t){let r=pe(),i=pe();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=Hr();return t.forEach((a,u)=>{let l=o.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(ce.min())?(e.removeEntry(a,u.readTime),s=s.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),s=s.insert(a,u)):H(iw,"Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{Ls:s,ks:i}})}function eH(n,e){let t=oe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=KE),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function tH(n,e){let t=oe(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.hi.getTargetData(r,e).next(o=>o?(i=o,F.resolve(i)):t.hi.allocateTargetId(r).next(s=>(i=new Mu(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(r.targetId,r),t.Ms.set(e,r.targetId)),r})}async function fE(n,e,t){let r=oe(n),i=r.Fs.get(e),o=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i))}catch(s){if(!ha(s))throw s;H(iw,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)}function Rx(n,e,t){let r=oe(n),i=ce.min(),o=pe();return r.persistence.runTransaction("Execute query","readwrite",s=>(function(u,l,f){let p=oe(u),g=p.Ms.get(f);return g!==void 0?F.resolve(p.Fs.get(g)):p.hi.getTargetData(l,f)})(r,s,rr(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(s,a.targetId).next(u=>{o=u})}).next(()=>r.Cs.getDocumentsMatchingQuery(s,e,t?i:ce.min(),t?o:pe())).next(a=>(nH(r,g4(e),a),{documents:a,qs:o})))}function nH(n,e,t){let r=n.xs.get(e)||ce.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.xs.set(e,r)}var Lh=class{constructor(){this.activeTargetIds=w4()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var hE=class{constructor(){this.Fo=new Lh,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,r){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new Lh,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var pE=class{xo(e){}shutdown(){}};var Mx="ConnectivityMonitor",Vh=class{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){H(Mx,"Network connectivity changed: AVAILABLE");for(let e of this.ko)e(0)}Lo(){H(Mx,"Network connectivity changed: UNAVAILABLE");for(let e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var yh=null;function gE(){return yh===null?yh=(function(){return 268435456+Math.round(2147483648*Math.random())})():yh++,"0x"+yh.toString(16)}var i0="RestConnection",rH={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},mE=class{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===Th?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,t,r,i,o){let s=gE(),a=this.Go(e,t.toUriEncodedString());H(i0,`Sending RPC '${e}' ${s}:`,a,r);let u={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(u,i,o);let{host:l}=new URL(a),f=gi(l);return this.jo(e,a,u,r,f).then(p=>(H(i0,`Received RPC '${e}' ${s}: `,p),p),p=>{throw xi(i0,`RPC '${e}' ${s} failed with error: `,p,"url: ",a,"request:",r),p})}Jo(e,t,r,i,o,s){return this.Wo(e,t,r,i,o)}zo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+da})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}Go(e,t){let r=rH[e];return`${this.$o}/v1/${t}:${r}`}terminate(){}};var yE=class{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}};var Mt="WebChannelConnection",vE=class extends mE{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,r,i,o){let s=gE();return new Promise((a,u)=>{let l=new J_;l.setWithCredentials(!0),l.listenOnce(X_.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case vu.NO_ERROR:let p=l.getResponseJson();H(Mt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),a(p);break;case vu.TIMEOUT:H(Mt,`RPC '${e}' ${s} timed out`),u(new B(O.DEADLINE_EXCEEDED,"Request time out"));break;case vu.HTTP_ERROR:let g=l.getStatus();if(H(Mt,`RPC '${e}' ${s} failed with status:`,g,"response text:",l.getResponseText()),g>0){let y=l.getResponseJson();Array.isArray(y)&&(y=y[0]);let T=y?.error;if(T&&T.status&&T.message){let P=(function(j){let W=j.toLowerCase().replace(/_/g,"-");return Object.values(O).indexOf(W)>=0?W:O.UNKNOWN})(T.status);u(new B(P,T.message))}else u(new B(O.UNKNOWN,"Server responded with status "+l.getStatus()))}else u(new B(O.UNAVAILABLE,"Connection failed."));break;default:X(9055,{c_:e,streamId:s,l_:l.getLastErrorCode(),h_:l.getLastError()})}}finally{H(Mt,`RPC '${e}' ${s} completed.`)}});let f=JSON.stringify(i);H(Mt,`RPC '${e}' ${s} sending request:`,i),l.send(t,"POST",f,r,15)})}P_(e,t,r){let i=gE(),o=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=n0(),a=t0(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.zo(u.initMessageHeaders,t,r),u.encodeInitMessageHeaders=!0;let f=o.join("");H(Mt,`Creating RPC '${e}' stream ${i}: ${f}`,u);let p=s.createWebChannel(f,u);this.T_(p);let g=!1,y=!1,T=new yE({Ho:N=>{y?H(Mt,`Not sending because RPC '${e}' stream ${i} is closed:`,N):(g||(H(Mt,`Opening RPC '${e}' stream ${i} transport.`),p.open(),g=!0),H(Mt,`RPC '${e}' stream ${i} sending:`,N),p.send(N))},Yo:()=>p.close()}),P=(N,j,W)=>{N.listen(j,re=>{try{W(re)}catch(Pe){setTimeout(()=>{throw Pe},0)}})};return P(p,qs.EventType.OPEN,()=>{y||(H(Mt,`RPC '${e}' stream ${i} transport opened.`),T.s_())}),P(p,qs.EventType.CLOSE,()=>{y||(y=!0,H(Mt,`RPC '${e}' stream ${i} transport closed`),T.__(),this.I_(p))}),P(p,qs.EventType.ERROR,N=>{y||(y=!0,xi(Mt,`RPC '${e}' stream ${i} transport errored. Name:`,N.name,"Message:",N.message),T.__(new B(O.UNAVAILABLE,"The operation could not be completed")))}),P(p,qs.EventType.MESSAGE,N=>{var j;if(!y){let W=N.data[0];Ae(!!W,16349);let re=W,Pe=re?.error||((j=re[0])===null||j===void 0?void 0:j.error);if(Pe){H(Mt,`RPC '${e}' stream ${i} received error:`,Pe);let Pt=Pe.status,xe=(function(E){let I=nt[E];if(I!==void 0)return LR(I)})(Pt),C=Pe.message;xe===void 0&&(xe=O.INTERNAL,C="Unknown error status: "+Pt+" with message "+Pe.message),y=!0,T.__(new B(xe,C)),p.close()}else H(Mt,`RPC '${e}' stream ${i} received:`,W),T.a_(W)}}),P(a,e0.STAT_EVENT,N=>{N.stat===ph.PROXY?H(Mt,`RPC '${e}' stream ${i} detected buffering proxy`):N.stat===ph.NOPROXY&&H(Mt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{T.o_()},0),T}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(t=>t===e)}};function o0(){return typeof document<"u"?document:null}function sp(n){return new U0(n,!0)}var Uh=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.Fi=e,this.timerId=t,this.d_=r,this.E_=i,this.A_=o,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();let t=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,t-r);i>0&&H("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}};var Nx="PersistentStream",jh=class{constructor(e,t,r,i,o,s,a,u){this.Fi=e,this.w_=r,this.S_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new Uh(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===O.RESOURCE_EXHAUSTED?(Vr(t.toString()),Vr("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===O.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;let e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===t&&this.W_(r,i)},r=>{e(()=>{let i=new B(O.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,t){let r=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return H(Nx,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget(()=>this.b_===e?t():(H(Nx,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},_E=class extends jh{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();let t=k4(this.serializer,e),r=(function(o){if(!("targetChange"in o))return ce.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?ce.min():s.readTime?ir(s.readTime):ce.min()})(e);return this.listener.J_(t,r)}H_(e){let t={};t.database=$0(this.serializer),t.addTarget=(function(o,s){let a,u=s.target;if(a=A0(u)?{documents:V4(o,u)}:{query:U4(o,u).Vt},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=VR(o,s.resumeToken);let l=j0(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(ce.min())>0){a.readTime=Ph(o,s.snapshotVersion.toTimestamp());let l=j0(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a})(this.serializer,e);let r=B4(this.serializer,e);r&&(t.labels=r),this.k_(t)}Y_(e){let t={};t.database=$0(this.serializer),t.removeTarget=e,this.k_(t)}},EE=class extends jh{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return Ae(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ae(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){Ae(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();let t=L4(e.writeResults,e.commitTime),r=ir(e.commitTime);return this.listener.ta(r,t)}na(){let e={};e.database=$0(this.serializer),this.k_(e)}X_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>F4(this.serializer,r))};this.k_(t)}};var wE=class{},IE=class extends wE{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new B(O.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Wo(e,B0(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===O.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new B(O.UNKNOWN,o.toString())})}Jo(e,t,r,i,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Jo(e,B0(t,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===O.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new B(O.UNKNOWN,s.toString())})}terminate(){this.ra=!0,this.connection.terminate()}},CE=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Vr(t),this._a=!1):H("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}};var Bo="RemoteStore",bE=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=o,this.Ea.xo(s=>{r.enqueueAndForget(async()=>{Ho(this)&&(H(Bo,"Restarting streams for network reachability change."),await(async function(u){let l=oe(u);l.Ia.add(4),await Vu(l),l.Aa.set("Unknown"),l.Ia.delete(4),await ap(l)})(this))})}),this.Aa=new CE(r,i)}};async function ap(n){if(Ho(n))for(let e of n.da)await e(!0)}async function Vu(n){for(let e of n.da)await e(!1)}function KR(n,e){let t=oe(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),cw(t)?aw(t):pa(t).x_()&&sw(t,e))}function ow(n,e){let t=oe(n),r=pa(t);t.Ta.delete(e),r.x_()&&QR(t,e),t.Ta.size===0&&(r.x_()?r.B_():Ho(t)&&t.Aa.set("Unknown"))}function sw(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ce.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}pa(n).H_(e)}function QR(n,e){n.Ra.$e(e),pa(n).Y_(e)}function aw(n){n.Ra=new V0({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),pa(n).start(),n.Aa.aa()}function cw(n){return Ho(n)&&!pa(n).M_()&&n.Ta.size>0}function Ho(n){return oe(n).Ia.size===0}function YR(n){n.Ra=void 0}async function iH(n){n.Aa.set("Online")}async function oH(n){n.Ta.forEach((e,t)=>{sw(n,e)})}async function sH(n,e){YR(n),cw(n)?(n.Aa.la(e),aw(n)):n.Aa.set("Unknown")}async function aH(n,e,t){if(n.Aa.set("Online"),e instanceof Mh&&e.state===2&&e.cause)try{await(async function(i,o){let s=o.cause;for(let a of o.targetIds)i.Ta.has(a)&&(await i.remoteSyncer.rejectListen(a,s),i.Ta.delete(a),i.Ra.removeTarget(a))})(n,e)}catch(r){H(Bo,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Bh(n,r)}else if(e instanceof Zs?n.Ra.Ye(e):e instanceof Rh?n.Ra.it(e):n.Ra.et(e),!t.isEqual(ce.min()))try{let r=await WR(n.localStore);t.compareTo(r)>=0&&await(function(o,s){let a=o.Ra.Pt(s);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let f=o.Ta.get(l);f&&o.Ta.set(l,f.withResumeToken(u.resumeToken,s))}}),a.targetMismatches.forEach((u,l)=>{let f=o.Ta.get(u);if(!f)return;o.Ta.set(u,f.withResumeToken(Nt.EMPTY_BYTE_STRING,f.snapshotVersion)),QR(o,u);let p=new Mu(f.target,u,l,f.sequenceNumber);sw(o,p)}),o.remoteSyncer.applyRemoteEvent(a)})(n,t)}catch(r){H(Bo,"Failed to raise snapshot:",r),await Bh(n,r)}}async function Bh(n,e,t){if(!ha(e))throw e;n.Ia.add(1),await Vu(n),n.Aa.set("Offline"),t||(t=()=>WR(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{H(Bo,"Retrying IndexedDB access"),await t(),n.Ia.delete(1),await ap(n)})}function ZR(n,e){return e().catch(t=>Bh(n,t,e))}async function cp(n){let e=oe(n),t=Ni(e),r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:KE;for(;cH(e);)try{let i=await eH(e.localStore,r);if(i===null){e.Pa.length===0&&t.B_();break}r=i.batchId,uH(e,i)}catch(i){await Bh(e,i)}JR(e)&&XR(e)}function cH(n){return Ho(n)&&n.Pa.length<10}function uH(n,e){n.Pa.push(e);let t=Ni(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function JR(n){return Ho(n)&&!Ni(n).M_()&&n.Pa.length>0}function XR(n){Ni(n).start()}async function lH(n){Ni(n).na()}async function dH(n){let e=Ni(n);for(let t of n.Pa)e.X_(t.mutations)}async function fH(n,e,t){let r=n.Pa.shift(),i=O0.from(r,e,t);await ZR(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await cp(n)}async function hH(n,e){e&&Ni(n).Z_&&await(async function(r,i){if((function(s){return A4(s)&&s!==O.ABORTED})(i.code)){let o=r.Pa.shift();Ni(r).N_(),await ZR(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),await cp(r)}})(n,e),JR(n)&&XR(n)}async function Px(n,e){let t=oe(n);t.asyncQueue.verifyOperationInProgress(),H(Bo,"RemoteStore received new credentials");let r=Ho(t);t.Ia.add(3),await Vu(t),r&&t.Aa.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),await ap(t)}async function pH(n,e){let t=oe(n);e?(t.Ia.delete(2),await ap(t)):e||(t.Ia.add(2),await Vu(t),t.Aa.set("Unknown"))}function pa(n){return n.Va||(n.Va=(function(t,r,i){let o=oe(t);return o.ia(),new _E(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(n.datastore,n.asyncQueue,{Zo:iH.bind(null,n),e_:oH.bind(null,n),n_:sH.bind(null,n),J_:aH.bind(null,n)}),n.da.push(async e=>{e?(n.Va.N_(),cw(n)?aw(n):n.Aa.set("Unknown")):(await n.Va.stop(),YR(n))})),n.Va}function Ni(n){return n.ma||(n.ma=(function(t,r,i){let o=oe(t);return o.ia(),new EE(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:lH.bind(null,n),n_:hH.bind(null,n),ea:dH.bind(null,n),ta:fH.bind(null,n)}),n.da.push(async e=>{e?(n.ma.N_(),await cp(n)):(await n.ma.stop(),n.Pa.length>0&&(H(Bo,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))})),n.ma}var DE=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new er,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,a=new n(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new B(O.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function uw(n,e){if(Vr("AsyncQueue",`${e}: ${n}`),ha(n))return new B(O.UNAVAILABLE,`${e}: ${n}`);throw n}var Hh=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||Y.comparator(t.key,r.key):(t,r)=>Y.comparator(t.key,r.key),this.keyedMap=_u(),this.sortedSet=new Ge(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var $h=class{constructor(){this.fa=new Ge(Y.comparator)}track(e){let t=e.doc.key,r=this.fa.get(t);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(t,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(t):e.type===1&&r.type===2?this.fa=this.fa.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):X(63341,{At:e,ga:r}):this.fa=this.fa.insert(t,e)}pa(){let e=[];return this.fa.inorderTraversal((t,r)=>{e.push(r)}),e}},ca=class n{constructor(e,t,r,i,o,s,a,u,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new n(e,t,Hh.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ip(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var TE=class{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}},SE=class{constructor(){this.queries=Ox(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,r){let i=oe(t),o=i.queries;i.queries=Ox(),o.forEach((s,a)=>{for(let u of a.wa)u.onError(r)})})(this,new B(O.ABORTED,"Firestore shutting down"))}};function Ox(){return new Br(n=>DR(n),ip)}async function eM(n,e){let t=oe(n),r=3,i=e.query,o=t.queries.get(i);o?!o.Sa()&&e.ba()&&(r=2):(o=new TE,r=e.ba()?0:1);try{switch(r){case 0:o.ya=await t.onListen(i,!0);break;case 1:o.ya=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(s){let a=uw(s,`Initialization of query '${Ws(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.wa.push(e),e.va(t.onlineState),o.ya&&e.Ca(o.ya)&&lw(t)}async function tM(n,e){let t=oe(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.wa.indexOf(e);s>=0&&(o.wa.splice(s,1),o.wa.length===0?i=e.ba()?0:1:!o.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function gH(n,e){let t=oe(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let a of s.wa)a.Ca(i)&&(r=!0);s.ya=i}}r&&lw(t)}function mH(n,e,t){let r=oe(n),i=r.queries.get(e);if(i)for(let o of i.wa)o.onError(t);r.queries.delete(e)}function lw(n){n.Da.forEach(e=>{e.next()})}var AE,kx;(kx=AE||(AE={})).Fa="default",kx.Cache="cache";var zh=class{constructor(e,t,r){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new ca(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;let r=t!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;let t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=ca.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==AE.Cache}};var qh=class{constructor(e){this.key=e}},Gh=class{constructor(e){this.key=e}},xE=class{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=pe(),this.mutatedKeys=pe(),this.Xa=TR(e),this.eu=new Hh(this.Xa)}get tu(){return this.Ha}nu(e,t){let r=t?t.ru:new $h,i=t?t.eu:this.eu,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((f,p)=>{let g=i.get(f),y=op(this.query,p)?p:null,T=!!g&&this.mutatedKeys.has(g.key),P=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),N=!1;g&&y?g.data.isEqual(y.data)?T!==P&&(r.track({type:3,doc:y}),N=!0):this.iu(g,y)||(r.track({type:2,doc:y}),N=!0,(u&&this.Xa(y,u)>0||l&&this.Xa(y,l)<0)&&(a=!0)):!g&&y?(r.track({type:0,doc:y}),N=!0):g&&!y&&(r.track({type:1,doc:g}),N=!0,(u||l)&&(a=!0)),N&&(y?(s=s.add(y),o=P?o.add(f):o.delete(f)):(s=s.delete(f),o=o.delete(f)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let f=this.query.limitType==="F"?s.last():s.first();s=s.delete(f.key),o=o.delete(f.key),r.track({type:1,doc:f})}return{eu:s,ru:r,Ds:a,mutatedKeys:o}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;let s=e.ru.pa();s.sort((f,p)=>(function(y,T){let P=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return X(20277,{At:N})}};return P(y)-P(T)})(f.type,p.type)||this.Xa(f.doc,p.doc)),this.su(r),i=i!=null&&i;let a=t&&!i?this.ou():[],u=this.Za.size===0&&this.current&&!i?1:0,l=u!==this.Ya;return this.Ya=u,s.length!==0||l?{snapshot:new ca(this.query,e.eu,o,s,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:a}:{_u:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new $h,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}ou(){if(!this.current)return[];let e=this.Za;this.Za=pe(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});let t=[];return e.forEach(r=>{this.Za.has(r)||t.push(new Gh(r))}),this.Za.forEach(r=>{e.has(r)||t.push(new qh(r))}),t}uu(e){this.Ha=e.qs,this.Za=pe();let t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return ca.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}},dw="SyncEngine",RE=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},ME=class{constructor(e){this.key=e,this.lu=!1}},NE=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.hu={},this.Pu=new Br(a=>DR(a),ip),this.Tu=new Map,this.Iu=new Set,this.du=new Ge(Y.comparator),this.Eu=new Map,this.Au=new Pu,this.Ru={},this.Vu=new Map,this.mu=Nu.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}};async function yH(n,e,t=!0){let r=aM(n),i,o=r.Pu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.cu()):i=await nM(r,e,t,!0),i}async function vH(n,e){let t=aM(n);await nM(t,e,!0,!1)}async function nM(n,e,t,r){let i=await tH(n.localStore,rr(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),a;return r&&(a=await _H(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&KR(n.remoteStore,i),a}async function _H(n,e,t,r,i){n.gu=(p,g,y)=>(async function(P,N,j,W){let re=N.view.nu(j);re.Ds&&(re=await Rx(P.localStore,N.query,!1).then(({documents:C})=>N.view.nu(C,re)));let Pe=W&&W.targetChanges.get(N.targetId),Pt=W&&W.targetMismatches.get(N.targetId)!=null,xe=N.view.applyChanges(re,P.isPrimaryClient,Pe,Pt);return Lx(P,N.targetId,xe._u),xe.snapshot})(n,p,g,y);let o=await Rx(n.localStore,e,!0),s=new xE(e,o.qs),a=s.nu(o.documents),u=Ru.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=s.applyChanges(a,n.isPrimaryClient,u);Lx(n,t,l._u);let f=new RE(e,t,s);return n.Pu.set(e,f),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),l.snapshot}async function EH(n,e,t){let r=oe(n),i=r.Pu.get(e),o=r.Tu.get(i.targetId);if(o.length>1)return r.Tu.set(i.targetId,o.filter(s=>!ip(s,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await fE(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&ow(r.remoteStore,i.targetId),PE(r,i.targetId)}).catch(fa)):(PE(r,i.targetId),await fE(r.localStore,i.targetId,!0))}async function wH(n,e){let t=oe(n),r=t.Pu.get(e),i=t.Tu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),ow(t.remoteStore,r.targetId))}async function IH(n,e,t){let r=xH(n);try{let i=await(function(s,a){let u=oe(s),l=st.now(),f=a.reduce((y,T)=>y.add(T.key),pe()),p,g;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let T=Hr(),P=pe();return u.Os.getEntries(y,f).next(N=>{T=N,T.forEach((j,W)=>{W.isValidDocument()||(P=P.add(j))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,T)).next(N=>{p=N;let j=[];for(let W of a){let re=S4(W,p.get(W.key).overlayedDocument);re!=null&&j.push(new sr(W.key,re,vR(re.value.mapValue),Lr.exists(!0)))}return u.mutationQueue.addMutationBatch(y,l,j,a)}).next(N=>{g=N;let j=N.applyToLocalDocumentSet(p,P);return u.documentOverlayCache.saveOverlays(y,N.batchId,j)})}).then(()=>({batchId:g.batchId,changes:AR(p)}))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(s,a,u){let l=s.Ru[s.currentUser.toKey()];l||(l=new Ge(fe)),l=l.insert(a,u),s.Ru[s.currentUser.toKey()]=l})(r,i.batchId,t),await Uu(r,i.changes),await cp(r.remoteStore)}catch(i){let o=uw(i,"Failed to persist write");t.reject(o)}}async function rM(n,e){let t=oe(n);try{let r=await J4(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Eu.get(o);s&&(Ae(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.lu=!0:i.modifiedDocuments.size>0?Ae(s.lu,14607):i.removedDocuments.size>0&&(Ae(s.lu,42227),s.lu=!1))}),await Uu(t,r,e)}catch(r){await fa(r)}}function Fx(n,e,t){let r=oe(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Pu.forEach((o,s)=>{let a=s.view.va(e);a.snapshot&&i.push(a.snapshot)}),(function(s,a){let u=oe(s);u.onlineState=a;let l=!1;u.queries.forEach((f,p)=>{for(let g of p.wa)g.va(a)&&(l=!0)}),l&&lw(u)})(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function CH(n,e,t){let r=oe(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Eu.get(e),o=i&&i.key;if(o){let s=new Ge(Y.comparator);s=s.insert(o,Pn.newNoDocument(o,ce.min()));let a=pe().add(o),u=new xh(ce.min(),new Map,new Ge(fe),s,a);await rM(r,u),r.du=r.du.remove(o),r.Eu.delete(e),fw(r)}else await fE(r.localStore,e,!1).then(()=>PE(r,e,t)).catch(fa)}async function bH(n,e){let t=oe(n),r=e.batch.batchId;try{let i=await Z4(t.localStore,e);oM(t,r,null),iM(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Uu(t,i)}catch(i){await fa(i)}}async function DH(n,e,t){let r=oe(n);try{let i=await(function(s,a){let u=oe(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let f;return u.mutationQueue.lookupMutationBatch(l,a).next(p=>(Ae(p!==null,37113),f=p.keys(),u.mutationQueue.removeMutationBatch(l,p))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,f,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,f)).next(()=>u.localDocuments.getDocuments(l,f))})})(r.localStore,e);oM(r,e,t),iM(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Uu(r,i)}catch(i){await fa(i)}}function iM(n,e){(n.Vu.get(e)||[]).forEach(t=>{t.resolve()}),n.Vu.delete(e)}function oM(n,e,t){let r=oe(n),i=r.Ru[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function PE(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Tu.get(e))n.Pu.delete(r),t&&n.hu.pu(r,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach(r=>{n.Au.containsKey(r)||sM(n,r)})}function sM(n,e){n.Iu.delete(e.path.canonicalString());let t=n.du.get(e);t!==null&&(ow(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),fw(n))}function Lx(n,e,t){for(let r of t)r instanceof qh?(n.Au.addReference(r.key,e),TH(n,r)):r instanceof Gh?(H(dw,"Document no longer in limbo: "+r.key),n.Au.removeReference(r.key,e),n.Au.containsKey(r.key)||sM(n,r.key)):X(19791,{yu:r})}function TH(n,e){let t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Iu.has(r)||(H(dw,"New document in limbo: "+t),n.Iu.add(r),fw(n))}function fw(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){let e=n.Iu.values().next().value;n.Iu.delete(e);let t=new Y(Be.fromString(e)),r=n.mu.next();n.Eu.set(r,new ME(t)),n.du=n.du.insert(t,r),KR(n.remoteStore,new Mu(rr(tw(t.path)),r,"TargetPurposeLimboResolution",WE.ue))}}async function Uu(n,e,t){let r=oe(n),i=[],o=[],s=[];r.Pu.isEmpty()||(r.Pu.forEach((a,u)=>{s.push(r.gu(u,e,t).then(l=>{var f;if((l||t)&&r.isPrimaryClient){let p=l?!l.fromCache:(f=t?.targetChanges.get(u.targetId))===null||f===void 0?void 0:f.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(l){i.push(l);let p=cE.Es(u.targetId,l);o.push(p)}}))}),await Promise.all(s),r.hu.J_(i),await(async function(u,l){let f=oe(u);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>F.forEach(l,g=>F.forEach(g.Is,y=>f.persistence.referenceDelegate.addReference(p,g.targetId,y)).next(()=>F.forEach(g.ds,y=>f.persistence.referenceDelegate.removeReference(p,g.targetId,y)))))}catch(p){if(!ha(p))throw p;H(iw,"Failed to update sequence numbers: "+p)}for(let p of l){let g=p.targetId;if(!p.fromCache){let y=f.Fs.get(g),T=y.snapshotVersion,P=y.withLastLimboFreeSnapshotVersion(T);f.Fs=f.Fs.insert(g,P)}}})(r.localStore,o))}async function SH(n,e){let t=oe(n);if(!t.currentUser.isEqual(e)){H(dw,"User change. New user:",e.toKey());let r=await GR(t.localStore,e);t.currentUser=e,(function(o,s){o.Vu.forEach(a=>{a.forEach(u=>{u.reject(new B(O.CANCELLED,s))})}),o.Vu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Uu(t,r.Bs)}}function AH(n,e){let t=oe(n),r=t.Eu.get(e);if(r&&r.lu)return pe().add(r.key);{let i=pe(),o=t.Tu.get(e);if(!o)return i;for(let s of o){let a=t.Pu.get(s);i=i.unionWith(a.view.tu)}return i}}function aM(n){let e=oe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=rM.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=AH.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=CH.bind(null,e),e.hu.J_=gH.bind(null,e.eventManager),e.hu.pu=mH.bind(null,e.eventManager),e}function xH(n){let e=oe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=bH.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=DH.bind(null,e),e}var cM=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=sp(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Du(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Cu(t,this.localStore),this.indexBackfillerScheduler=this.Fu(t,this.localStore)}Cu(t,r){return null}Fu(t,r){return null}vu(t){return Y4(this.persistence,new lE,t.initialUser,this.serializer)}Du(t){return new kh(aE.Vi,this.serializer)}bu(t){return new hE}async terminate(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}return n.provider={build:()=>new n},n})(),OE=class extends cM{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){Ae(this.persistence.referenceDelegate instanceof Fh,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new K0(r,e.asyncQueue,t)}Du(e){let t=this.cacheSizeBytes!==void 0?mn.withCacheSize(this.cacheSizeBytes):mn.DEFAULT;return new kh(r=>Fh.Vi(r,t),this.serializer)}};var RH=(()=>{class n{async initialize(t,r){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Fx(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=SH.bind(null,this.syncEngine),await pH(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new SE})()}createDatastore(t){let r=sp(t.databaseInfo.databaseId),i=(function(s){return new vE(s)})(t.databaseInfo);return(function(s,a,u,l){return new IE(s,a,u,l)})(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return(function(i,o,s,a,u){return new bE(i,o,s,a,u)})(this.localStore,this.datastore,t.asyncQueue,r=>Fx(this.syncEngine,r,0),(function(){return Vh.C()?new Vh:new pE})())}createSyncEngine(t,r){return(function(o,s,a,u,l,f,p){let g=new NE(o,s,a,u,l,f);return p&&(g.fu=!0),g})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}async terminate(){var t,r;await(async function(o){let s=oe(o);H(Bo,"RemoteStore shutting down."),s.Ia.add(5),await Vu(s),s.Ea.shutdown(),s.Aa.set("Unknown")})(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}return n.provider={build:()=>new n},n})();var Wh=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Vr("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var Pi="FirestoreClient",kE=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=pt.UNAUTHENTICATED,this.clientId=bu.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async s=>{H(Pi,"Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(H(Pi,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new er;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=uw(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}};async function s0(n,e){n.asyncQueue.verifyOperationInProgress(),H(Pi,"Initializing OfflineComponentProvider");let t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await GR(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>{xi("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then(()=>{H("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{xi("Terminating Firestore due to IndexedDb database deletion failed",i)})}),n._offlineComponents=e}async function Vx(n,e){n.asyncQueue.verifyOperationInProgress();let t=await MH(n);H(Pi,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>Px(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>Px(e.remoteStore,i)),n._onlineComponents=e}async function MH(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){H(Pi,"Using user provided OfflineComponentProvider");try{await s0(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===O.FAILED_PRECONDITION||i.code===O.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;xi("Error using user provided cache. Falling back to memory cache: "+t),await s0(n,new cM)}}else H(Pi,"Using default OfflineComponentProvider"),await s0(n,new OE(void 0));return n._offlineComponents}async function uM(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(H(Pi,"Using user provided OnlineComponentProvider"),await Vx(n,n._uninitializedComponentsProvider._online)):(H(Pi,"Using default OnlineComponentProvider"),await Vx(n,new RH))),n._onlineComponents}function NH(n){return uM(n).then(e=>e.syncEngine)}async function FE(n){let e=await uM(n),t=e.eventManager;return t.onListen=yH.bind(null,e.syncEngine),t.onUnlisten=EH.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=vH.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=wH.bind(null,e.syncEngine),t}function PH(n,e,t={}){let r=new er;return n.asyncQueue.enqueueAndForget(async()=>(function(o,s,a,u,l){let f=new Wh({next:g=>{f.Ou(),s.enqueueAndForget(()=>tM(o,p)),g.fromCache&&u.source==="server"?l.reject(new B(O.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(g)},error:g=>l.reject(g)}),p=new zh(a,f,{includeMetadataChanges:!0,ka:!0});return eM(o,p)})(await FE(n),n.asyncQueue,e,t,r)),r.promise}function lM(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var Ux=new Map;var dM="firestore.googleapis.com",jx=!0,Kh=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new B(O.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=dM,this.ssl=jx}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:jx;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=qR;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<W4)throw new B(O.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}q3("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=lM((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new B(O.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new B(O.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new B(O.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},ua=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Kh({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new B(O.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new B(O.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Kh(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new a0;switch(r.type){case"firstParty":return new d0(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new B(O.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){let r=Ux.get(t);r&&(H("ComponentProvider","Removing Datastore"),Ux.delete(t),r.terminate())})(this),Promise.resolve()}};function OH(n,e,t,r={}){var i;n=tr(n,ua);let o=gi(e),s=n._getSettings(),a=Object.assign(Object.assign({},s),{emulatorOptions:n._getEmulatorOptions()}),u=`${e}:${t}`;o&&(jf(`https://${u}`),Bf("Firestore",!0)),s.host!==dM&&s.host!==u&&xi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let l=Object.assign(Object.assign({},s),{host:u,ssl:o,emulatorOptions:r});if(!Yn(l,a)&&(n._setSettings(l),r.mockUserToken)){let f,p;if(typeof r.mockUserToken=="string")f=r.mockUserToken,p=pt.MOCK_USER;else{f=AA(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new B(O.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new pt(g)}n._authCredentials=new c0(new wh(f,p))}}var Oi=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},It=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Di(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}toJSON(){return{type:n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Lu(t,n._jsonSchema))return new n(e,r||null,new Y(Be.fromString(t.referencePath)))}};It._jsonSchemaVersion="firestore/documentReference/1.0",It._jsonSchema={type:ot("string",It._jsonSchemaVersion),referencePath:ot("string")};var Di=class n extends Oi{constructor(e,t,r){super(e,t,tw(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new It(this.firestore,null,new Y(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function vn(n,e,...t){if(n=He(n),Kx("collection","path",e),n instanceof ua){let r=Be.fromString(e,...t);return ix(r),new Di(n,null,r)}{if(!(n instanceof It||n instanceof Di))throw new B(O.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Be.fromString(e,...t));return ix(r),new Di(n.firestore,null,r)}}function ga(n,e,...t){if(n=He(n),arguments.length===1&&(e=bu.newId()),Kx("doc","path",e),n instanceof ua){let r=Be.fromString(e,...t);return rx(r),new It(n,null,new Y(r))}{if(!(n instanceof It||n instanceof Di))throw new B(O.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Be.fromString(e,...t));return rx(r),new It(n.firestore,n instanceof Di?n.converter:null,new Y(r))}}var Bx="AsyncQueue",Qh=class{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new Uh(this,"async_queue_retry"),this.oc=()=>{let r=o0();r&&H(Bx,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;let t=o0();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;let t=o0();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});let t=new er;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!ha(e))throw e;H(Bx,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){let t=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,Vr("INTERNAL UNHANDLED ERROR: ",Hx(r)),r}).then(r=>(this.nc=!1,r))));return this._c=t,t}enqueueAfterDelay(e,t,r){this.ac(),this.sc.indexOf(e)>-1&&(t=0);let i=DE.createAndSchedule(this,e,t,r,o=>this.lc(o));return this.ec.push(i),i}ac(){this.tc&&X(47125,{hc:Hx(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(let t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){let t=this.ec.indexOf(e);this.ec.splice(t,1)}};function Hx(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function $x(n){return(function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1})(n,["next","error","complete"])}var $r=class extends ua{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Qh,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Qh(e),this._firestoreClient=void 0,await e}}};function hw(n,e){let t=typeof n=="object"?n:$s(),r=typeof n=="string"?n:e||Th,i=au(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=SA("firestore");o&&OH(i,...o)}return i}function pw(n){if(n._terminated)throw new B(O.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||kH(n),n._firestoreClient}function kH(n){var e,t,r;let i=n._freezeSettings(),o=(function(a,u,l,f){return new m0(a,u,l,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,lM(f.experimentalLongPollingOptions),f.useFetchStreams,f.isUsingEmulator)})(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new kE(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&(function(a){let u=a?._online.build();return{_offline:a?._offline.build(u),_online:u}})(n._componentsProvider))}var Ti=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(Nt.fromBase64String(e))}catch(t){throw new B(O.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(Nt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Lu(e,n._jsonSchema))return n.fromBase64String(e.bytes)}};Ti._jsonSchemaVersion="firestore/bytes/1.0",Ti._jsonSchema={type:ot("string",Ti._jsonSchemaVersion),bytes:ot("string")};var la=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new B(O.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new rn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Ou=class{constructor(e){this._methodName=e}};var Si=class n{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new B(O.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new B(O.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return fe(this._lat,e._lat)||fe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:n._jsonSchemaVersion}}static fromJSON(e){if(Lu(e,n._jsonSchema))return new n(e.latitude,e.longitude)}};Si._jsonSchemaVersion="firestore/geoPoint/1.0",Si._jsonSchema={type:ot("string",Si._jsonSchemaVersion),latitude:ot("number"),longitude:ot("number")};var Ai=class n{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Lu(e,n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new n(e.vectorValues);throw new B(O.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};Ai._jsonSchemaVersion="firestore/vectorValue/1.0",Ai._jsonSchema={type:ot("string",Ai._jsonSchemaVersion),vectorValues:ot("object")};var FH=/^__.*__$/,LE=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new sr(e,this.data,this.fieldMask,t,this.fieldTransforms):new jo(e,this.data,t,this.fieldTransforms)}},Yh=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new sr(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function fM(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw X(40011,{Ec:n})}}var VE=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Ac(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Jh(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(fM(this.Ec)&&FH.test(e))throw this.wc('Document fields cannot begin and end with "__"')}},UE=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||sp(e)}Dc(e,t,r,i=!1){return new VE({Ec:e,methodName:t,bc:r,path:rn.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function gw(n){let e=n._freezeSettings(),t=sp(n._databaseId);return new UE(n._databaseId,!!e.ignoreUndefinedProperties,t)}function LH(n,e,t,r,i,o={}){let s=n.Dc(o.merge||o.mergeFields?2:0,e,t,i);mw("Data must be an object, but it was:",s,r);let a=hM(r,s),u,l;if(o.merge)u=new yn(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let f=[];for(let p of o.mergeFields){let g=jE(e,p,t);if(!s.contains(g))throw new B(O.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);gM(f,g)||f.push(g)}u=new yn(f),l=s.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,l=s.fieldTransforms;return new LE(new nn(a),u,l)}var Zh=class n extends Ou{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function VH(n,e,t,r){let i=n.Dc(1,e,t);mw("Data must be an object, but it was:",i,r);let o=[],s=nn.empty();ki(r,(u,l)=>{let f=yw(e,u,t);l=He(l);let p=i.gc(f);if(l instanceof Zh)o.push(f);else{let g=ju(l,p);g!=null&&(o.push(f),s.set(f,g))}});let a=new yn(o);return new Yh(s,a,i.fieldTransforms)}function UH(n,e,t,r,i,o){let s=n.Dc(1,e,t),a=[jE(e,r,t)],u=[i];if(o.length%2!=0)throw new B(O.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<o.length;g+=2)a.push(jE(e,o[g])),u.push(o[g+1]);let l=[],f=nn.empty();for(let g=a.length-1;g>=0;--g)if(!gM(l,a[g])){let y=a[g],T=u[g];T=He(T);let P=s.gc(y);if(T instanceof Zh)l.push(y);else{let N=ju(T,P);N!=null&&(l.push(y),f.set(y,N))}}let p=new yn(l);return new Yh(f,p,s.fieldTransforms)}function jH(n,e,t,r=!1){return ju(t,n.Dc(r?4:3,e))}function ju(n,e){if(pM(n=He(n)))return mw("Unsupported field value:",e,n),hM(n,e);if(n instanceof Ou)return(function(r,i){if(!fM(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(r,i){let o=[],s=0;for(let a of r){let u=ju(a,i.yc(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}})(n,e)}return(function(r,i){if((r=He(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return I4(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=st.fromDate(r);return{timestampValue:Ph(i.serializer,o)}}if(r instanceof st){let o=new st(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ph(i.serializer,o)}}if(r instanceof Si)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ti)return{bytesValue:VR(i.serializer,r._byteString)};if(r instanceof It){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.wc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:rw(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Ai)return(function(s,a){return{mapValue:{fields:{[YE]:{stringValue:ZE},[ea]:{arrayValue:{values:s.toArray().map(l=>{if(typeof l!="number")throw a.wc("VectorValues must only contain numeric values.");return nw(a.serializer,l)})}}}}}})(r,i);throw i.wc(`Unsupported field value: ${tp(r)}`)})(n,e)}function hM(n,e){let t={};return lR(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ki(n,(r,i)=>{let o=ju(i,e.Vc(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function pM(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof st||n instanceof Si||n instanceof Ti||n instanceof It||n instanceof Ou||n instanceof Ai)}function mw(n,e,t){if(!pM(t)||!Qx(t)){let r=tp(t);throw r==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+r)}}function jE(n,e,t){if((e=He(e))instanceof la)return e._internalPath;if(typeof e=="string")return yw(n,e);throw Jh("Field path arguments must be of type string or ",n,!1,void 0,t)}var BH=new RegExp("[~\\*/\\[\\]]");function yw(n,e,t){if(e.search(BH)>=0)throw Jh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new la(...e.split("."))._internalPath}catch{throw Jh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Jh(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new B(O.INVALID_ARGUMENT,a+n+u)}function gM(n,e){return n.some(t=>t.isEqual(e))}var Xh=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new It(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new BE(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(vw("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},BE=class extends Xh{data(){return super.data()}};function vw(n,e){return typeof e=="string"?yw(n,e):e instanceof la?e._internalPath:e._delegate._internalPath}function mM(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new B(O.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var ku=class{},ep=class extends ku{};function _w(n,e,...t){let r=[];e instanceof ku&&r.push(e),r=r.concat(t),(function(o){let s=o.filter(u=>u instanceof $E).length,a=o.filter(u=>u instanceof HE).length;if(s>1||s>0&&a>0)throw new B(O.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(let i of r)n=i._apply(n);return n}var HE=class n extends ep{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return yM(e._query,t),new Oi(e.firestore,e.converter,x0(e._query,t))}_parse(e){let t=gw(e.firestore);return(function(o,s,a,u,l,f,p){let g;if(l.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new B(O.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){qx(p,f);let T=[];for(let P of p)T.push(zx(u,o,P));g={arrayValue:{values:T}}}else g=zx(u,o,p)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||qx(p,f),g=jH(a,s,p,f==="in"||f==="not-in");return it.create(l,f,g)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};var $E=class n extends ku{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:On.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:((function(i,o){let s=i,a=o.getFlattenedFilters();for(let u of a)yM(s,u),s=x0(s,u)})(e._query,t),new Oi(e.firestore,e.converter,x0(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var zE=class n extends ep{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=(function(i,o,s){if(i.startAt!==null)throw new B(O.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new B(O.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Lo(o,s)})(e._query,this._field,this._direction);return new Oi(e.firestore,e.converter,(function(i,o){let s=i.explicitOrderBy.concat([o]);return new Mi(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(e._query,t))}};function Ew(n,e="asc"){let t=e,r=vw("orderBy",n);return zE._create(r,t)}function zx(n,e,t){if(typeof(t=He(t))=="string"){if(t==="")throw new B(O.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!bR(e)&&t.indexOf("/")!==-1)throw new B(O.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(Be.fromString(t));if(!Y.isDocumentKey(r))throw new B(O.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return dx(n,new Y(r))}if(t instanceof It)return dx(n,t._key);throw new B(O.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${tp(t)}.`)}function qx(n,e){if(!Array.isArray(n)||n.length===0)throw new B(O.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function yM(n,e){let t=(function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null})(n.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new B(O.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new B(O.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var qE=class{convertValue(e,t="none"){switch(Ri(e)){case 0:return null;case 1:return e.booleanValue;case 2:return je(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(jr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw X(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return ki(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;let o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t[ea].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>je(s.doubleValue));return new Ai(o)}convertGeoPoint(e){return new Si(je(e.latitude),je(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=rp(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Su(e));default:return null}}convertTimestamp(e){let t=Ur(e);return new st(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=Be.fromString(e);Ae(zR(r),9688,{name:e});let i=new Sh(r.get(1),r.get(3)),o=new Y(r.popFirst(5));return i.isEqual(t)||Vr(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function HH(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var No=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Po=class n extends Xh{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Js(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(vw("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new B(O.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=n._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};Po._jsonSchemaVersion="firestore/documentSnapshot/1.0",Po._jsonSchema={type:ot("string",Po._jsonSchemaVersion),bundleSource:ot("string","DocumentSnapshot"),bundleName:ot("string"),bundle:ot("string")};var Js=class extends Po{data(e={}){return super.data(e)}},Oo=class n{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new No(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Js(this._firestore,this._userDataWriter,r.key,r,new No(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new B(O.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let u=new Js(i._firestore,i._userDataWriter,a.doc.key,a.doc,new No(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let u=new Js(i._firestore,i._userDataWriter,a.doc.key,a.doc,new No(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,f=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),f=s.indexOf(a.doc.key)),{type:$H(a.type),doc:u,oldIndex:l,newIndex:f}})}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new B(O.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=n._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=bu.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(t.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function $H(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return X(61501,{type:n})}}Oo._jsonSchemaVersion="firestore/querySnapshot/1.0",Oo._jsonSchema={type:ot("string",Oo._jsonSchemaVersion),bundleSource:ot("string","QuerySnapshot"),bundleName:ot("string"),bundle:ot("string")};var Fu=class extends qE{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ti(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new It(this.firestore,null,t)}};function Bu(n){n=tr(n,Oi);let e=tr(n.firestore,$r),t=pw(e),r=new Fu(e);return mM(n._query),PH(t,n._query).then(i=>new Oo(e,r,n,i))}function ww(n,e,t,...r){n=tr(n,It);let i=tr(n.firestore,$r),o=gw(i),s;return s=typeof(e=He(e))=="string"||e instanceof la?UH(o,"updateDoc",n._key,e,t,r):VH(o,"updateDoc",n._key,e),Cw(i,[s.toMutation(n._key,Lr.exists(!0))])}function Hu(n){return Cw(tr(n.firestore,$r),[new xu(n._key,Lr.none())])}function ma(n,e){let t=tr(n.firestore,$r),r=ga(n),i=HH(n.converter,e);return Cw(t,[LH(gw(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,Lr.exists(!1))]).then(()=>r)}function Iw(n,...e){var t,r,i;n=He(n);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||$x(e[s])||(o=e[s++]);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if($x(e[s])){let p=e[s];e[s]=(t=p.next)===null||t===void 0?void 0:t.bind(p),e[s+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[s+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let u,l,f;if(n instanceof It)l=tr(n.firestore,$r),f=tw(n._key.path),u={next:p=>{e[s]&&e[s](zH(l,n,p))},error:e[s+1],complete:e[s+2]};else{let p=tr(n,Oi);l=tr(p.firestore,$r),f=p._query;let g=new Fu(l);u={next:y=>{e[s]&&e[s](new Oo(l,g,p,y))},error:e[s+1],complete:e[s+2]},mM(n._query)}return(function(g,y,T,P){let N=new Wh(P),j=new zh(y,N,T);return g.asyncQueue.enqueueAndForget(async()=>eM(await FE(g),j)),()=>{N.Ou(),g.asyncQueue.enqueueAndForget(async()=>tM(await FE(g),j))}})(pw(l),f,a,u)}function Cw(n,e){return(function(r,i){let o=new er;return r.asyncQueue.enqueueAndForget(async()=>IH(await NH(r),i,o)),o.promise})(pw(n),e)}function zH(n,e,t){let r=t.docs.get(e._key),i=new Fu(n);return new Po(n,i,e._key,r,new No(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){da=i})(_i),vi(new gn("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new $r(new u0(r.getProvider("auth-internal")),new f0(s,r.getProvider("app-check-internal")),(function(l,f){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new B(O.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Sh(l.options.projectId,f)})(s,i),s);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Nn(X1,ex,e),Nn(X1,ex,"esm2017")})();var qH=["cardEl"],$o=(n,e)=>({correct:n,wrong:e}),kn=(n,e)=>e.id;function GH(n,e){n&1&&(w(0,"p",7),x(1,"Chargement..."),D())}function WH(n,e){if(n&1&&(w(0,"p",12),x(1),D()),n&2){let t=k(2);M(),Te(t.authError())}}function KH(n,e){if(n&1){let t=Re();w(0,"div",4)(1,"div",14)(2,"h3"),x(3,"Nouvelle collection"),D(),w(4,"form",15)(5,"input",16),vo("ngModelChange",function(i){z(t);let o=k(2);return Cs(o.collectionForm.name,i)||(o.collectionForm.name=i),q(i)}),D(),w(6,"div",17)(7,"button",18),K("click",function(){z(t);let i=k(2);return q(i.addCollection())}),x(8,"Valider"),D(),w(9,"button",19),K("click",function(){z(t);let i=k(2);return q(i.cancelAddCollection())}),x(10,"Annuler"),D()()()()()}if(n&2){let t=k(2);M(5),yo("ngModel",t.collectionForm.name)}}function QH(n,e){if(n&1){let t=Re();w(0,"div",4)(1,"div",14)(2,"h3"),x(3,"Supprimer la collection ?"),D(),w(4,"p"),x(5,"Vous \xEAtes s\xFBr de vouloir supprimer la collection : "),w(6,"strong"),x(7),D(),x(8," ?"),D(),w(9,"div",17)(10,"button",18),K("click",function(){z(t);let i=k(2);return q(i.deleteCollectionConfirmed())}),x(11,"Valider"),D(),w(12,"button",19),K("click",function(){z(t);let i=k(2);return q(i.cancelDeleteCollection())}),x(13,"Annuler"),D()()()()}n&2&&(M(7),Te(e.name))}function YH(n,e){if(n&1){let t=Re();w(0,"div",13)(1,"div",20)(2,"div")(3,"p",21),x(4,"V\xE9rifie ton email"),D(),w(5,"p",22),x(6,"Un lien t'attend dans ta bo\xEEte. Clique puis recharge la page."),D()(),w(7,"div",23),x(8,"Email non v\xE9rifi\xE9"),D()(),w(9,"div",24)(10,"button",25),K("click",function(){z(t);let i=k(2);return q(i.sendVerification())}),x(11," Renvoyer le mail "),D(),w(12,"span",26),x(13,"Pense \xE0 v\xE9rifier tes spams."),D()()()}if(n&2){let t=k(2);M(10),ke("disabled",t.auth.verifying())}}function ZH(n,e){if(n&1){let t=Re();w(0,"div",2)(1,"div",5)(2,"h1"),x(3,"Connexion"),D(),w(4,"p",6),x(5,"Identifie-toi pour acc\xE9der \xE0 ta banque."),D(),we(6,GH,2,0,"p",7),w(7,"form",8),K("ngSubmit",function(){z(t);let i=k();return q(i.login())}),w(8,"label"),x(9," Email "),w(10,"input",9),K("ngModelChange",function(i){z(t);let o=k();return q(o.email.set(i))}),D()(),w(11,"label"),x(12," Mot de passe "),w(13,"input",10),K("ngModelChange",function(i){z(t);let o=k();return q(o.password.set(i))}),D()(),w(14,"button",11),x(15,"Se connecter"),D()(),we(16,WH,2,1,"p",12),D(),we(17,KH,11,1,"div",4),we(18,QH,14,1,"div",4),we(19,YH,14,1,"div",13),D()}if(n&2){let t,r,i=k();M(6),Ie(i.auth.loading()?6:-1),M(4),ke("ngModel",i.email()),M(3),ke("ngModel",i.password()),M(3),Ie(i.authError()?16:-1),M(),Ie(i.showAddCollectionModal()?17:-1),M(),Ie((t=i.showConfirmDeleteCollection()&&i.collectionToDelete())?18:-1,t),M(),Ie(i.auth.user()&&!((r=i.auth.user())!=null&&r.emailVerified)&&i.environment.requireEmailVerification?19:-1)}}function JH(n,e){if(n&1&&(w(0,"div",38)(1,"div",39),x(2),D()()),n&2){let t=k(2);M(),xt("background",t.avatarColor()),M(),Te(t.avatarInitial())}}function XH(n,e){if(n&1&&(w(0,"article",45)(1,"div",47)(2,"div",48)(3,"div",49),x(4,"Recto"),D(),w(5,"p",50),x(6),D()(),w(7,"div",51)(8,"div",49),x(9,"Verso"),D(),w(10,"p",50),x(11),D()()()()),n&2){let t=e.$implicit;M(6),Te(t.front),M(5),Te(t.back)}}function e$(n,e){n&1&&(w(0,"p",46),x(1,"Aucune carte pour l\u2019instant."),D())}function t$(n,e){n&1&&(w(0,"p",46),x(1,"Pas encore de tests. Lance une session dans l\u2019onglet R\xE9vision."),D())}function n$(n,e){if(n&1){let t=Re();w(0,"article",53),K("click",function(){let i=z(t),o=k(4);return q(o.openLatestInReview(i))})("keyup.enter",function(){let i=z(t),o=k(4);return q(o.openLatestInReview(i))}),w(1,"div",54)(2,"span",55),x(3),D(),w(4,"span",7),x(5),_o(6,"date"),D()(),w(7,"div",56)(8,"div",57)(9,"p",50),x(10),D()(),w(11,"div",58),x(12,"Voir le r\xE9cap complet"),D()()()}if(n&2){let t=e;ke("ngClass",Tr(8,$o,t.score===t.size,t.score!==t.size)),M(3),ft("Test #",t.id),M(2),Te(Eo(6,5,t.createdAt,"short")),M(5),An("Score : ",t.score," / ",t.size)}}function r$(n,e){if(n&1&&we(0,n$,13,11,"article",52),n&2){let t,r=k(3);Ie((t=r.history()[0])?0:-1,t)}}function i$(n,e){if(n&1&&(go(0),w(1,"header",40)(2,"div",41)(3,"p",30),x(4,"Accueil"),D(),w(5,"h1"),x(6,"Derni\xE8res cartes & tests"),D(),w(7,"p",6),x(8,"Un coup d\u2019\u0153il rapide sur ce que tu viens d\u2019ajouter et tes r\xE9visions."),D()()(),w(9,"div",42)(10,"section")(11,"div",43)(12,"h2"),x(13,"Derni\xE8res cartes"),D(),w(14,"span",7),x(15,"8 plus r\xE9centes"),D()(),w(16,"div",44),Yt(17,XH,12,2,"article",45,kn,!1,e$,2,0,"p",46),D()(),w(20,"section")(21,"div",43)(22,"h2"),x(23,"Dernier Test"),D()(),we(24,t$,2,0,"p",46)(25,r$,1,1),D()(),mo()),n&2){let t=k(2);M(17),Zt(t.flashcards().slice(0,8)),M(7),Ie(t.history().length===0?24:25)}}function o$(n,e){n&1&&(w(0,"p",46),x(1,"Aucune collection. Cr\xE9e ta premi\xE8re pour organiser tes cartes."),D())}function s$(n,e){if(n&1){let t=Re();w(0,"button",69),K("click",function(i){z(t);let o=k().$implicit,s=k(5);return q(s.requestDeleteCollection(o,i))}),x(1," \xD7 "),D()}}function a$(n,e){if(n&1){let t=Re();w(0,"article",65),K("click",function(){let i=z(t).$implicit,o=k(5);return q(o.selectCollection(i.id))})("keyup.enter",function(){let i=z(t).$implicit,o=k(5);return q(o.selectCollection(i.id))}),we(1,s$,2,0,"button",66),w(2,"p",67),x(3),D(),w(4,"p",68),x(5),D(),w(6,"p",68),x(7),_o(8,"date"),D()()}if(n&2){let t=e.$implicit,r=k(5);et("active",t.id===r.selectedCollectionId())("delete-mode",r.collectionDeleteMode()),M(),Ie(r.collectionDeleteMode()?1:-1),M(2),Te(t.name),M(2),ft("",r.collectionSizes()[t.id]??0," cartes"),M(2),Te(Eo(8,8,t.createdAt,"shortDate"))}}function c$(n,e){if(n&1&&Yt(0,a$,9,11,"article",64,kn),n&2){let t=k(4);Zt(t.collections())}}function u$(n,e){if(n&1){let t=Re();w(0,"section",59)(1,"div",41)(2,"p",30),x(3,"Banque de cartes"),D(),w(4,"h1"),x(5,"Collections"),D(),w(6,"p",6),x(7," Cr\xE9e des collections pour cat\xE9goriser tes cartes. "),D(),w(8,"div",60),br(9,"span",29),w(10,"span"),x(11),D()(),w(12,"div",61)(13,"button",18),K("click",function(){z(t);let i=k(3);return q(i.openAddCollection())}),x(14,"Ajouter"),D(),w(15,"button",62),K("click",function(){z(t);let i=k(3);return q(i.toggleCollectionDeleteMode())}),x(16),D()()(),w(17,"div",63),we(18,o$,2,0,"p",46)(19,c$,2,0),D()()}if(n&2){let t=k(3);M(11),An("",t.totalCards()," carte",t.totalCards()>1?"s":""),M(4),et("active",t.collectionDeleteMode()),M(),ft(" ",t.collectionDeleteMode()?"Terminer suppression":"Supprimer collections"," "),M(2),Ie(t.collections().length===0?18:19)}}function l$(n,e){n&1&&(w(0,"p",46),x(1,"Ajoute ta premi\xE8re carte dans cette collection."),D())}function d$(n,e){if(n&1){let t=Re();w(0,"button",81),K("click",function(i){z(t);let o=k().$implicit;return k(5).deleteCard(o.id),q(i.stopPropagation())}),x(1," \xD7 "),D()}}function f$(n,e){if(n&1){let t=Re();w(0,"article",79,1),K("click",function(){let i=z(t).$implicit,o=k(5);return q(o.toggleCard(i.id))})("keyup.enter",function(){let i=z(t).$implicit,o=k(5);return q(o.toggleCard(i.id))}),we(2,d$,2,0,"button",80),w(3,"div",47)(4,"div",48)(5,"div",49),x(6,"Recto"),D(),w(7,"p",50),x(8),D()(),w(9,"div",51)(10,"div",49),x(11,"Verso"),D(),w(12,"p",50),x(13),D()()()()}if(n&2){let t=e.$implicit,r=k(5);et("new-card",t.id===r.lastAddedId())("flipped",t.flipped),li("aria-pressed",t.flipped),M(2),Ie(r.deleteMode()?2:-1),M(5),xt("font-size",r.fontSize(t.front)),M(),Te(t.front),M(4),xt("font-size",r.fontSize(t.back)),M(),Te(t.back)}}function h$(n,e){if(n&1&&Yt(0,f$,14,12,"article",78,kn),n&2){let t=k(4);Zt(t.flashcards())}}function p$(n,e){if(n&1){let t=Re();w(0,"header",70)(1,"div",41)(2,"button",71),K("click",function(){z(t);let i=k(3);return q(i.selectedCollectionId.set(null))}),x(3," \u2190 Retour aux collections "),D(),w(4,"p",30),x(5,"Banque de cartes"),D(),w(6,"h1"),x(7),D(),w(8,"p",6),x(9," Ajoute des mots, \xE9v\xE8nements, question... "),D(),w(10,"p"),x(11,"clique sur une carte pour r\xE9v\xE9ler la r\xE9ponse."),D(),w(12,"div",60),br(13,"span",29),w(14,"span"),x(15),D()(),w(16,"div",61)(17,"button",72),K("click",function(){z(t);let i=k(3);return q(i.shuffleCards())}),x(18," M\xE9langer "),D(),w(19,"button",72),K("click",function(){z(t);let i=k(3);return q(i.flipAllCards())}),x(20," Tout retourner "),D(),w(21,"button",62),K("click",function(){z(t);let i=k(3);return q(i.toggleDeleteMode())}),x(22),D()()(),w(23,"form",73,0),K("ngSubmit",function(){z(t);let i=k(3);return q(i.addCard())}),w(25,"label"),x(26," recto "),w(27,"input",74),vo("ngModelChange",function(i){z(t);let o=k(3);return Cs(o.form.front,i)||(o.form.front=i),q(i)}),D()(),w(28,"label"),x(29," verso "),w(30,"input",75),vo("ngModelChange",function(i){z(t);let o=k(3);return Cs(o.form.back,i)||(o.form.back=i),q(i)}),D()(),w(31,"button",76),x(32," Ajouter \xE0 la banque "),D()()(),w(33,"section",77),we(34,l$,2,0,"p",46)(35,h$,2,0),D()}if(n&2){let t,r=My(24),i=k(3);M(7),Te((t=i.selectedCollection())==null?null:t.name),M(8),An("",i.totalCards()," carte",i.totalCards()>1?"s":""),M(2),ke("disabled",i.flashcards().length===0),M(2),ke("disabled",i.flashcards().length===0),M(2),et("active",i.deleteMode()),M(),ft(" ",i.deleteMode()?"Terminer suppression":"Supprimer cartes"," "),M(5),yo("ngModel",i.form.front),M(3),yo("ngModel",i.form.back),M(),ke("disabled",r.form.invalid),M(2),et("delete-mode",i.deleteMode())("shuffling",i.shuffleWave()),M(),Ie(i.flashcards().length===0?34:35)}}function g$(n,e){if(n&1&&(go(0),we(1,u$,20,6,"section",59),we(2,p$,36,16),mo()),n&2){let t=k(2);M(),Ie(t.selectedCollectionId()?-1:1),M(),Ie(t.selectedCollectionId()?2:-1)}}function m$(n,e){if(n&1&&(w(0,"div",60),br(1,"span",29),w(2,"span"),x(3),D()()),n&2){let t=k(3);M(3),An("Score : ",t.score()," / ",t.reviewCards().length||t.testSize())}}function y$(n,e){if(n&1){let t=Re();w(0,"div",97),K("click",function(){let i=z(t).$implicit,o=k(4);return q(o.toggleReviewCollection(i.id))})("keyup.enter",function(){let i=z(t).$implicit,o=k(4);return q(o.toggleReviewCollection(i.id))}),w(1,"span",98),x(2),D(),w(3,"span",68),x(4),D()()}if(n&2){let t=e.$implicit,r=k(4);et("selected",r.selectedReviewCollections().includes(t.id)),M(2),Te(t.name),M(2),ft("",r.collectionSizes()[t.id]??0," cartes")}}function v$(n,e){n&1&&(w(0,"p",46),x(1,"Cr\xE9e d'abord une collection dans l'onglet Banque."),D())}function _$(n,e){if(n&1){let t=Re();w(0,"section",82)(1,"form",83),K("ngSubmit",function(){z(t);let i=k(3);return q(i.startTest())}),w(2,"div",84)(3,"label",85)(4,"span",86),x(5,"Nombre de cartes"),D(),w(6,"input",87),K("ngModelChange",function(i){z(t);let o=k(3);return q(o.testSize.set(+(i||0)))}),D()(),w(7,"div",88)(8,"span",26),x(9,"S\xE9lection rapide"),D(),w(10,"div",89)(11,"button",90),K("click",function(){z(t);let i=k(3);return q(i.selectAllReviewCollections())}),x(12,"Toutes"),D(),w(13,"button",91),K("click",function(){z(t);let i=k(3);return q(i.clearReviewCollections())}),x(14,"Aucune"),D()()()(),w(15,"div",92)(16,"p",26),x(17,"Choisis les collections pour ce test :"),D(),w(18,"div",93),Yt(19,y$,5,4,"div",94,kn,!1,v$,2,0,"p",46),D()(),w(22,"div",95)(23,"button",96),x(24,"Lancer le test"),D()()()()}if(n&2){let t=k(3);M(6),ke("max",t.totalCards()||1)("ngModel",t.testSize()),M(13),Zt(t.collections())}}function E$(n,e){if(n&1){let t=Re();w(0,"article",104),K("click",function(i){let o=z(t).$implicit,s=k(6);return i.stopPropagation(),q(s.toggleRecapCard(o.id))}),w(1,"div",47)(2,"div",48)(3,"div",49),x(4,"Question"),D(),w(5,"p",50),x(6),D()(),w(7,"div",51)(8,"div",49),x(9,"R\xE9ponse"),D(),w(10,"p",50),x(11),D()()()()}if(n&2){let t=e.$implicit,r=k(2).$implicit,i=k(4);et("flipped",i.recapFlips()[t.id]),ke("ngClass",Tr(9,$o,(r.answers==null?null:r.answers[t.id])===!0,(r.answers==null?null:r.answers[t.id])===!1)),M(5),xt("font-size",i.fontSize(t.front)),M(),Te(t.front),M(4),xt("font-size",i.fontSize(t.back)),M(),Te(t.back)}}function w$(n,e){if(n&1&&(w(0,"div",102),Yt(1,E$,12,12,"article",103,kn),D()),n&2){let t=k().$implicit;M(),Zt(t.cards)}}function I$(n,e){if(n&1){let t=Re();w(0,"article",53),K("click",function(){let i=z(t).$implicit,o=k(4);return q(o.toggleHistoryView(i))})("keyup.enter",function(){let i=z(t).$implicit,o=k(4);return q(o.toggleHistoryView(i))}),w(1,"div",54)(2,"span",55),x(3),D(),w(4,"span",7),x(5),_o(6,"date"),D()(),w(7,"div",56)(8,"div",57)(9,"p",50),x(10),D()(),w(11,"div",58),x(12," Voir le r\xE9cap complet "),w(13,"span",101),x(14),D()()(),we(15,w$,3,0,"div",102),D()}if(n&2){let t=e.$implicit,r=k(4);ke("ngClass",Tr(10,$o,t.score===t.size,t.score!==t.size)),M(3),ft("Test #",t.id),M(2),Te(Eo(6,7,t.createdAt,"short")),M(5),An("Score : ",t.score," / ",t.size),M(4),Te(r.openHistoryId()===t.id.toString()?"\u25B4":"\u25BE"),M(),Ie(r.openHistoryId()===t.id.toString()?15:-1)}}function C$(n,e){n&1&&(w(0,"p",46),x(1,"Aucun test sauvegard\xE9"),D())}function b$(n,e){if(n&1){let t=Re();w(0,"div",43)(1,"h2"),x(2,"Derniers Tests"),D(),w(3,"button",99),K("click",function(){z(t);let i=k(3);return q(i.clearHistory())}),x(4,"Supprimer historique"),D()(),w(5,"div",100),Yt(6,I$,16,13,"article",52,kn,!1,C$,2,0,"p",46),D()}if(n&2){let t=k(3);M(6),Zt(t.history().slice(0,12))}}function D$(n,e){if(n&1){let t=Re();w(0,"article",104),K("click",function(){let i=z(t).$implicit,o=k(4);return q(o.toggleRecapCard(i.id))}),w(1,"div",47)(2,"div",48)(3,"div",49),x(4,"Question"),D(),w(5,"p",50),x(6),D()(),w(7,"div",51)(8,"div",49),x(9,"R\xE9ponse"),D(),w(10,"p",50),x(11),D()()()()}if(n&2){let t=e.$implicit,r=k(4);et("flipped",r.recapFlips()[t.id]),ke("ngClass",Tr(9,$o,r.answers()[t.id]===!0,r.answers()[t.id]===!1)),M(5),xt("font-size",r.fontSize(t.front)),M(),Te(t.front),M(4),xt("font-size",r.fontSize(t.back)),M(),Te(t.back)}}function T$(n,e){if(n&1){let t=Re();w(0,"div",106)(1,"button",107),K("click",function(){z(t);let i=k(4);return q(i.showAllRecap=!i.showAllRecap)}),x(2),D()()}if(n&2){let t=k(4);M(2),ft(" ",t.showAllRecap?"\u25B4":"\u25BE"," ")}}function S$(n,e){if(n&1){let t=Re();w(0,"article",104),K("click",function(i){let o=z(t).$implicit,s=k(6);return i.stopPropagation(),q(s.toggleRecapCard(o.id))}),w(1,"div",47)(2,"div",48)(3,"div",49),x(4,"Question"),D(),w(5,"p",50),x(6),D()(),w(7,"div",51)(8,"div",49),x(9,"R\xE9ponse"),D(),w(10,"p",50),x(11),D()()()()}if(n&2){let t=e.$implicit,r=k(2).$implicit,i=k(4);et("flipped",i.recapFlips()[t.id]),ke("ngClass",Tr(9,$o,(r.answers==null?null:r.answers[t.id])===!0,(r.answers==null?null:r.answers[t.id])===!1)),M(5),xt("font-size",i.fontSize(t.front)),M(),Te(t.front),M(4),xt("font-size",i.fontSize(t.back)),M(),Te(t.back)}}function A$(n,e){if(n&1&&(w(0,"div",102),Yt(1,S$,12,12,"article",103,kn),D()),n&2){let t=k().$implicit;M(),Zt(t.cards)}}function x$(n,e){if(n&1){let t=Re();w(0,"article",53),K("click",function(){let i=z(t).$implicit,o=k(4);return q(o.toggleHistoryView(i))})("keyup.enter",function(){let i=z(t).$implicit,o=k(4);return q(o.toggleHistoryView(i))}),w(1,"div",54)(2,"span",55),x(3),D(),w(4,"span",7),x(5),_o(6,"date"),D()(),w(7,"div",56)(8,"div",57)(9,"p",50),x(10),D()(),w(11,"div",58),x(12," Voir le r\xE9cap complet "),w(13,"span",101),x(14),D()()(),we(15,A$,3,0,"div",102),D()}if(n&2){let t=e.$implicit,r=k(4);ke("ngClass",Tr(10,$o,t.score===t.size,t.score!==t.size)),M(3),ft("Test #",t.id),M(2),Te(Eo(6,7,t.createdAt,"short")),M(5),An("Score : ",t.score," / ",t.size),M(4),Te(r.openHistoryId()===t.id.toString()?"\u25B4":"\u25BE"),M(),Ie(r.openHistoryId()===t.id.toString()?15:-1)}}function R$(n,e){n&1&&(w(0,"p",46),x(1,"Pas encore de tests. Lance une session dans l\u2019onglet R\xE9vision."),D())}function M$(n,e){if(n&1){let t=Re();w(0,"div",43)(1,"h2"),x(2,"R\xE9sultats"),D()(),w(3,"div",105)(4,"p"),x(5),D(),w(6,"button",32),K("click",function(){z(t);let i=k(3);return q(i.startTest())}),x(7,"Relancer"),D(),w(8,"div",102),Yt(9,D$,12,12,"article",103,kn),D(),we(11,T$,3,1,"div",106),D(),w(12,"div",43)(13,"h2"),x(14,"Derniers Tests"),D(),w(15,"button",99),K("click",function(){z(t);let i=k(3);return q(i.clearHistory())}),x(16,"Supprimer historique"),D()(),w(17,"div",100),Yt(18,x$,16,13,"article",52,kn,!1,R$,2,0,"p",46),D()}if(n&2){let t=k(3);M(5),An("Score : ",t.score()," / ",t.reviewCards().length),M(4),Zt(t.reviewCards().slice(0,t.showAllRecap?t.reviewCards().length:8)),M(2),Ie(t.reviewCards().length>8?11:-1),M(7),Zt(t.history().slice(0,12))}}function N$(n,e){}function P$(n,e){if(n&1&&(w(0,"article",108)(1,"div",47)(2,"div",48)(3,"div",49),x(4,"Question"),D(),w(5,"p",50),x(6),D()(),w(7,"div",51)(8,"div",49),x(9,"R\xE9ponse"),D(),w(10,"p",50),x(11),D()()()()),n&2){let t=e.$implicit,r=k(6);M(5),xt("font-size",r.fontSize(t.front)),M(),Te(t.front),M(4),xt("font-size",r.fontSize(t.back)),M(),Te(t.back)}}function O$(n,e){if(n&1&&(w(0,"div",102),Yt(1,P$,12,6,"article",108,kn),D()),n&2){let t=k().$implicit;M(),Zt(t.cards)}}function k$(n,e){if(n&1){let t=Re();w(0,"article",53),K("click",function(){let i=z(t).$implicit,o=k(4);return q(o.toggleHistoryView(i))})("keyup.enter",function(){let i=z(t).$implicit,o=k(4);return q(o.toggleHistoryView(i))}),w(1,"div",54)(2,"span",55),x(3),D(),w(4,"span",7),x(5),_o(6,"date"),D()(),w(7,"div",56)(8,"div",57)(9,"p",50),x(10),D()(),w(11,"div",58),x(12," Voir le r\xE9cap complet "),w(13,"span",101),x(14),D()()(),we(15,O$,3,0,"div",102),D()}if(n&2){let t=e.$implicit,r=k(4);ke("ngClass",Tr(10,$o,t.score===t.size,t.score!==t.size)),M(3),ft("Test #",t.id),M(2),Te(Eo(6,7,t.createdAt,"short")),M(5),An("Score : ",t.score," / ",t.size),M(4),Te(r.openHistoryId()===t.id.toString()?"\u25B4":"\u25BE"),M(),Ie(r.openHistoryId()===t.id.toString()?15:-1)}}function F$(n,e){if(n&1){let t=Re();w(0,"div",43)(1,"h2"),x(2,"Derniers Tests"),D(),w(3,"button",99),K("click",function(){z(t);let i=k(3);return q(i.clearHistory())}),x(4,"Supprimer historique"),D()(),w(5,"div",100),Yt(6,k$,16,13,"article",52,kn),D()}if(n&2){let t=k(3);M(6),Zt(t.history().slice(0,12))}}function L$(n,e){if(n&1&&(w(0,"p",110),x(1),D()),n&2){let t=k(4);M(),ft(" ",t.lastCorrect()?"Bonne r\xE9ponse !":"Rat\xE9"," ")}}function V$(n,e){n&1&&x(0," En attente ")}function U$(n,e){n&1&&x(0," Correct ")}function j$(n,e){n&1&&x(0," Incorrect ")}function B$(n,e){if(n&1){let t=Re();w(0,"form",112),K("ngSubmit",function(){z(t);let i=k(4);return q(i.submitAnswer())}),w(1,"div",113)(2,"div")(3,"p",114),x(4,"Ta r\xE9ponse"),D(),w(5,"p",115),x(6,"Tape la traduction puis valide."),D()(),w(7,"div",116),we(8,V$,1,0)(9,U$,1,0)(10,j$,1,0),D()(),w(11,"input",117),K("input",function(i){z(t);let o=k(4);return q(o.answer.set(i.target.value))}),D(),w(12,"div",118)(13,"button",119),x(14,"Valider"),D(),w(15,"button",120),K("click",function(){z(t);let i=k(4);return q(i.nextCard())}),x(16," Carte suivante "),D()()()}if(n&2){let t=k(4);M(7),et("success",t.lastCorrect())("error",t.lastCorrect()===!1),M(),Ie(t.lastCorrect()===null?8:t.lastCorrect()?9:10),M(3),ke("disabled",t.cardRevealed())("value",t.answer()),M(2),ke("disabled",t.cardRevealed()),M(2),ke("disabled",!t.cardRevealed())}}function H$(n,e){if(n&1&&(w(0,"div",109)(1,"div",47)(2,"div",48)(3,"div",49),x(4),D(),w(5,"p",50),x(6),D()(),w(7,"div",51)(8,"div",49),x(9,"R\xE9ponse attendue"),D(),w(10,"p",50),x(11),D(),we(12,L$,2,1,"p",110),D()()(),Is(13,B$,17,9,"form",111)),n&2){let t=e,r=k(3);et("revealed",r.cardRevealed()),M(4),ft("Carte ",r.currentIndex()+1),M(),xt("font-size",r.fontSize(r.showFront()?t.front:t.back)),M(),ft(" ",r.showFront()?t.front:t.back," "),M(4),xt("font-size",r.fontSize(r.showFront()?t.back:t.front)),M(),ft(" ",r.showFront()?t.back:t.front," "),M(),Ie(r.cardRevealed()?12:-1),M(),ke("ngIf",!r.testFinished())}}function $$(n,e){if(n&1&&(go(0),w(1,"section",70)(2,"div",41)(3,"p",30),x(4,"Session de r\xE9vision"),D(),w(5,"h1"),x(6,"Teste-toi"),D(),w(7,"p",6),x(8,"Choisis le nombre de cartes, r\xE9ponds, puis valide pour voir la solution."),D(),we(9,m$,4,2,"div",60),D()(),we(10,_$,25,3,"section",82),we(11,b$,9,1),we(12,M$,21,4),we(13,N$,0,0),we(14,F$,8,0),we(15,H$,14,11),mo()),n&2){let t,r,i=k(2);M(9),Ie(i.reviewCards().length>0||i.testFinished()?9:-1),M(),Ie(i.testFinished()||i.reviewCards().length===0?10:-1),M(),Ie(i.reviewCards().length===0&&!i.testFinished()?11:-1),M(),Ie(i.testFinished()&&i.reviewCards().length>0&&!i.selectedHistory()?12:-1),M(),Ie((t=i.selectedHistory())?13:-1,t),M(),Ie((i.testFinished()||i.selectedHistory())&&i.history().length>0?14:-1),M(),Ie((r=!i.selectedHistory()&&!i.testFinished()&&i.currentCard())?15:-1,r)}}function z$(n,e){if(n&1){let t=Re();w(0,"div",3)(1,"nav",27)(2,"div",28),br(3,"span",29),w(4,"div")(5,"p",30),x(6,"Vocab"),D(),w(7,"strong"),x(8,"Bank"),D()(),Is(9,JH,3,3,"div",31),D(),w(10,"button",32),K("click",function(){z(t);let i=k();return q(i.switchTab("home"))}),x(11," Accueil "),D(),w(12,"button",32),K("click",function(){z(t);let i=k();return q(i.switchTab("bank"))}),x(13),D(),w(14,"button",32),K("click",function(){z(t);let i=k();return q(i.switchTab("review"))}),x(15," R\xE9vision "),D(),w(16,"div",33)(17,"button",34),K("click",function(){z(t);let i=k();return q(i.logout())}),x(18,"D\xE9connexion"),D()()(),w(19,"section",35),go(20,36),Is(21,i$,26,2,"ng-container",37)(22,g$,3,2,"ng-container",37)(23,$$,16,7,"ng-container",37),mo(),D()()}if(n&2){let t=k();M(9),ke("ngIf",t.isAuthenticated()),M(),et("active",t.activeTab()==="home"),M(2),et("active",t.activeTab()==="bank"),M(),ft(" Banque (",t.totalCards(),") "),M(),et("active",t.activeTab()==="review"),M(6),ke("ngSwitch",t.activeTab()),M(),ke("ngSwitchCase","home"),M(),ke("ngSwitchCase","bank"),M(),ke("ngSwitchCase","review")}}function q$(n,e){if(n&1){let t=Re();w(0,"div",4)(1,"div",14)(2,"h3"),x(3,"Nouvelle collection"),D(),w(4,"form",121),K("ngSubmit",function(){z(t);let i=k();return q(i.addCollection())}),w(5,"input",16),vo("ngModelChange",function(i){z(t);let o=k();return Cs(o.collectionForm.name,i)||(o.collectionForm.name=i),q(i)}),D(),w(6,"div",17)(7,"button",96),x(8,"Valider"),D(),w(9,"button",19),K("click",function(){z(t);let i=k();return q(i.cancelAddCollection())}),x(10,"Annuler"),D()()()()()}if(n&2){let t=k();M(5),yo("ngModel",t.collectionForm.name)}}function G$(n,e){if(n&1){let t=Re();w(0,"div",4)(1,"div",14)(2,"h3"),x(3,"Supprimer la collection ?"),D(),w(4,"p"),x(5,"Vous \xEAtes s\xFBr de vouloir supprimer la collection et toutes ses cartes : "),w(6,"strong"),x(7),D(),x(8," ?"),D(),w(9,"div",17)(10,"button",18),K("click",function(){z(t);let i=k();return q(i.deleteCollectionConfirmed())}),x(11,"Valider"),D(),w(12,"button",19),K("click",function(){z(t);let i=k();return q(i.cancelDeleteCollection())}),x(13,"Annuler"),D()()()()}n&2&&(M(7),Te(e.name))}var up=class n{historyKeyBase="bank-vocabulary/history";nextTestId=1;db=null;unsubscribeCards;unsubscribeCollections;currentUserId=null;migratingRoot=!1;skipAutoSelect=!1;collections=te([]);selectedCollectionId=te(null);collectionSizes=te({});flashcards=te([]);selectedCollection=jt(()=>this.collections().find(e=>e.id===this.selectedCollectionId())??null);collectionDeleteMode=te(!1);showAddCollectionModal=te(!1);showConfirmDeleteCollection=te(!1);collectionToDelete=te(null);totalCards=jt(()=>this.flashcards().length);activeTab=te("home");testSize=te(5);reviewCards=te([]);selectedReviewCollections=te([]);selectedReviewTotal=jt(()=>this.selectedReviewCollections().reduce((e,t)=>e+(this.collectionSizes()[t]??0),0));currentIndex=te(0);score=te(0);showFront=te(!0);cardRevealed=te(!1);lastCorrect=te(null);testFinished=te(!1);answer=te("");history=te([]);selectedHistory=te(null);deleteMode=te(!1);lastAddedId=te(null);shuffleWave=te(!1);answers=te({});recapFlips=te({});showAllHistory=!1;showAllRecap=!1;openHistoryId=te(null);email=te("");password=te("");authError=te(null);environment=js;historyKey=te(`${this.historyKeyBase}/anon`);cardRefs;auth=V(fh);form={front:"",back:""};collectionForm={name:""};constructor(){this.loadHistory(),oi(()=>{let e=JSON.stringify(this.history());localStorage.setItem(this.historyKey(),e)}),oi(()=>{let e=this.auth.user();this.handleUserChange(e??null)}),oi(()=>{let e=new Set(this.collections().map(t=>t.id));this.selectedReviewCollections.update(t=>t.filter(r=>e.has(r)))}),oi(()=>{let e=this.selectedReviewCollections().length>0?this.selectedReviewTotal():0;e>0&&e!==this.testSize()&&this.testSize.set(e)})}isAuthenticated=jt(()=>{let e=this.auth.user();return!(!e||js.requireEmailVerification&&!e.emailVerified)});avatarInitial=jt(()=>{let e=this.auth.user()?.email??"";return e?e.trim()[0]?.toUpperCase()??"?":"?"});avatarColor=jt(()=>{let e=this.auth.user()?.email??"",t=["#22d3ee","#60a5fa","#f97316","#f43f5e","#c084fc","#34d399"];if(!e)return t[0];let r=0;for(let i of e)r=(r*31+i.charCodeAt(0))%9973;return t[r%t.length]});fontSize(e){let t=(e??"").length;return t<=25?"20px":t<=60?"18px":t<=120?"16px":"14px"}async login(){this.authError.set(null);try{await this.auth.signIn(this.email(),this.password()),this.password.set("")}catch(e){this.authError.set(e?.message??"Erreur de connexion")}}async sendVerification(){try{await this.auth.sendVerification()}catch(e){this.authError.set(e?.message??"\xC9chec de l\u2019envoi du mail")}}async logout(){await this.auth.logout()}addCard(){let e=this.form.front.trim(),t=this.form.back.trim(),r=this.selectedCollectionId();!e||!t||!r||!this.db||!this.auth.user()||(ma(vn(this.db,"users",this.auth.user().uid,"collections",r,"cards"),{front:e,back:t,flipped:!1,createdAt:Date.now()}).then(i=>{this.lastAddedId.set(i.id),setTimeout(()=>this.lastAddedId.set(null),800)}).catch(i=>this.authError.set(i?.message??"Erreur lors de l\u2019ajout")),this.form.front="",this.form.back="")}toggleCard(e){if(this.deleteMode()||!this.db||!this.auth.user())return;let t=this.selectedCollectionId();if(!t)return;let r=this.flashcards().find(i=>i.id===e);r&&ww(ga(this.db,"users",this.auth.user().uid,"collections",t,"cards",e),{flipped:!r.flipped}).catch(()=>{})}toggleDeleteMode(){this.deleteMode.update(e=>!e)}deleteCard(e){if(!this.db||!this.auth.user())return;let t=this.selectedCollectionId();t&&Hu(ga(this.db,"users",this.auth.user().uid,"collections",t,"cards",e)).catch(()=>{})}flipAllCards(){if(!this.db||!this.auth.user())return;let e=!this.flashcards().every(o=>o.flipped),t=this.auth.user().uid,r=this.selectedCollectionId();if(!r)return;let i=this.flashcards().map(o=>ww(ga(this.db,"users",t,"collections",r,"cards",o.id),{flipped:e}).catch(()=>{}));Promise.all(i).catch(()=>{})}async addSampleCards(){if(!this.db||!this.auth.user())return;let e=this.auth.user().uid,t=[{front:"Machine learning",back:"Apprentissage automatique"},{front:"Liquidity",back:"Liquidit\xE9"},{front:"Churn",back:"Attrition client"},{front:"Gross margin",back:"Marge brute"},{front:"Tenir compte de",back:"To take into account"},{front:"Key takeaway",back:"Point cl\xE9"},{front:"Deadline",back:"Date limite"},{front:"Cash flow",back:"Flux de tr\xE9sorerie"},{front:"Hypoth\xE8se",back:"Assumption"},{front:"Livrable",back:"Deliverable"}];try{await Promise.all(t.map(r=>ma(vn(this.db,"users",e,"cards"),ne(L({},r),{flipped:!1,createdAt:Date.now()}))))}catch(r){this.authError.set(r?.message??"Erreur lors de l\u2019ajout des exemples")}}shuffleCards(){this.flashcards.update(e=>{let t=[...e];for(let r=t.length-1;r>0;r--){let i=Math.floor(Math.random()*(r+1));[t[r],t[i]]=[t[i],t[r]]}return t}),this.prepareShuffleVectors(),this.shuffleWave.set(!1),setTimeout(()=>this.shuffleWave.set(!0)),setTimeout(()=>this.shuffleWave.set(!1),1e3)}prepareShuffleVectors(){if(!this.cardRefs)return;let e=window.innerWidth/2,t=window.innerHeight/2;this.cardRefs.forEach(r=>{let i=r.nativeElement,o=i.getBoundingClientRect(),s=e-(o.left+o.width/2),a=t-(o.top+o.height/2);i.style.setProperty("--dx",`${s}px`),i.style.setProperty("--dy",`${a}px`)})}switchTab(e){this.activeTab.set(e),e!=="review"&&this.selectedHistory.set(null),e!=="bank"&&(this.deleteMode.set(!1),this.collectionDeleteMode.set(!1))}selectCollection(e){if(!this.db||!this.auth.user()||this.selectedCollectionId()===e)return;this.collectionDeleteMode()&&this.collectionDeleteMode.set(!1),this.selectedCollectionId.set(e),this.unsubscribeCards?.();let t=_w(vn(this.db,"users",this.auth.user().uid,"collections",e,"cards"),Ew("createdAt","desc"));this.unsubscribeCards=Iw(t,r=>{let i=r.docs.map(o=>{let s=o.data();return{id:o.id,front:s.front,back:s.back,flipped:!!s.flipped,createdAt:s.createdAt??Date.now()}});this.flashcards.set(i)})}async addCollection(){let e=this.collectionForm.name.trim();if(!(!e||!this.db||!this.auth.user()))try{let t=await ma(vn(this.db,"users",this.auth.user().uid,"collections"),{name:e,createdAt:Date.now()});this.collectionForm.name="",this.showAddCollectionModal.set(!1),this.selectCollection(t.id)}catch(t){this.authError.set(t?.message??"Erreur cr\xE9ation collection")}}openAddCollection(){this.collectionForm.name="",this.showAddCollectionModal.set(!0)}cancelAddCollection(){this.showAddCollectionModal.set(!1)}toggleCollectionDeleteMode(){this.collectionDeleteMode.update(e=>!e),this.collectionDeleteMode()||(this.collectionToDelete.set(null),this.showConfirmDeleteCollection.set(!1))}requestDeleteCollection(e,t){t?.stopPropagation(),this.collectionToDelete.set(e),this.showConfirmDeleteCollection.set(!0)}cancelDeleteCollection(){this.collectionToDelete.set(null),this.showConfirmDeleteCollection.set(!1)}async deleteCollectionConfirmed(){let e=this.collectionToDelete();if(!(!e||!this.db||!this.auth.user())){try{let t=this.auth.user().uid,r=await Bu(vn(this.db,"users",t,"collections",e.id,"cards"));await Promise.all(r.docs.map(i=>Hu(i.ref))),await Hu(ga(this.db,"users",t,"collections",e.id)),this.selectedCollectionId()===e.id&&(this.skipAutoSelect=!0,this.selectedCollectionId.set(null),this.flashcards.set([]))}catch(t){this.authError.set(t?.message??"Suppression collection impossible")}this.showConfirmDeleteCollection.set(!1),this.collectionToDelete.set(null),this.collectionDeleteMode.set(!1)}}async startTest(e){this.selectedHistory.set(null);let t=[];if(e)t=[...e];else{let a=this.selectedReviewCollections().length>0?this.selectedReviewCollections():this.collections().map(u=>u.id);if(this.db&&this.auth.user()){let u=this.auth.user().uid;for(let l of a)(await Bu(vn(this.db,"users",u,"collections",l,"cards"))).docs.forEach(p=>{let g=p.data();t.push({id:p.id,front:g.front,back:g.back,flipped:!!g.flipped,createdAt:g.createdAt??Date.now()})})}else t=[...this.flashcards()]}let r=a=>(a??"").trim().toLowerCase(),i=Array.from(t.reduce((a,u)=>{let l=`${r(u.front)}|${r(u.back)}`;return a.has(l)||a.set(l,u),a},new Map).values());if(i.length===0){this.testFinished.set(!0),this.reviewCards.set([]);return}let o=Math.max(1,Math.min(this.testSize(),i.length)),s=e?i.slice(0,o):i.sort(()=>Math.random()-.5).slice(0,o);this.reviewCards.set(s),this.currentIndex.set(0),this.score.set(0),this.testFinished.set(!1),this.testSize.set(o),this.answers.set({}),this.recapFlips.set({}),this.prepareCard(!0)}submitAnswer(){let e=this.currentCard();if(!e||this.cardRevealed())return;let t=this.showFront()?e.back:e.front,i=this.answer().trim().toLowerCase()===t.trim().toLowerCase();i&&this.score.update(o=>o+1),this.answers.update(o=>ne(L({},o),{[e.id]:i})),this.lastCorrect.set(i),this.cardRevealed.set(!0)}nextCard(){if(this.testFinished())return;let e=this.currentIndex()+1,t=e<this.reviewCards().length;this.cardRevealed.set(!1),this.showFront.set(!0),this.answer.set(""),this.lastCorrect.set(null),setTimeout(()=>{if(!t){this.finalizeTest();return}this.currentIndex.set(e),this.prepareCard(!0)},250)}toggleRecapCard(e){this.recapFlips.update(t=>ne(L({},t),{[e]:!t[e]}))}toggleHistoryView(e){let t=String(e.id);if(this.openHistoryId()===t){this.openHistoryId.set(null),this.recapFlips.set({});return}this.recapFlips.set({}),this.openHistoryId.set(t)}toggleReviewCollection(e){this.selectedReviewCollections.update(t=>t.includes(e)?t.filter(r=>r!==e):[...t,e])}selectAllReviewCollections(){this.selectedReviewCollections.set(this.collections().map(e=>e.id))}clearReviewCollections(){this.selectedReviewCollections.set([])}openHistoryTest(e){this.activeTab.set("review"),this.selectedHistory.set(e),this.reviewCards.set(e.cards),this.currentIndex.set(0),this.score.set(e.score),this.testFinished.set(!0),this.answer.set(""),this.cardRevealed.set(!1),this.lastCorrect.set(null),this.showFront.set(!0),this.answers.set(e.answers??{})}clearHistory(){this.history.set([]),this.selectedHistory.set(null),this.reviewCards.set([]),this.testFinished.set(!1),this.currentIndex.set(0),this.score.set(0),this.openHistoryId.set(null),this.recapFlips.set({}),this.answers.set({}),this.nextTestId=1,localStorage.removeItem(this.historyKey())}openLatestInReview(e){this.switchTab("review"),this.reviewCards.set([]),this.testFinished.set(!1),this.selectedHistory.set(null),this.recapFlips.set({}),this.answers.set(e.answers??{}),this.openHistoryId.set(String(e.id))}currentCard=jt(()=>this.reviewCards()[this.currentIndex()]??null);finalizeTest(){if(this.testFinished())return;this.testFinished.set(!0);let e=this.reviewCards().length;if(e===0)return;let t=this.reviewCards().map(o=>ne(L({},o),{flipped:!1})),r=L({},this.answers()),i={id:this.nextTestId++,createdAt:Date.now(),size:e,score:this.score(),cards:t,answers:r};this.history.update(o=>[i,...o].slice(0,12)),this.selectedHistory.set(i),this.reviewCards.set(t),this.openHistoryId.set(String(i.id))}prepareCard(e=!1){this.showFront.set(e?!0:Math.random()>.5),this.answer.set(""),this.cardRevealed.set(!1),this.lastCorrect.set(null)}loadHistory(){let e=localStorage.getItem(this.historyKey());if(e)try{let t=JSON.parse(e);if(Array.isArray(t)){this.history.set(t.slice(0,12));let r=t.reduce((i,o)=>Math.max(i,o.id??0),0);this.nextTestId=(r||0)+1}}catch{}}handleUserChange(e){if(this.unsubscribeCards?.(),this.unsubscribeCollections?.(),!e){this.flashcards.set([]),this.collections.set([]),this.db=null,this.historyKey.set(`${this.historyKeyBase}/anon`),this.history.set([]),this.reviewCards.set([]),this.selectedHistory.set(null),this.testFinished.set(!1),this.currentIndex.set(0),this.currentUserId=null,this.selectedCollectionId.set(null);return}if(this.currentUserId&&this.currentUserId!==e.uid&&(this.history.set([]),this.reviewCards.set([]),this.selectedHistory.set(null),this.testFinished.set(!1),this.currentIndex.set(0)),this.currentUserId=e.uid,this.historyKey.set(`${this.historyKeyBase}/${e.uid}`),this.loadHistory(),!this.db)try{this.db=hw($s())}catch{this.db=hw(cu(js.firebase))}let t=_w(vn(this.db,"users",e.uid,"collections"),Ew("createdAt","desc"));this.unsubscribeCollections=Iw(t,r=>{let i=r.docs.map(o=>{let s=o.data();return{id:o.id,name:s.name??"Collection",createdAt:s.createdAt??Date.now()}});this.collections.set(i),this.skipAutoSelect&&!this.selectedCollectionId()&&(this.skipAutoSelect=!1),!this.selectedCollectionId()&&i.length>0?this.skipAutoSelect?(this.unsubscribeCards?.(),this.flashcards.set([])):this.selectCollection(i[0].id):i.length===0&&(this.selectedCollectionId.set(null),this.flashcards.set([]),this.unsubscribeCards?.(),this.skipAutoSelect=!1),this.migratingRoot||this.migrateRootCards(e.uid,i),this.refreshCollectionSizes(e.uid,i)})}async refreshCollectionSizes(e,t){if(!this.db)return;let r={};await Promise.all(t.map(async i=>{let o=await Bu(vn(this.db,"users",e,"collections",i.id,"cards"));r[i.id]=o.size})),this.collectionSizes.set(r)}async migrateRootCards(e,t){if(this.db){this.migratingRoot=!0;try{let r=await Bu(vn(this.db,"users",e,"cards"));if(r.empty){this.migratingRoot=!1;return}let i=t.find(a=>a.name.toLowerCase()==="g\xE9n\xE9ral"||a.name.toLowerCase()==="general")||null;i||(i={id:(await ma(vn(this.db,"users",e,"collections"),{name:"G\xE9n\xE9ral",createdAt:Date.now()})).id,name:"G\xE9n\xE9ral",createdAt:Date.now()},this.collections.update(u=>[i,...u]));let o=vn(this.db,"users",e,"collections",i.id,"cards"),s=r.docs.map(async a=>{let u=a.data();await ma(o,ne(L({},u),{createdAt:u.createdAt??Date.now(),flipped:u.flipped??!1})),await Hu(a.ref)});await Promise.all(s),this.selectedCollectionId()||this.selectCollection(i.id)}catch(r){this.authError.set(r?.message??"Migration des anciennes cartes impossible")}finally{this.migratingRoot=!1}}}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Ic({type:n,selectors:[["app-root"]],viewQuery:function(t,r){if(t&1&&Bd(qH,5),t&2){let i;xy(i=Ry())&&(r.cardRefs=i)}},decls:4,vars:3,consts:[["cardForm","ngForm"],["cardEl",""],[1,"auth-screen"],[1,"layout"],[1,"modal-backdrop"],[1,"auth-card"],[1,"lede"],[1,"muted"],["autocomplete","off",1,"auth-form",3,"ngSubmit"],["type","email","name","email","required","","autocomplete","off","autocapitalize","none","spellcheck","false",3,"ngModelChange","ngModel"],["type","password","name","password","required","","autocomplete","off",3,"ngModelChange","ngModel"],["type","submit"],[1,"auth-error"],[1,"verify-card","below-auth"],[1,"modal"],["autocomplete","off",1,"collection-form"],["type","text","name","collection","placeholder","Nom de la collection","required","","autocomplete","off",3,"ngModelChange","ngModel"],[1,"modal-actions"],["type","button",1,"primary",3,"click"],["type","button",1,"danger",3,"click"],[1,"verify-header"],[1,"verify-title"],[1,"verify-sub"],[1,"chip","warning"],[1,"verify-actions"],["type","button",1,"nav-btn",3,"click","disabled"],[1,"muted","small"],[1,"sidebar"],[1,"brand"],[1,"dot"],[1,"eyebrow"],["class","brand-avatar",4,"ngIf"],[1,"nav-btn",3,"click"],[1,"sidebar-meta"],["type","button",1,"logout",3,"click"],[1,"page"],[3,"ngSwitch"],[4,"ngSwitchCase"],[1,"brand-avatar"],[1,"avatar"],[1,"hero","single"],[1,"headline"],[1,"home-sections"],[1,"section-title"],[1,"grid"],["role","presentation",1,"card"],[1,"empty"],[1,"card-inner"],[1,"card-face","front"],[1,"tag"],[1,"word"],[1,"card-face","back"],["tabindex","0",1,"history-wide",3,"ngClass"],["tabindex","0",1,"history-wide",3,"click","keyup.enter","ngClass"],[1,"history-wide__header"],[1,"pill","small"],[1,"history-wide__body"],[1,"history-wide__score"],[1,"history-wide__cta"],[1,"collection-section"],[1,"stats"],[1,"actions-bar"],["type","button",1,"delete-toggle",3,"click"],[1,"collection-grid"],["tabindex","0",1,"collection-card",3,"active","delete-mode"],["tabindex","0",1,"collection-card",3,"click","keyup.enter"],["type","button","aria-label","Supprimer la collection",1,"delete-badge"],[1,"collection-name"],[1,"collection-date","muted"],["type","button","aria-label","Supprimer la collection",1,"delete-badge",3,"click"],[1,"hero"],["type","button",1,"secondary","back-btn",3,"click"],["type","button",1,"shuffle-btn",3,"click","disabled"],["autocomplete","off",1,"new-card",3,"ngSubmit"],["name","front","type","text","required","","autocomplete","off","autocapitalize","none","spellcheck","false",3,"ngModelChange","ngModel"],["name","back","type","text","required","","autocomplete","off","autocapitalize","none","spellcheck","false",3,"ngModelChange","ngModel"],["type","submit",3,"disabled"],["aria-label","Liste des flashcards",1,"grid"],["role","button","tabindex","0",1,"card",3,"new-card","flipped"],["role","button","tabindex","0",1,"card",3,"click","keyup.enter"],["type","button","aria-label","Supprimer cette carte",1,"delete-badge"],["type","button","aria-label","Supprimer cette carte",1,"delete-badge",3,"click"],[1,"review-controls"],["autocomplete","off",1,"review-form",3,"ngSubmit"],[1,"form-row"],[1,"field"],[1,"label"],["name","size","type","number","min","1","placeholder","5","required","","autocomplete","off","inputmode","numeric",3,"ngModelChange","max","ngModel"],[1,"picker-actions"],[1,"pill-actions"],["type","button",1,"primary","pill",3,"click"],["type","button",1,"primary","pill","ghost",3,"click"],[1,"collection-picker"],[1,"collection-list"],["role","button","tabindex","0",1,"collection-option",3,"selected"],[1,"form-actions"],["type","submit",1,"primary"],["role","button","tabindex","0",1,"collection-option",3,"click","keyup.enter"],[1,"name"],["type","button",1,"danger-btn",3,"click"],[1,"history-stack"],[1,"chevron"],[1,"grid","recap-grid"],[1,"card","recap",3,"ngClass","flipped"],[1,"card","recap",3,"click","ngClass"],[1,"result"],[1,"more-btn-wrapper"],["type","button",1,"nav-btn","more-btn",3,"click"],[1,"card","recap"],[1,"review-card"],[1,"hint"],["class","answer","autocomplete","off",3,"ngSubmit",4,"ngIf"],["autocomplete","off",1,"answer",3,"ngSubmit"],[1,"answer-header"],[1,"answer-title"],[1,"answer-sub"],[1,"chip"],["name","answer","type","text","placeholder","\xC9cris ta r\xE9ponse","required","","autocomplete","off","autocapitalize","none","spellcheck","false",1,"answer-input",3,"input","disabled","value"],[1,"actions"],["type","submit",1,"primary",3,"disabled"],["type","button",1,"secondary",3,"click","disabled"],["autocomplete","off",1,"collection-form",3,"ngSubmit"]],template:function(t,r){if(t&1&&(we(0,ZH,20,7,"div",2)(1,z$,24,12,"div",3),we(2,q$,11,1,"div",4),we(3,G$,14,1,"div",4)),t&2){let i;Ie(r.isAuthenticated()?1:0),M(2),Ie(r.showAddCollectionModal()?2:-1),M(),Ie((i=r.showConfirmDeleteCollection()&&r.collectionToDelete())?3:-1,i)}},dependencies:[ef,By,Hy,Xd,$y,EA,vA,kf,qv,dA,fA,Qv,Kv,Wv,zv,$v,zy],styles:['@font-face{font-family:Manrope;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/manrope/v20/xn7gYHE41ni1AdIRggqxSuXd.woff2) format("woff2");unicode-range:U+0460-052F,U+1C80-1C8A,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:Manrope;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/manrope/v20/xn7gYHE41ni1AdIRggOxSuXd.woff2) format("woff2");unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:Manrope;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/manrope/v20/xn7gYHE41ni1AdIRggSxSuXd.woff2) format("woff2");unicode-range:U+0370-0377,U+037A-037F,U+0384-038A,U+038C,U+038E-03A1,U+03A3-03FF}@font-face{font-family:Manrope;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/manrope/v20/xn7gYHE41ni1AdIRggixSuXd.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Manrope;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/manrope/v20/xn7gYHE41ni1AdIRggmxSuXd.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Manrope;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/manrope/v20/xn7gYHE41ni1AdIRggexSg.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Manrope;font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/manrope/v20/xn7gYHE41ni1AdIRggqxSuXd.woff2) format("woff2");unicode-range:U+0460-052F,U+1C80-1C8A,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:Manrope;font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/manrope/v20/xn7gYHE41ni1AdIRggOxSuXd.woff2) format("woff2");unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:Manrope;font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/manrope/v20/xn7gYHE41ni1AdIRggSxSuXd.woff2) format("woff2");unicode-range:U+0370-0377,U+037A-037F,U+0384-038A,U+038C,U+038E-03A1,U+03A3-03FF}@font-face{font-family:Manrope;font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/manrope/v20/xn7gYHE41ni1AdIRggixSuXd.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Manrope;font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/manrope/v20/xn7gYHE41ni1AdIRggmxSuXd.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Manrope;font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/manrope/v20/xn7gYHE41ni1AdIRggexSg.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Manrope;font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/manrope/v20/xn7gYHE41ni1AdIRggqxSuXd.woff2) format("woff2");unicode-range:U+0460-052F,U+1C80-1C8A,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:Manrope;font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/manrope/v20/xn7gYHE41ni1AdIRggOxSuXd.woff2) format("woff2");unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:Manrope;font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/manrope/v20/xn7gYHE41ni1AdIRggSxSuXd.woff2) format("woff2");unicode-range:U+0370-0377,U+037A-037F,U+0384-038A,U+038C,U+038E-03A1,U+03A3-03FF}@font-face{font-family:Manrope;font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/manrope/v20/xn7gYHE41ni1AdIRggixSuXd.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Manrope;font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/manrope/v20/xn7gYHE41ni1AdIRggmxSuXd.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Manrope;font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/manrope/v20/xn7gYHE41ni1AdIRggexSg.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Space Grotesk;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/spacegrotesk/v22/V8mDoQDjQSkFtoMM3T6r8E7mPb54C-s0.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Space Grotesk;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/spacegrotesk/v22/V8mDoQDjQSkFtoMM3T6r8E7mPb94C-s0.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Space Grotesk;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/spacegrotesk/v22/V8mDoQDjQSkFtoMM3T6r8E7mPbF4Cw.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Space Grotesk;font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/spacegrotesk/v22/V8mDoQDjQSkFtoMM3T6r8E7mPb54C-s0.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Space Grotesk;font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/spacegrotesk/v22/V8mDoQDjQSkFtoMM3T6r8E7mPb94C-s0.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Space Grotesk;font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/spacegrotesk/v22/V8mDoQDjQSkFtoMM3T6r8E7mPbF4Cw.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Space Grotesk;font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/spacegrotesk/v22/V8mDoQDjQSkFtoMM3T6r8E7mPb54C-s0.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Space Grotesk;font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/spacegrotesk/v22/V8mDoQDjQSkFtoMM3T6r8E7mPb94C-s0.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Space Grotesk;font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/spacegrotesk/v22/V8mDoQDjQSkFtoMM3T6r8E7mPbF4Cw.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Space Grotesk;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/spacegrotesk/v22/V8mDoQDjQSkFtoMM3T6r8E7mPb54C-s0.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Space Grotesk;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/spacegrotesk/v22/V8mDoQDjQSkFtoMM3T6r8E7mPb94C-s0.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Space Grotesk;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/spacegrotesk/v22/V8mDoQDjQSkFtoMM3T6r8E7mPbF4Cw.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}[_nghost-%COMP%]{display:block;min-height:100vh;background:radial-gradient(circle at 20% 20%,#2d6cdf1f,transparent 40%),radial-gradient(circle at 80% 10%,#f59e0b1f,transparent 35%),linear-gradient(135deg,#0b1224,#0f192f 45%,#0b1224);color:#e5ecf5;font-family:Space Grotesk,Manrope,system-ui,-apple-system,sans-serif;padding:48px 24px 72px;box-sizing:border-box}.layout[_ngcontent-%COMP%]{display:grid;grid-template-columns:220px 1fr;gap:24px;max-width:1280px;margin:0 auto}.sidebar[_ngcontent-%COMP%]{position:sticky;top:32px;align-self:start;background:#0f172a;border:1px solid #1f2e4d;border-radius:16px;padding:18px;display:flex;flex-direction:column;gap:10px;box-shadow:0 10px 35px #0003}.brand[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;margin-bottom:8px;min-width:0}.brand-avatar[_ngcontent-%COMP%]{margin-left:auto;display:flex;align-items:center}.user-pill[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;min-width:0;max-width:180px;margin-bottom:8px}.avatar[_ngcontent-%COMP%]{width:32px;height:32px;border-radius:50%;display:grid;place-items:center;color:#0b1224;font-weight:800;text-transform:uppercase;box-shadow:0 0 0 2px #0f172a,0 6px 14px #0003}.user-mail[_ngcontent-%COMP%]{max-width:120px;font-size:12px;color:#cbd5e1;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.brand[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]{width:12px;height:12px;border-radius:50%;background:linear-gradient(120deg,#60a5fa,#22d3ee);box-shadow:0 0 12px #22d3ee66}.nav-btn[_ngcontent-%COMP%]{background:#111b30;border:1px solid #1f2e4d;border-radius:12px;color:#e5ecf5;padding:10px 12px;text-align:left;cursor:pointer;transition:border .2s ease,background .2s ease,transform .08s ease}.nav-btn[_ngcontent-%COMP%]:hover{border-color:#60a5fa}.nav-btn.active[_ngcontent-%COMP%]{background:linear-gradient(135deg,#2563eb22,#22d3ee22);border-color:#60a5fa;transform:translate(2px)}.sidebar-meta[_ngcontent-%COMP%]{margin-top:6px;color:#94a3b8;font-size:13px}.sidebar-meta[_ngcontent-%COMP%]   .logout[_ngcontent-%COMP%]{margin-top:8px;width:100%;background:#111b30;border:1px solid #1f2e4d;color:#e5ecf5;border-radius:10px;padding:8px 10px;cursor:pointer}.page[_ngcontent-%COMP%]{max-width:1100px;width:100%}.hero[_ngcontent-%COMP%]{display:grid;grid-template-columns:1.2fr 1fr;gap:32px;align-items:center;margin-bottom:28px}.hero.single[_ngcontent-%COMP%]{grid-template-columns:1fr}.headline[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:8px 0 6px;font-size:40px;letter-spacing:-.02em}.headline[_ngcontent-%COMP%]   .lede[_ngcontent-%COMP%]{margin:0;color:#b7c4d6}.eyebrow[_ngcontent-%COMP%]{text-transform:uppercase;letter-spacing:.2em;font-size:11px;color:#7bb8ff;margin:0}.stats[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:10px;margin-top:18px;background:#13223c;color:#dbeafe;padding:10px 14px;border:1px solid #1f2e4d;border-radius:999px;font-weight:600;width:fit-content}.stats[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]{width:10px;height:10px;border-radius:50%;background:linear-gradient(120deg,#60a5fa,#22d3ee);box-shadow:0 0 12px #22d3ee66}.actions-bar[_ngcontent-%COMP%]{display:flex;gap:10px;margin-top:12px}.delete-toggle[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ef4444,#f97316);border:1px solid #ef4444;color:#0b1224;border-radius:10px;padding:10px 14px;font-weight:700;cursor:pointer;transition:transform .08s ease,box-shadow .2s ease,background .2s ease}.delete-toggle.active[_ngcontent-%COMP%]{background:linear-gradient(135deg,#2563eb,#22d3ee);border-color:#2563eb;color:#0b1224}.back-btn[_ngcontent-%COMP%]{align-self:flex-start;margin-bottom:10px;background:#111b30;border:1px solid #1f2e4d;color:#e5ecf5;border-radius:12px;padding:8px 14px;font-weight:700;cursor:pointer;transition:transform .12s ease,box-shadow .2s ease,border .2s ease}.back-btn[_ngcontent-%COMP%]:hover{transform:translateY(-1px);border-color:#2563eb;box-shadow:0 10px 25px #0003}.delete-toggle[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 10px 25px #0003}.shuffle-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#2563eb,#22d3ee);border:none;color:#0b1224;border-radius:10px;padding:10px 14px;font-weight:700;cursor:pointer;transition:transform .08s ease,box-shadow .2s ease,border-color .2s ease}.shuffle-btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-1px);box-shadow:0 12px 30px #2563eb44}.shuffle-btn[_ngcontent-%COMP%]:disabled{opacity:.4;cursor:not-allowed}.new-card[_ngcontent-%COMP%]{background:#0f172a;border:1px solid #1f2e4d;border-radius:16px;padding:16px;display:grid;gap:12px;box-shadow:0 10px 35px #0003}.new-card[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6px;color:#cbd5e1;font-size:14px}.new-card[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background:#0b1224;border:1px solid #1e293b;border-radius:10px;color:#e5ecf5;padding:12px 14px;outline:none;font-size:15px;transition:border .2s ease,box-shadow .2s ease}.new-card[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:#60a5fa;box-shadow:0 0 0 3px #60a5fa33}.new-card[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:4px;background:linear-gradient(135deg,#2563eb,#22d3ee);border:none;border-radius:12px;color:#0b1224;font-weight:700;padding:12px 14px;cursor:pointer;transition:transform .1s ease,box-shadow .2s ease,opacity .2s ease}.new-card[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{opacity:.4;cursor:not-allowed}.new-card[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:not(:disabled):hover{transform:translateY(-1px);box-shadow:0 12px 30px #2563eb44}.grid[_ngcontent-%COMP%]{display:grid;gap:16px;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));margin-top:24px}.recap-grid[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%], .recap-grid[_ngcontent-%COMP%]   .card-inner[_ngcontent-%COMP%]{height:150px}.empty[_ngcontent-%COMP%]{grid-column:1 / -1;text-align:center;color:#94a3b8;padding:18px;border:1px dashed #1f2e4d;border-radius:12px;background:#0f172a}.card[_ngcontent-%COMP%]{position:relative;height:180px;perspective:1100px;cursor:pointer;transition:transform .2s ease}.card.correct[_ngcontent-%COMP%]   .card-inner[_ngcontent-%COMP%]{box-shadow:0 0 0 2px #22c55e80,0 10px 30px #22c55e22;border-radius:16px}.card.wrong[_ngcontent-%COMP%]   .card-inner[_ngcontent-%COMP%]{box-shadow:0 0 0 2px #ef444480,0 10px 30px #ef444422;border-radius:16px}.delete-badge[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;width:28px;height:28px;border-radius:50%;border:none;background:#ef4444;color:#fff;font-weight:800;cursor:pointer;z-index:2;box-shadow:0 0 0 2px #0f172a,0 6px 14px #0003}.delete-badge[_ngcontent-%COMP%]:hover{background:#dc2626}.grid.delete-mode[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_shake .5s ease-in-out infinite}.grid.shuffling[_ngcontent-%COMP%]:not(.delete-mode)   .card[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_gather-scatter .9s ease-in-out}.grid.shuffling[_ngcontent-%COMP%]:not(.delete-mode)   .card[_ngcontent-%COMP%]:nth-child(2n){animation-delay:40ms}.grid.shuffling[_ngcontent-%COMP%]:not(.delete-mode)   .card[_ngcontent-%COMP%]:nth-child(3n){animation-delay:80ms}.grid.shuffling[_ngcontent-%COMP%]:not(.delete-mode)   .card[_ngcontent-%COMP%]:nth-child(4n){animation-delay:.12s}@keyframes _ngcontent-%COMP%_gather-scatter{0%{transform:translate(0) scale(1)}35%{transform:translate(var(--dx, 0px),var(--dy, 0px)) scale(.55) rotate(-.5deg)}55%{transform:translate(var(--dx, 0px),var(--dy, 0px)) scale(.55) rotate(.5deg)}to{transform:translate(0) scale(1)}}@keyframes _ngcontent-%COMP%_shake{0%{transform:translate(.5px,.5px) rotate(0)}20%{transform:translate(-.5px,-1px) rotate(-.5deg)}40%{transform:translate(-1.5px) rotate(.5deg)}60%{transform:translate(1.5px,1px) rotate(0)}80%{transform:translate(.5px,-.5px) rotate(.5deg)}to{transform:translate(-.5px,1px) rotate(-.5deg)}}.card.new-card[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pop-in .45s ease}@keyframes _ngcontent-%COMP%_pop-in{0%{transform:scale(.9);opacity:0}60%{transform:scale(1.03);opacity:1}to{transform:scale(1)}}.card-inner[_ngcontent-%COMP%]{position:absolute;inset:0;transition:transform .6s ease;transform-style:preserve-3d}.card.flipped[_ngcontent-%COMP%]   .card-inner[_ngcontent-%COMP%]{transform:rotateY(180deg)}.card-face[_ngcontent-%COMP%]{position:absolute;inset:0;display:flex;flex-direction:column;justify-content:center;align-items:center;gap:12px;padding:18px;border-radius:16px;border:1px solid #1f2e4d;backface-visibility:hidden;background:#0f172a;box-shadow:0 14px 35px #0000002a}.card-face.back[_ngcontent-%COMP%]{background:linear-gradient(160deg,#0ea5e9,#2563eb);color:#f8fafc;transform:rotateY(180deg)}.tag[_ngcontent-%COMP%]{position:absolute;top:12px;left:12px;width:fit-content;padding:6px 10px;border-radius:999px;font-size:11px;letter-spacing:.08em;background:#1f2e4d;color:#cbd5e1}.card-face.back[_ngcontent-%COMP%]   .tag[_ngcontent-%COMP%]{background:#0b1224;color:#dbeafe}.word[_ngcontent-%COMP%]{margin:0;font-size:20px;font-weight:800;text-align:center;width:100%;word-break:break-word;overflow-wrap:break-word;line-height:1.25;padding:0 6px;max-height:130px;overflow-y:auto}.word[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.word[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#1f2e4d;border-radius:999px}.hint[_ngcontent-%COMP%]{margin:0;color:#94a3b8;font-size:13px}.card-face.back[_ngcontent-%COMP%]   .hint[_ngcontent-%COMP%]{color:#e2e8f0}.home-sections[_ngcontent-%COMP%]{display:grid;gap:28px}.section-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;margin-bottom:8px}.section-title[_ngcontent-%COMP%]   .muted[_ngcontent-%COMP%], .muted[_ngcontent-%COMP%]{color:#94a3b8;font-size:13px}.collection-section[_ngcontent-%COMP%]{margin-bottom:24px}.collection-actions[_ngcontent-%COMP%]{display:flex;gap:10px}.collection-form[_ngcontent-%COMP%]{display:flex;gap:10px;flex-wrap:wrap}.collection-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:10px 12px;border-radius:10px;border:1px solid #1f2e4d;background:#0f172a;color:#e5ecf5;min-width:220px}.collection-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px 14px;border-radius:10px;border:1px solid #2d6cdf;background:linear-gradient(90deg,#2563eb,#22d3ee);color:#0b1224;font-weight:700;cursor:pointer}.collection-grid[_ngcontent-%COMP%]{margin-top:18px;display:grid;gap:16px;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));max-width:1000px}.collection-card[_ngcontent-%COMP%]{background:#0f172a;border:1px solid #1f2e4d;border-radius:12px;padding:14px;cursor:pointer;transition:border .15s ease,transform .1s ease;position:relative}.collection-card[_ngcontent-%COMP%]:hover{border-color:#60a5fa;transform:translateY(-2px)}.collection-card.active[_ngcontent-%COMP%]{border-color:#22c55e;box-shadow:0 0 0 1px #22c55e40}.collection-card.delete-mode[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_shake .4s ease-in-out infinite alternate}.collection-card[_ngcontent-%COMP%]   .delete-badge[_ngcontent-%COMP%]{position:absolute;top:8px;right:8px;width:20px;height:20px;border-radius:50%;background:#f43f5e;color:#fff;border:none;cursor:pointer;font-weight:700;line-height:18px;padding:0;display:inline-flex;align-items:center;justify-content:center}.collection-name[_ngcontent-%COMP%]{margin:0 0 6px;font-weight:700;color:#e5ecf5;font-size:16px}.collection-date[_ngcontent-%COMP%]{margin:0;font-size:12px}.modal-backdrop[_ngcontent-%COMP%]{position:fixed;inset:0;background:#0000008c;display:flex;align-items:center;justify-content:center;z-index:2000}.modal[_ngcontent-%COMP%]{background:#0f172a;border:1px solid #1f2e4d;border-radius:16px;padding:20px;width:min(400px,90vw);color:#e5ecf5;box-shadow:0 20px 40px #00000059;display:grid;gap:12px}.modal[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0}.modal-actions[_ngcontent-%COMP%]{display:flex;gap:10px;justify-content:flex-end;flex-wrap:wrap}.primary[_ngcontent-%COMP%]{padding:10px 14px;border-radius:10px;border:1px solid #2d6cdf;background:linear-gradient(90deg,#2563eb,#22d3ee);color:#0b1224;font-weight:700;cursor:pointer}.danger[_ngcontent-%COMP%]{padding:10px 14px;border-radius:10px;border:1px solid #f43f5e;background:#b91c1c;color:#fff;font-weight:700;cursor:pointer}.danger.active[_ngcontent-%COMP%]{box-shadow:0 0 0 2px #f43f5e40}.history-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:14px}.with-toggle[_ngcontent-%COMP%]{margin-top:16px}.more-btn[_ngcontent-%COMP%]{background:#0f172a;border:1px solid #1f2e4d;color:#e5ecf5;border-radius:999px;padding:8px 12px;font-weight:700;cursor:pointer;min-width:38px;line-height:1}.more-btn-wrapper[_ngcontent-%COMP%]{grid-column:1 / -1;display:flex;justify-content:center;align-items:center}.verify-card[_ngcontent-%COMP%]{background:#0f172a;border:1.5px solid #1f2e4d;border-radius:14px;padding:16px;display:grid;gap:10px;box-shadow:0 10px 30px #00000040}.verify-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:14px;flex-wrap:wrap}.verify-title[_ngcontent-%COMP%]{margin:0;font-size:18px;font-weight:700}.verify-sub[_ngcontent-%COMP%]{margin:0;color:#94a3b8;font-size:14px}.verify-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;flex-wrap:wrap}.chip.warning[_ngcontent-%COMP%]{background:#f59e0b1a;color:#f59e0b;border:1px solid #f59e0b44}.history-card[_ngcontent-%COMP%]{background:#0f172a;border:1px solid #1f2e4d;border-radius:14px;padding:14px;cursor:pointer;transition:border .2s ease,transform .1s ease}.history-card[_ngcontent-%COMP%]:hover{border-color:#60a5fa;transform:translateY(-2px)}.history-stack[_ngcontent-%COMP%]{display:grid;gap:12px}.section-title[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:12px}.danger-btn[_ngcontent-%COMP%]{padding:8px 14px;border-radius:12px;border:1px solid #f87171;background:#b91c1c;color:#fff;font-weight:600;cursor:pointer;transition:transform .15s ease,box-shadow .15s ease,background .15s ease}.danger-btn[_ngcontent-%COMP%]:hover{background:#ef4444;box-shadow:0 8px 20px #ef444440;transform:translateY(-1px)}.danger-btn[_ngcontent-%COMP%]:active{transform:translateY(0)}.history-wide[_ngcontent-%COMP%]{background:#0f172a;border:1.5px solid #1f2e4d;border-radius:14px;padding:14px;display:grid;gap:10px;cursor:pointer;transition:border .2s ease,transform .1s ease;width:100%;box-sizing:border-box}.history-wide[_ngcontent-%COMP%]:hover{border-color:#60a5fa;transform:translateY(-2px)}.history-wide.correct[_ngcontent-%COMP%]{border-color:#22c55e;box-shadow:0 0 0 .5px #22c55e40}.history-wide.wrong[_ngcontent-%COMP%]{border-color:#f43f5e;box-shadow:0 0 0 .5px #f43f5e40}.history-wide__header[_ngcontent-%COMP%], .history-wide__body[_ngcontent-%COMP%], .history-wide__row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.history-wide__left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.history-wide__right[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-weight:700;color:#e5ecf5}.history-wide[_ngcontent-%COMP%]   .chevron[_ngcontent-%COMP%]{color:#94a3b8}.history-wide__score[_ngcontent-%COMP%]   .word[_ngcontent-%COMP%]{margin:0}.history-wide__cta[_ngcontent-%COMP%]{color:#60a5fa;font-weight:700}.history-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.pill.small[_ngcontent-%COMP%]{padding:4px 8px;border-radius:999px;background:#111b30;border:1px solid #1f2e4d;color:#dbeafe;font-size:12px}.score[_ngcontent-%COMP%]{margin:10px 0 4px;font-size:22px;font-weight:700}.date[_ngcontent-%COMP%]{margin:0 0 8px;color:#94a3b8;font-size:13px}.link-btn[_ngcontent-%COMP%]{background:transparent;border:none;color:#60a5fa;cursor:pointer;padding:0;font-weight:600}.review-card[_ngcontent-%COMP%]{position:relative;max-width:640px;margin:0 auto 16px;height:220px;perspective:1200px}.review-card[_ngcontent-%COMP%]   .card-inner[_ngcontent-%COMP%]{transform-style:preserve-3d;transition:transform .6s ease}.review-card.revealed[_ngcontent-%COMP%]   .card-inner[_ngcontent-%COMP%]{transform:rotateY(180deg)}.answer[_ngcontent-%COMP%]{background:#0f172a;border:1px solid #1f2e4d;border-radius:16px;padding:16px;display:grid;gap:12px;max-width:640px;margin:0 auto 24px}.review-controls[_ngcontent-%COMP%]{margin-bottom:24px}.review-form[_ngcontent-%COMP%]{background:#0f172a;border:1px solid #1f2e4d;border-radius:16px;padding:18px;display:grid;gap:16px;box-shadow:0 14px 34px #00000052;max-width:900px;margin:0 auto}.review-form[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;background:#0b1224;border:1px solid #1e293b;color:#e5ecf5;border-radius:10px;padding:12px 14px}.review-form[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:#60a5fa;box-shadow:0 0 0 3px #60a5fa33;outline:none}.form-row[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:16px;align-items:flex-end}.picker-actions[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6px;align-items:flex-start}.pill-actions[_ngcontent-%COMP%]{display:flex;gap:8px}.pill[_ngcontent-%COMP%]{border-radius:999px;padding:8px 12px;min-width:72px}.pill.primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#2563eb,#22d3ee);border:1px solid #2563eb;color:#0b1224;font-weight:700}.pill.primary.ghost[_ngcontent-%COMP%]{background:#0f172a;border:1px solid #2563eb;color:#e5ecf5}.review-form[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]{display:grid;gap:6px}.label[_ngcontent-%COMP%]{font-weight:700;color:#e5ecf5}.collection-picker[_ngcontent-%COMP%]{display:grid;gap:10px}.collection-list[_ngcontent-%COMP%]{display:grid;gap:8px;grid-template-columns:repeat(auto-fit,minmax(180px,1fr))}.collection-option[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;gap:10px;padding:10px 12px;background:#0b1224;border:1px solid #1f2e4d;border-radius:10px;cursor:pointer;transition:border .15s ease,background .15s ease}.collection-option[_ngcontent-%COMP%]:hover{border-color:#2563eb;background:#0f172a}.collection-option.selected[_ngcontent-%COMP%]{border-color:#2563eb;background:#0f172a;box-shadow:0 8px 16px #2563eb2e}.collection-option[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{color:#e5ecf5;font-weight:600}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:center}.form-actions[_ngcontent-%COMP%]   .primary[_ngcontent-%COMP%]{width:100%;max-width:none;padding:14px;font-size:16px}.answer-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;gap:12px}.answer-title[_ngcontent-%COMP%]{margin:0;font-weight:700;color:#e5ecf5}.answer-sub[_ngcontent-%COMP%]{margin:2px 0 0;color:#94a3b8;font-size:13px}.chip[_ngcontent-%COMP%]{padding:6px 10px;border-radius:999px;background:#1f2e4d;color:#cbd5e1;font-size:12px;white-space:nowrap}.chip.success[_ngcontent-%COMP%]{background:#0f5132;color:#c5f6e0}.chip.error[_ngcontent-%COMP%]{background:#5c1f1f;color:#fca5a5}.answer-input[_ngcontent-%COMP%]{background:#0b1224;border:1px solid #1e293b;border-radius:10px;color:#e5ecf5;padding:12px 14px;outline:none;font-size:15px;transition:border .2s ease,box-shadow .2s ease;width:100%;box-sizing:border-box}.answer-input[_ngcontent-%COMP%]:focus{border-color:#60a5fa;box-shadow:0 0 0 3px #60a5fa33}.actions[_ngcontent-%COMP%]{display:flex;gap:10px}.actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1}.actions[_ngcontent-%COMP%]   .primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#2563eb,#22d3ee);border:none;color:#0b1224;border-radius:10px;padding:12px 14px;font-weight:700}.actions[_ngcontent-%COMP%]   .secondary[_ngcontent-%COMP%]{background:#111b30;border:1px solid #1f2e4d;color:#e5ecf5;border-radius:10px;padding:12px 14px;font-weight:700}.result[_ngcontent-%COMP%]{background:#0f172a;border:1px solid #1f2e4d;border-radius:16px;padding:16px;margin-bottom:16px}@media(max-width:880px){[_nghost-%COMP%]{padding:32px 18px 64px}.layout[_ngcontent-%COMP%]{grid-template-columns:1fr}.sidebar[_ngcontent-%COMP%]{position:relative;top:0;flex-direction:row;align-items:center}.hero[_ngcontent-%COMP%]{grid-template-columns:1fr}.history-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fit,minmax(180px,1fr))}}.auth-screen[_ngcontent-%COMP%]{min-height:100vh;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:16px;background:radial-gradient(circle at 20% 20%,#2d6cdf1f,transparent 40%),radial-gradient(circle at 80% 10%,#f59e0b1f,transparent 35%),linear-gradient(135deg,#0b1224,#0f192f 45%,#0b1224);padding:32px}.auth-card[_ngcontent-%COMP%]{background:#0f172a;border:1px solid #1f2e4d;border-radius:16px;padding:24px;width:min(420px,100%);color:#e5ecf5;box-shadow:0 14px 40px #0003}.below-auth[_ngcontent-%COMP%]{margin-top:16px;width:min(640px,100%)}.auth-card[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0 0 6px}.auth-card[_ngcontent-%COMP%]   .lede[_ngcontent-%COMP%]{margin:0 0 16px;color:#94a3b8}.auth-form[_ngcontent-%COMP%]{display:grid;gap:12px}.auth-form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:grid;gap:6px;color:#cbd5e1}.auth-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background:#0b1224;border:1px solid #1e293b;border-radius:10px;color:#e5ecf5;padding:12px 14px}.auth-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:6px;background:linear-gradient(135deg,#2563eb,#22d3ee);border:none;border-radius:10px;color:#0b1224;padding:12px 14px;font-weight:700;cursor:pointer}.auth-error[_ngcontent-%COMP%]{margin:10px 0 0;color:#f87171}.verify-block[_ngcontent-%COMP%]{margin-top:12px;padding:10px;border-radius:10px;background:#111b30;border:1px solid #1f2e4d}.verify-block[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:6px}@media(max-width:520px){.word[_ngcontent-%COMP%]{font-size:18px}}']})};Xy(up,KS).catch(n=>console.error(n));
